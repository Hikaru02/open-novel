{"version":3,"file":"メイン.js","sources":["@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/1","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/ヘルパー.js","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/6","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/ストレージ.js","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/10","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/モデル.js","@traceur/generated/TemplateParser/14","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/ビュー.js","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/コントローラー.js","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/16"],"names":[],"mappings":"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","sourcesContent":["System.register($__placeholder__0, [], $__placeholder__1);","function() {\n      $__placeholder__0\n    }","var __moduleName = $__placeholder__0;",";( _ => {\r\n\t'use strict'\r\n\r\n\tvar global = (1,eval)('this')\r\n\tvar Promise = global.Promise\r\n\tvar LOG = console.log.bind(console)\r\n\r\n\tvar Data = {\r\n\t\tdebug :true,\r\n\t\tURL: {\r\n\t\t\tContentsSetting: 'データ/作品.txt',\r\n\t\t\tEngineSetting: 'エンジン/エンジン定義.txt',\r\n\t\t},\r\n\t}\r\n\r\n\tvar Util = {\r\n\r\n\t\t/*\r\n\t\tsetDefault(obj, name, value) {\r\n\t\t\tif (arguments.length !== 3) throw 'illegal arguments length'\r\n\t\t\tif (!(name in obj)) obj[name] = value\r\n\t\t\treturn obj\r\n\t\t},\r\n\t\t*/\r\n\r\n\t\tsetDefaults(obj = {}, props) {\r\n\t\t\tif (arguments.length !== 2) throw 'illegal arguments length'\r\n\t\t\tObject.keys(props).forEach(key => { if (!(key in obj)) obj[key] = props[key] })\r\n\t\t\treturn obj\r\n\t\t},\r\n\r\n\t\tsetProperties(obj = {}, props) {\r\n\t\t\tObject.keys(props).forEach(key => obj[key] = props[key] )\r\n\t\t\treturn obj\r\n\t\t},\r\n\r\n\t\tisNoneType(str) {\r\n\t\t\treturn (typeof str === 'string') && (str == '' || /^(無し|なし)$/.test(str))\r\n\t\t},\r\n\r\n\t/*\r\n\t\tforceImageURL(url, type = 'png', kind) {\r\n\t\t\treturn Util.isNoneType(url) ? null :  Util.forceURL(url, type, kind)\r\n\t\t},\r\n\r\n\t\tforceFDImageURL(url, type = 'png', kind = '立ち絵') {\r\n\t\t\treturn Util.isNoneType(url) ? null :  Util.forceURL(url, type, kind)\r\n\t\t},\r\n\r\n\t\tforceBGImageURL(url, type = 'png', kind = '背景') {\r\n\t\t\treturn Util.isNoneType(url) ? null :  Util.forceURL(url, type, kind)\r\n\t\t},\r\n\r\n\t\tforceScriptURL(url, type = 'txt', kind = 'シナリオ') {\r\n\t\t\treturn Util.forceURL(url, type, kind)\r\n\t\t},\r\n\r\n\t\tforceURL(url, type, kind) {\r\n\t\t\tif (!url || arguments.length != 3) throw 'URL特定不能エラー'\r\n\t\t\tif (!url.match(/\\.[^\\.]+$/)) url = `${url}.${type}`\r\n\t\t\tvar base = Player.baseURL || ''\r\n\t\t\tif (kind && (!url.match(kind))) url = `データ/${base}/${kind}/${url}`\r\n\t\t\turl = url.replace(/\\/+/g, '/')\r\n\t\t\treturn url\r\n\t\t},\r\n\t*/\r\n\r\n\t\tforceName(kind, name, type) {\r\n\t\t\tif (!name || !type) throw 'name特定不能エラー'\r\n\t\t\tif (!name.match(/\\.[^\\.]+$/)) name = `${name}.${type}`\r\n\t\t\treturn `${kind}/${name}`\r\n\t\t},\r\n\r\n\t\ttoHalfWidth(str) {\r\n\r\n\t\t\tvar table = {\r\n\t\t\t\t'。': '.',\r\n\t\t\t//\t'ー': '-',\r\n\t\t\t\t'―': '-',\r\n\t\t\t\t'！': '!', \r\n\t\t\t\t'≧': '>=',\r\n\t\t\t\t'≦': '<=',\r\n\t\t\t\t'≠': '!=',\r\n\t\t\t\t'×': '*',\r\n\t\t\t\t'✕': '*',\r\n\t\t\t\t'✖': '*',\r\n\t\t\t\t'☓': '*',\r\n\t\t\t\t'＊': '*', \r\n\t\t\t\t'％': '%',\r\n\t\t\t\t'／': '/',\r\n\t\t\t\t'｜': '|',\r\n\t\t\t\t'”': '\"',\r\n\t\t\t\t'’': \"'\",\r\n\t\t\t}\r\n\r\n\t\t\treturn str.replace(/./g, char => (char in table ? table[char] : char) )\r\n\t\t\t.replace(/[\\uff0b-\\uff5a]/g, char => String.fromCharCode(char.charCodeAt(0)-65248) )\r\n\t\t},\r\n\r\n\t\tNOP() {},\r\n\r\n\t\terror(message) { alert(message) },\r\n\r\n\t\tDefault: undefined,\r\n\r\n\t\tco(func) {\r\n\t\t\treturn function () {\r\n\t\t\t\tvar defer = Promise.defer()\r\n\t\t\t\tvar iter = func.apply(this, arguments)\r\n\t\t\t\tvar loop = val => {\r\n\t\t\t\t\tvar {value, done} = iter.next(val)\r\n\t\t\t\t\t//LOG(value, done)\r\n\t\t\t\t\tvalue = Promise.resolve(value)\r\n\t\t\t\t\tif (done) defer.resolve(value)\r\n\t\t\t\t\telse value.then(loop, defer.reject)\r\n\t\t\t\t}\r\n\t\t\t\tloop()\r\n\t\t\t\treturn defer.promise\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t}\r\n\r\n\r\n\r\n\tUtil.setDefaults(String.prototype, {\r\n\t\trepeat: function repeat(num) {\r\n\t\t\treturn new Array(num + 1).join(this)\r\n\t\t},\r\n\t})\r\n\r\n\r\n\tUtil.setDefaults(Promise, {\r\n\r\n\t\tdefer() {\r\n\t\t\tvar resolve, reject\r\n\t\t\tvar promise = new Promise((ok, ng) => {\r\n\t\t  \t\tresolve = ok, reject = ng\r\n\t\t\t})\r\n\t\t\treturn {promise, resolve, reject}\r\n\t\t},\r\n\r\n\t})\r\n\r\n\r\n\r\n\tUtil.setProperties(Promise.prototype, {\r\n\r\n\t\t/*\r\n\t\tnext: function next(kind, onFulfilled, onRejected) {\r\n\t\t\treturn this.then( result => {\r\n\t\t\t\tPlayer.setRunPhase(kind)\r\n\t\t\t\treturn onFulfilled(result)\r\n\t\t\t}, onRejected).catch(err => {\r\n\t\t\t\tLOG(kind + 'エラー', err)\r\n\t\t\t\tPlayer.setErrorPhase(kind)\r\n\t\t\t\treturn Promise.reject(err)\r\n\t\t\t})\r\n\t\t},\r\n\t\t*/\r\n\r\n\t\ton: function on(type, onFulfilled = result => result, onRejected) {\r\n\t\t\treturn this.then( result => View.on(type).then( _ => onFulfilled(result) ).catch(onRejected) )\r\n\t\t},\r\n\r\n\t\tand: function and(func, arg) {\r\n\t\t\treturn this.then( _ => func(arg) )\r\n\t\t},\r\n\r\n\t\tdelay: function delay(time) {\r\n\t\t\tif (!+time) throw 'illegal time number'\r\n\t\t\treturn this.then( _ => new Promise( resolve => setTimeout(resolve, time) ) )\r\n\t\t},\r\n\r\n\t\tthrough: function through(onFulfilled, onRejected) {\r\n\t\t\treturn this.then( val => {\r\n\t\t\t\tonFulfilled(val)\r\n\t\t\t\treturn Promise.resolve(val)\r\n\t\t\t}, err => {\r\n\t\t\t\tonRejected(err)\r\n\t\t\t\treturn Promise.reject(err)\r\n\t\t\t} )\r\n\t\t},\r\n\t})\r\n\r\n\tObject.defineProperty(Promise.prototype, '$', {\r\n\t\tenumerable: true, configurable: true, \r\n\t\tget: function () {\r\n\t\t\tvar _p = this\r\n\t\t\tvar $p = function (...args) {\r\n\t \t\t\tvar len = args.length\r\n\t \t\t\tif (len === 0) return $p\r\n\t \t\t\tvar [arg0, arg1, arg2] = args\r\n\r\n\t \t\t\tif (typeof arg0 == 'function') {\r\n\t\t \t\t\tswitch (args.length) {\r\n\t\t\t\t\t\tcase 1: \r\n\t\t\t\t\t\tcase 2: return _p.then(arg0).$\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t \t\t\tswitch (args.length) {\r\n\t\t\t\t\t\tcase 1: return _p.on(arg0).$\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tcase 3: return _p.next(arg0, arg1, arg2).$\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tthrow 'illegal arguments length'\r\n\t\t\t}\r\n\t\t\tUtil.setProperties($p, {\r\n\t\t\t\tthen: (res, rej) => _p.then(res, rej).$ ,\r\n\t\t\t\tcatch: rej => _p.catch(rej).$ ,\r\n\t\t\t})\r\n\t\t\tObject.defineProperty($p, '_', {\r\n\t\t\t\tenumerable: true, configurable: true,\r\n\t\t\t\tget: _ => _p\r\n\t\t\t})\r\n\t\t\t$p.__proto__ = _p\r\n\t\t\treturn $p\r\n\t\t}\r\n\t})\r\n\r\n\tfunction $Promise(func) {\r\n\t\treturn new Promise(func).$\r\n\t}\r\n\r\n\tUtil.setProperties($Promise, {\r\n\t\tdefer: _ => {\r\n\t\t\tvar defer = Promise.defer()\r\n\t\t\tdefer.promise = defer.promise.$\r\n\t\t\treturn defer\r\n\t\t},\r\n\t\tresolve: val => Promise.resolve(val).$ ,\r\n\t\treject : val => Promise.reject(val).$ ,\r\n\t\tall    : ary => Promise.all(ary).$ ,\r\n\t\trace   : ary => Promise.race(ary).$ ,\r\n\t})\r\n\r\n\tUtil.overrides = { Promise: $Promise }\r\n\r\n\tvar READY = ( _ => {\r\n\t\tfunction READY(type) {\r\n\t\t\tvar types = (arguments.length != 1) ? [].slice.call(arguments) : (Array.isArray(type)) ? type : [type]\r\n\t\t\treturn $Promise.all(types.map(type => {\r\n\t\t\t\tif (!(type in READY)) throw 'illegal READY type \"' +type+ '\"'\r\n\t\t\t\treturn READY[type]\r\n\t\t\t}))\r\n\t\t}\r\n\t\t;['DOM', 'Player', 'View', 'Storage'].forEach(type => {\r\n\t\t\tglobal[type] = null\r\n\t\t\tvar defer = $Promise.defer()\r\n\t\t\tREADY[type] = defer.promise\r\n\t\t\tREADY[type].ready = obj => {\r\n\t\t\t\tif (obj) global[type] = obj\r\n\t\t\t\tdefer.resolve()\r\n\t\t\t} \r\n\t\t})\r\n\t\treturn READY\r\n\t})()\r\n\r\n\twindow.addEventListener('DOMContentLoaded', READY.DOM.ready)\r\n\r\n\r\n\tUtil.setDefaults(global, {\r\n\t\tglobal, READY, Util, LOG, Data,\r\n\t})\r\n\r\n})();","$traceurRuntime.assertObject($__placeholder__0)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = 0;\n                 $__placeholder__2 < arguments.length; $__placeholder__3++)\n              $__placeholder__4[$__placeholder__5] = arguments[$__placeholder__6];","return $__placeholder__0","System.get($__placeholder__0 +'')","READY().then( _ => {\r\n\t'use strict'\r\n\r\n\tUtil.co(function* () {\r\n\r\n\t\tvar db = yield new Promise( (ok, ng) => { \r\n\t\t\tvar rq = indexedDB.open('open-novel', 1)\r\n\t\t\trq.onupgradeneeded = evt => {\r\n\t\t\t\tvar db = rq.result\r\n\t\t\t\tvar ov = evt.oldVersion\r\n\t\t\t\tif (ov < 1) db.createObjectStore('test', { autoIncrement: true })\r\n\t\t\t} \r\n\t\t\trq.onsuccess = _ => ok(rq.result)\r\n\t\t\trq.onerror = err => ng(`ストレージが開けない（${err.message})`)\r\n\t\t})\r\n\r\n\t\tvar Storage = {\r\n\t\t\ttestAdd(key, val) {\r\n\t\t\t\treturn new Promise ( (ok, ng) => { \r\n\t\t\t\t\tvar ts = db.transaction('test', 'readwrite')\r\n\t\t\t\t\tvar os = ts.objectStore('test')\r\n\t\t\t\t\tvar rq = os.add(val, key)\r\n\t\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の書込に失敗（${ts.error.message})`)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttestPut(key, val) {\r\n\t\t\t\treturn new Promise ( (ok, ng) => { \r\n\t\t\t\t\tvar ts = db.transaction('test', 'readwrite')\r\n\t\t\t\t\tvar os = ts.objectStore('test')\r\n\t\t\t\t\tvar rq = os.put(val, key)\r\n\t\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の書込に失敗（${ts.error.message})`)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttestGet(key) {\r\n\t\t\t\treturn new Promise ( (ok, ng) => { \r\n\t\t\t\t\tvar ts = db.transaction('test', 'readwrite')\r\n\t\t\t\t\tvar os = ts.objectStore('test')\r\n\t\t\t\t\tvar rq = os.get(key)\r\n\t\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の読込に失敗（${ts.error.message})`)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\ttestDelete(key) {\r\n\t\t\t\treturn new Promise ( (ok, ng) => { \r\n\t\t\t\t\tvar ts = db.transaction('test', 'readwrite')\r\n\t\t\t\t\tvar os = ts.objectStore('test')\r\n\t\t\t\t\tvar rq = os.delete(key)\r\n\t\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の削除に失敗（${ts.error.message})`)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\r\n\t\t}\r\n\r\n\t\tREADY.Storage.ready(Storage)\r\n\r\n\t})().catch(LOG)\r\n\r\n}).catch(LOG)","$traceurRuntime.initGeneratorFunction($__placeholder__0)","return $__placeholder__0(\n              $__placeholder__1,\n              $__placeholder__2, this);","$traceurRuntime.createGeneratorInstance","function($ctx) {\n      while (true) $__placeholder__0\n    }","return $__placeholder__0","$ctx.sent","return $ctx.end()","\r\nREADY().then(function () {\r\n\t'use strict'\r\n\r\n\tfunction setPhase(phase) { document.title = '【' +phase+ '】' }\r\n\tfunction setRunPhase(kind) { setPhase(`${kind}中...`) }\r\n\tfunction setErrorPhase(kind) { setPhase(`${kind}エラー`) }\r\n\r\n\r\n\tfunction parseScript(text) {\r\n\t\ttext = text.replace(/\\r\\n/g, '\\n').replace(/\\n+/g, '\\n').replace(/\\n/g, '\\r\\n') + '\\r\\n'\r\n\t\ttext = text.replace(/^\\#.*\\n/gm, '')\r\n\t\tfunction parseOne(base, text) {\r\n\t\t\tvar chanks = text.match(/[^\\n]+?\\n(\\t+[\\s\\S]+?\\n)+/g) || []\r\n\t\t\tchanks.forEach(chank => {\r\n\t\t\t\r\n\t\t\t\tvar blocks = chank.replace(/^\\t/gm,'').replace(/\\n$/, '').match(/.+/g)\r\n\t\t\t\t//LOG(blocks)\r\n\t\t\t\tvar act = blocks.shift().trim()\r\n\t\t\t\tvar data = '\\n' +blocks.join('\\n')+ '\\n'\r\n\t\t\t\tvar ary = []\r\n\t\t\t\tif (act[0] !== '・') {\r\n\t\t\t\t\tbase.push(['会話', [[act, blocks]]])\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else act = act.slice(1)\r\n \r\n\t\t\t\tif (data.match(/\\t/)) {\r\n\t\t\t\t\tbase.push([act, ary])\r\n\t\t\t\t\t//LOG(data)\r\n\t\t\t\t\tparseOne(ary, data)\r\n\t\t\t\t} else base.push([act, blocks])\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tvar base = []\r\n\t\tparseOne(base, text)\r\n\t\treturn base\r\n\r\n\t}\r\n\r\n\r\n\r\n\tfunction copyObject(obj) {\r\n\t\treturn JSON.parse(JSON.stringify(obj))\r\n\t}\r\n\r\n\r\n\tfunction otherName(name) {\r\n\t\treturn function () { return this[name].apply(this, arguments) }\r\n\t}\r\n\r\n/*\r\n\tfunction preloadImage({name, url, kind, type = 'png'}) {\r\n\r\n\t\tfunction test(url) {\r\n\t\t\treturn new Promise( (ok, ng) => {\r\n\t\t\t\tvar img = new Image\r\n\t\t\t\timg.onload = _ => ok(url)\r\n\t\t\t\timg.onerror = _ => ng(`画像『${name}』のキャッシュに失敗`)\r\n\t\t\t\timg.src = url\r\n\t\t\t} )\r\n\t\t}\r\n\r\n\t\treturn preload({name, url, kind, test, type})\r\n\r\n\t}\r\n\r\n\tfunction preloadScript({name, url, kind = 'シナリオ', type = 'txt'}) {\r\n\r\n\t\tfunction test(url) {\r\n\t\t\treturn find(url).then( _ => url)\r\n\t\t}\r\n\r\n\t\treturn preload({name, url, kind, test, type})\r\n\r\n\t}\r\n\r\n\tfunction preload({name, kind, type, test}) {\r\n\t\tvar hide = View.setLoadingMessage('Loadind...')\r\n\t\treturn new Promise((ok, ng) => {\r\n\t\t\t//LOG(url, Util.isNoneType(url))\r\n\t\t\tif (Util.isNoneType(name)) return ok(url)\r\n\t\t\tvar url = `データ/${Player.scenarioName}/${Util.forceName(kind, name, type)}`\r\n\t\t\ttest(url).catch( _ => { \r\n\t\t\t\tvar url = `データ/[[共通素材]]/${Util.forceName(kind, name, type)}`\r\n\t\t\t\treturn test(url)\r\n\t\t\t} ).then(ok, ng)\r\n\t\t}).then( url => {\r\n\t\t\t//LOG(url)\r\n\t\t\thide()\r\n\t\t\treturn url\r\n\t\t})\r\n\t}\r\n*/\r\n\r\n\r\n\tfunction runScript(script) {\r\n\r\n\t\tView.changeModeIfNeeded('NOVEL')\r\n\r\n\t\tvar run = Promise.defer()\r\n\t\tscript = copyObject(script)\t\r\n\r\n\t\tvar actHandlers = {\r\n\t\t\t会話(data, done, failed) {\r\n\r\n\t\t\t\tfunction nextPage() {\r\n\r\n\t\t\t\t\tvar ary = data.shift()\r\n\t\t\t\t\tif (!ary) return done()\r\n\r\n\t\t\t\t\tvar name = ary[0], texts = ary[1]\r\n\t\t\t\t\tif (Util.isNoneType(name)) name = ''\r\n\t\t\t\t\tname = replaceEffect(name)\r\n\t\t\t\t\tView.nextPage(name)\r\n\r\n\t\t\t\t\tfunction nextSentence() {\r\n\t\t\t\t\t\tvar text = texts.shift()\r\n\t\t\t\t\t\tif (!text) return nextPage()\r\n\t\t\t\t\t\ttext = text.replace(/\\\\w(\\d+)/g, (_, num) => {\r\n\t\t\t\t\t\t\treturn '\\u200B'.repeat(num)\r\n\t\t\t\t\t\t}).replace(/\\\\n/g, '\\n')\r\n\t\t\t\t\t\ttext = replaceEffect(text)\r\n\t\t\t\t\t\tView.addSentence(text).on('go', nextSentence, failed)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnextSentence()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnextPage()\r\n\t\t\t},\r\n\r\n\t\t\t背景(data, done, failed) {\r\n\t\t\t\tvar name = replaceEffect(data[0])\r\n\t\t\t\ttoBlobURL('背景', name, 'jpg').then( url => View.setBGImage({ url }) ).then(done, failed)\r\n\t\t\t},\r\n\r\n\t\t\t立絵: otherName('立ち絵'),\r\n\t\t\t立ち絵(data, done, failed) {\r\n\t\t\t\t//LOG(data)\r\n\t\t\t\tPromise.all(data.reduce((base, ary) => {\r\n\r\n\t\t\t\t\tif (!base) return\r\n\r\n\t\t\t\t\tif (Util.isNoneType(ary)) return base\r\n\r\n\t\t\t\t\tvar [position, names] = ary\r\n\r\n\t\t\t\t\tif (!position) return failed('不正な位置検出')\r\n\t\t\t\t\tif(!names) return failed('不正な画像名検出') \r\n\r\n\t\t\t\t\tposition = replaceEffect(position)\r\n\t\t\t\t\tvar name = replaceEffect(names[0])\r\n\r\n\t\t\t\t\tvar a_type = ['left','right']['左右'.indexOf(position)]\r\n\t\t\t\t\tvar v_type = 'top'\r\n\t\t\t\t\tvar [a_per, v_per] = [0, 0]\r\n\t\t\t\t\tvar height = null\r\n\r\n\t\t\t\t\tif (!a_type) {\r\n\t\t\t\t\t\tvar pos = Util.toHalfWidth(position).match(/[+\\-0-9.]+/g)\r\n\t\t\t\t\t\tif (!pos) return failed('不正な位置検出')\r\n\t\t\t\t\t\tvar [a_pos, v_pos='0', height = null] = pos\r\n\t\t\t\t\t\ta_per = Math.abs(+a_pos)\r\n\t\t\t\t\t\tv_per = Math.abs(+v_pos)\r\n\t\t\t\t\t\ta_type = a_pos.match('-') ? 'right' : 'left'\r\n\t\t\t\t\t\tv_type = v_pos.match('-') ? 'bottom' : 'top'\r\n\t\t\t\t\t\theight = height != null ? `${+height}%` : null\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbase.push(toBlobURL('立ち絵', name, 'png').then( url => ({ url, height, [a_type]: `${a_per}%`, [v_type]: `${v_per}%` }) ))\r\n\t\t\t\t\treturn base\r\n\t\t\t\t}, [])).then(View.setFDImages.bind(View)).then(done, failed)\r\n\t\t\t},\r\n\r\n\t\t\t選択: otherName('選択肢'),\r\n\t\t\t選択肢(data, done, failed) {\r\n\r\n\t\t\t\tView.setChoiceWindow(data.map(ary => {\r\n\t\t\t\t\treturn { name: replaceEffect(ary[0]), value: ary[1] }\r\n\t\t\t\t})).then( value => {\r\n\t\t\t\t\tif (typeof value[0] == 'string') actHandlers['ジャンプ'](value, done, failed)\r\n\t\t\t\t\telse runScript(value).then(done, failed)\r\n\t\t\t\t} )\r\n\t\t\t\t\t\r\n\t\t\t},\r\n\r\n\t\t\tジャンプ(data, done, failed) {\r\n\t\t\t\tvar to = replaceEffect(data[0])\r\n\t\t\t\tfetchScriptData(to).then(runScript).then(done, failed)\r\n\t\t\t},\r\n\r\n\t\t\t変数: otherName('パラメータ'),\r\n\t\t\tパラメーター: otherName('パラメータ'),\r\n\t\t\tパラメータ(data, done, failed) {\r\n\t\t\t\t//LOG(data)\r\n\t\t\t\tdata.forEach(str => {\r\n\t\t\t\t\tstr = Util.toHalfWidth(str)\r\n\t\t\t\t\tstr = str.match(/(.+)\\:(.+)/)\r\n\t\t\t\t\tif (!str) return failed('不正なパラメータ指定検出') \r\n\t\t\t\t\tvar name = replaceEffect(str[1])\r\n\t\t\t\t\tvar effect = str[2]\r\n\t\t\t\t\tif (!name) return failed('不正なパラメータ指定検出') \r\n\t\t\t\t\tparamSet(name, evalEffect(effect, failed))\r\n\r\n\t\t\t\t})\r\n\t\t\t\tdone()\r\n\t\t\t},\r\n\r\n\t\t\t繰返: otherName('繰り返し'),\r\n\t\t\t繰返し: otherName('繰り返し'),\r\n\t\t\t繰り返し(data, done, failed, i = 0) {\r\n\t\t\t\ti++\r\n\t\t\t\tif (i > 1000) return failed('繰返し回数が多すぎる(1000回超え)')\r\n\t\t\t\tnew Promise( (ok, ng) => {\r\n\t \t\t\t\tif (!data.some(([effect, acts]) => {\r\n\t \t\t\t\t\tif (!effect) return failed('不正なパラメータ指定検出') \r\n\t\t\t\t\t\tvar flag = !!evalEffect(effect, ng)\r\n\t\t\t\t\t\tif (flag) runScript(acts).then(ok, ng)\r\n\t\t\t\t\t\treturn flag\r\n\t\t\t\t\t}) ) done()\r\n\t\t\t\t}).then( _ => actHandlers['繰り返し'](data, done, failed, i) ).catch(failed)\r\n\t\t\t},\r\n\r\n\t\t\t分岐(data, done, failed) {\r\n \t\t\t\tif (!data.some(([effect, acts]) => {\r\n \t\t\t\t\tif (!effect) return failed('不正なパラメータ指定検出') \r\n\t\t\t\t\tvar flag = !!evalEffect(effect, failed)\r\n\t\t\t\t\tif (flag) runScript(acts).then(done, failed)\r\n\t\t\t\t\treturn flag\r\n\t\t\t\t}) ) done()\r\n\t\t\t},\r\n\r\n\t\t\tコメント(data, done, failed) {\r\n\t\t\t\tdone()\r\n\t\t\t},\r\n\r\n\t\t}\r\n\r\n\t\tfunction main_loop() {\r\n\r\n\t\t\tupdateDebugWindow()\r\n\r\n\t\t\t//var loop = Promise.defer()\r\n\r\n\t\t\tvar act, loop = new Promise( (resolve, reject) => {\r\n\r\n\t\t\t\tvar prog = script.shift()\r\n\t\t\t\tif (!prog) return run.resolve() \r\n\t\t\t\tact = prog[0].trim()\r\n\t\t\t\tvar data = prog[1]\r\n\r\n\t\t\t\tif (act in actHandlers) actHandlers[act](data, resolve, reject)\r\n\t\t\t\telse {\r\n\t\t\t\t\tUtil.error('サポートされていないコマンド『' +act+ '』を検出しました。\\n\\nこのコマンドを飛ばして再生が継続されます。')\r\n\t\t\t\t\tresolve()\r\n\t\t\t\t}\r\n\r\n\t\t\t}).then(main_loop, err => {\r\n\t\t\t\tvar message = err ? `コマンド『${act}』で『${err}』が起こりました。` : `コマンド『${act}』が原因かもしれません。`\r\n\t\t\t\tUtil.error('スクリプトを解析中にエラーが発生しました。\\n\\n' +message+ '\\n\\nこのコマンドを保証せず再生が継続されます。')\r\n\t\t\t\treturn main_loop()\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tmain_loop()\r\n\t\treturn run.promise\r\n\r\n\t}\r\n\r\n\r\n\r\n\tfunction replaceEffect(str) {\r\n\t\treturn str.replace(/\\\\{(.+?)}/g, (_, efect) => evalEffect(efect) )\r\n\t}\r\n\r\n\r\n\tfunction evalEffect(effect, failed) {\r\n\t\teffect = effect.trim()\r\n\t\tif (Util.isNoneType(effect)) return true\r\n\t\teffect = Util.toHalfWidth(effect)\r\n\t\t.replace(/\\\\/g,'\\\\\\\\')\r\n\t\t.replace(/\\=\\=/g, '=').replace(/[^!><=]\\=/g, str => str.replace('=', '==') )\r\n\t\t.replace(/\\&\\&/g, '&').replace(/[^!><&]\\&/g, str => str.replace('&', '&&') )\r\n\t\t.replace(/\\|\\|/g, '|').replace(/[^!><|]\\|/g, str => str.replace('|', '||') )\r\n\t\t.replace(/^ー/, '-').replace(/([\\u1-\\u1000\\s])(ー)/g, '$1-').replace(/(ー)([\\u1-\\u1000\\s])/g, '-$2')\r\n\t\tif (!effect) return failed('不正なパラメータ指定検出') \r\n\t\tif (/\\'/.test(effect)) return failed('危険な記号の検出') \r\n\t\teffect = effect.replace(/[^+\\-*/%><!=?:()&|\\s]+/g, str => {\r\n\t\t\tif (/^[0-9.]+$/.test(str)) return str\r\n\t\t\tif (/^\"[^\"]*\"$/.test(str)) return str\r\n\t\t\treturn `paramGet('${str}')`\r\n\t\t})\r\n\t\t//LOG(effect)\r\n\t\treturn eval(effect)\r\n\t}\r\n\r\n\r\n\tfunction updateDebugWindow() {\r\n\r\n\t\tif (!Data.debug) return\r\n\r\n\t\tvar params = {}\r\n\t\tparamForEach( (value, key) => params[key] = value )\r\n\r\n\t\tvar cacheSizeMB = ((cacheBlobMap.get('$size') || 0) / 1024 / 1024).toFixed(1)\r\n\r\n\t\tvar obj = {\r\n\t\t\tキャッシュサイズ: cacheSizeMB + 'MB',\r\n\t\t\tパラメータ: params,\r\n\t\t}\r\n\r\n\t\tView.updateDebugWindow(obj)\r\n\t}\r\n\r\n\r\n\tfunction toBlobEmogiURL(name) {\r\n\t\treturn toBlobURL('絵文字', name, 'svg')\r\n\t}\r\n\r\n\tfunction toBlobScriptURL(name) {\r\n\t\treturn toBlobURL('シナリオ', name, 'txt')\r\n\t}\r\n\r\n\r\n\r\n\tfunction toBlobURL(kind, name, type) {\r\n\t\tvar sub = Util.forceName(kind, name, type)\r\n\t\tvar subkey = `${Player.scenarioName}/${sub}`\r\n\t\tif (Util.isNoneType(name)) return Promise.resolve(null)\r\n\t\tif (cacheBlobMap.has(subkey)) return Promise.resolve(cacheBlobMap.get(subkey))\r\n\t\tvar hide = View.setLoadingMessage('Loading...')\r\n\t\treturn new Promise( (ok, ng) => {\t\t\r\n\t\t\tvar url = `データ/${subkey}`\r\n\t\t\tfind(url).catch( _ => { \r\n\t\t\t\turl = `データ/[[共通素材]]/${sub}`\r\n\t\t\t\treturn find(url)\r\n\t\t\t} ).then( _ => ok(url), ng)\r\n\t\t}).then(loadBlob).then( blob => {\r\n\t\t\tvar blobURL = URL.createObjectURL(blob)\r\n\t\t\tcacheBlobMap.set(subkey, blobURL)\r\n\t\t\tcacheBlobMap.set('$size', (cacheBlobMap.get('$size') || 0) + blob.size)\r\n\t\t\t//Storage.testPut(subkey, blob)\r\n\t\t\thide()\r\n\t\t\treturn blobURL\r\n\t\t}, hide)\r\n\t}\r\n\r\n\r\n\r\n\tfunction fetchSettingData(url) {\r\n\t\treturn loadText(url).then( text => {\r\n\t\t\tvar setting = parseScript(text)\r\n\t\t\tvar data = {}\r\n\t\t\tsetting.forEach( ary => {\r\n\t\t\t\tdata[ary[0]] = ary[1]\r\n\t\t\t})\r\n\t\t\treturn data\r\n\t\t} )\r\n\t}\r\n\r\n\r\n\tfunction fetchScriptData(name) {\r\n\t\treturn toBlobScriptURL(name).then(loadText).then( text => parseScript(text) )\r\n\t}\r\n\r\n\r\n\tfunction loadText(url) {\r\n\t\treturn load(url, 'text')\r\n\t}\r\n\r\n\tfunction loadBlob(url) {\r\n\t\treturn load(url, 'blob')\r\n\t}\r\n\r\n\tfunction load(url, type) {\r\n\t\treturn new Promise(function (ok, ng) {\r\n\t\t\tvar xhr = new XMLHttpRequest()\r\n\t\t\txhr.onload = _ => ok(xhr.response)\r\n\t\t\txhr.onerror = _ => ng(new Error(`ファイルURL『${url}』のロードに失敗`))\r\n\t\t\txhr.open('GET', url)\r\n\t\t\tif (type) xhr.responseType = type\r\n\t\t\txhr.send()\r\n\t\t})\r\n\t}\r\n\r\n\tfunction find(url) {\r\n\t\treturn new Promise(function (ok, ng) {\r\n\t\t\tvar xhr = new XMLHttpRequest()\r\n\t\t\txhr.onload = _ => {\r\n\t\t\t\tif (xhr.status < 300) ok()\r\n\t\t\t\telse ng(new Error(`ファイルURL『${url}』が見つからない`)) \r\n\t\t\t}\r\n\t\t\txhr.onerror = _ => ng(new Error(`ファイルURL『${url}』のロードに失敗`))\r\n\t\t\txhr.open('HEAD', url)\r\n\t\t\txhr.send()\r\n\t\t})\r\n\r\n\t}\r\n\r\n\r\n\tfunction print(message) {\r\n\t\tif (!View.print) View.changeMode('TEST')\r\n\t\tView.print(message)\r\n\t}\r\n\r\n\r\n\tvar cacheBlobMap = new Map\r\n\r\n\tfunction cacheClear() {\r\n\t\tcacheBlobMap.forEach( (subURL, blobURL) => {\r\n\t\t\tURL.revokeObjectURL(blobURL)\r\n\t\t} )\r\n\t\tcacheBlobMap.clear()\r\n\t\tcacheBlobMap.set('$size', 0)\r\n\t\tupdateDebugWindow()\r\n\t}\r\n\r\n\tvar [paramSet, paramGet, paramClear, paramForEach] = (_ => {\r\n\t\tvar paramMap = new Map\r\n\r\n\t\treturn [(key, val) => {\r\n\t\t\tparamMap.set(key, val)\r\n\t\t\tupdateDebugWindow()\r\n\t\t}, key => {\r\n\t\t\tif (!paramMap.has(key)) {\r\n\t\t\t\tparamMap.set(key, 0)\r\n\t\t\t\tupdateDebugWindow()\r\n\t\t\t}\r\n\t\t\treturn paramMap.get(key)\r\n\t\t}, _ => {\r\n\t\t\tparamMap.clear()\r\n\t\t\tupdateDebugWindow()\r\n\t\t}, func => {\r\n\t\t\tparamMap.forEach(func)\r\n\t\t}]\r\n\r\n\t})()\r\n\r\n\r\n\tREADY.Player.ready({\r\n\t\tsetRunPhase, setErrorPhase, fetchSettingData, fetchScriptData, runScript, print, cacheClear, paramClear,\r\n\t\ttoBlobEmogiURL,\r\n\t})\r\n\r\n}).catch(LOG)","($__placeholder__0 = $__placeholder__1[$__placeholder__2]) === void 0 ?\n        $__placeholder__3 : $__placeholder__4","\r\nREADY('Player', 'DOM').then( _ => {\r\n\t'use strict'\r\n\r\n\tvar View = null\r\n\r\n\tvar EP = Element.prototype\r\n\tUtil.setDefaults(EP, {\r\n\t\ton\t\t\t\t\t: EP.addEventListener,\r\n\t\trequestFullscreen\t: EP.webkitRequestFullscreen || EP.mozRequestFullScreen,\r\n\t\tappend\t\t\t\t: EP.appendChild,\r\n\t\tremoveChildren\t\t: function () { this.innerHTML = ''; return this },\r\n\t\tsetStyles\t\t\t: function (styles) {\r\n\t\t\tstyles = styles || {}\r\n\t\t\tObject.keys(styles).forEach( key => { if (styles[key] != null) this.style[key] = styles[key] }, this)\r\n\t\t\treturn this\r\n\t\t},\r\n\t})\r\n\t\r\n\tif (!document.onfullscreenchange) Object.defineProperty(document, 'onfullscreenchange', {\r\n\t\tset: val => {\r\n\t\t\tif ('onwebkitfullscreenchange' in document) document.onwebkitfullscreenchange = val\r\n\t\t\telse document.onmozfullscreenchange = val\r\n\t\t}\r\n\t})\r\n\tif (!document.fullscreenElement) Object.defineProperty(document, 'fullscreenElement', {\r\n\t\tget: _ => document.webkitFullscreenElement || document.mozFullScreenElement,\r\n\t})\r\n\r\n\tvar $isWebkit = !!EP.webkitRequestFullscreen\r\n\r\n\tfunction DOM(tagName, styles) {\r\n\t\tif (tagName == 'text') return document.createTextNode(styles)\r\n\t\tvar el = document.createElement(tagName)\r\n\t\treturn el.setStyles(styles)\r\n\t}\r\n\r\n\r\n\tvar query    = document.querySelector.bind(document),\r\n\t    queryAll = document.querySelectorAll.bind(document)\r\n\r\n\tvar el_root    = query('#ONPwrapper'),\r\n\t\tel_wrapper = new DOM('div'),\r\n\t    el_player  = new DOM('div'),\r\n\t    el_context = new DOM('div')\r\n\r\n\t\tel_root.removeChildren()\r\n\t\tel_root.append(el_wrapper).append(el_player).append(el_context)\r\n\r\n\t//var RAF = requestAnimationFrame\r\n\r\n\r\n\r\n\tfunction adjustScale(height, ratio, full) {\r\n\r\n\t\t//LOG(arguments)\r\n\t\tvar p = Promise.resolve()\r\n\r\n\t\tif (!full) {\r\n\t\t\tel_player.style.height = '100%'\r\n\t\t\tif (height * devicePixelRatio < 480) p = View.showNotice('表示領域が小さ過ぎるため\\n表示が崩れる場合があります')\r\n\t\t}\r\n\r\n\t\tvar ratio = ratio || 16 / 9\r\n\r\n\t\tvar width = height * ratio\r\n\r\n\r\n\t\tel_player.style.fontSize = height / 25 + 'px'\r\n\r\n\t\tel_wrapper.style.height = height + 'px'\r\n\t\tel_wrapper.style.width  = width  + 'px'\r\n\t\tif (full) {\r\n\t\t\tel_player.style.height = height + 'px'\r\n\t\t\tif (el_fullscreen) el_fullscreen.style.height = height + 'px'\r\n\t\t} else fitScreen = Util.NOP \r\n\r\n\t\treturn p\r\n\r\n\t}\r\n\t\r\n\r\n\r\n\tvar el_debug = el_root.append(new DOM('div', {\r\n\t\twidth\t\t: '320px',\r\n\t\ttextAlign\t: 'center',\r\n\t\tfontSize\t: '1em',\r\n\t\tpadding\t\t: '5px',\r\n\t}))\r\n\r\n\r\n\tvar bs = {\r\n\t\theight: '2em',\r\n\t\tmargin: '5px',\r\n\t}\r\n\r\n\tvar el_debugSub = el_debug.append(new DOM('div'))\r\n\t;[360, 480, 720, 1080].forEach( size => {\r\n\t\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\t\tel.append(new DOM('text', size + 'p'))\r\n\t\tel.on('click', _ =>\tadjustScale(size / devicePixelRatio) )\r\n\t})\r\n\t\r\n\tvar el_debugSub = el_debug.append(new DOM('div'))\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'フルウィンドウ(横)'))\r\n\tel.on('click', _ => {\r\n\t\tfitScreen = _ => {\r\n\t\t\tvar ratio = 16 / 9\r\n\t\t\tvar width = document.body.clientWidth\r\n\t\t\tvar height = width / ratio\r\n\t\t\tadjustScale(height, 0, true)\r\n\t\t}\r\n\t\tfitScreen()\r\n\t})\r\n\tvar el_fullscreen\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'フルスクリーン(横)'))\r\n\tel.on('click', _ => {\r\n\t\tel_fullscreen = new DOM('div', {width: '100%', height: '100%', fontSize: '100%'})\r\n\t\tel_player.remove()\r\n\t\tel_wrapper.append(el_fullscreen).append(el_player)\r\n\t\tel_fullscreen.requestFullscreen()\r\n\t\tfitScreen = _ => {\r\n\t\t\tvar ratio = 16 / 9\r\n\t\t\tvar width = screen.width, height = screen.height\r\n\t\t\tif (height * ratio > width) height = width / ratio\r\n\t\t\tadjustScale(height, 0, true)\r\n\t\t}\r\n\t\tfitScreen()\r\n\t\tView.showNotice('この機能はブラウザにより\\n表示の差があります', 1000)\r\n\t})\r\n\r\n\tvar el_debugSub = el_debug.append(new DOM('div'))\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'キャシュ削除'))\r\n\tel.on('click', _ => {\r\n\t\tPlayer.cacheClear()\r\n\t\tView.showNotice('キャッシュを削除しました', 500)\r\n\t})\r\n\r\n\r\n\tvar el = new DOM('div')\r\n\tvar el_debugWindow = el_debug.append(el).append(new DOM('pre', { textAlign: 'left', whiteSpace: 'pre-wrap' }))\r\n\tel_debugWindow.textContent = 'デバッグ情報\\n（無し）'\r\n\r\n\r\n\r\n\tfunction setAnimate(func) {\r\n\t\tvar start = performance.now()\r\n\t\tvar cancelled = false\r\n\t\tvar paused = false\r\n\t\treturn new Promise(ok => {\r\n\t\t\tvar complete = _ => {\r\n\t\t\t\tcancelled = true\r\n\t\t\t\tok()\r\n\t\t\t}\r\n\t\t\tvar pause = _ => {\r\n\t\t\t\tpaused = true\r\n\t\t\t\treturn _ => requestAnimationFrame(loop)\r\n\t\t\t}\r\n\t\t\tvar loop = now => {\r\n\t\t\t\tif (cancelled) return\r\n\t\t\t\tvar delta = now - start\r\n\t\t\t\tif (delta < 0) delta = 0\r\n\t\t\t\tif (!paused) requestAnimationFrame(loop)\r\n\t\t\t\tfunc(delta, complete, pause)\r\n\t\t\t}\r\n\t\t\trequestAnimationFrame(loop)\r\n\t\t})\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\tvar fitScreen = Util.NOP\r\n\twindow.onresize = _ => fitScreen()\r\n\r\n\tdocument.onfullscreenchange = _ => {\r\n\t\tvar full = document.fullscreenElement == el_fullscreen\r\n\t\t//LOG(full)\r\n\t\tif (!full) {\r\n\t\t\tel_fullscreen.remove()\r\n\t\t\tel_fullscreen.removeChildren()\r\n\t\t\tel_wrapper.append(el_player)\r\n\t\t\tadjustScale($scale, $ratio)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tvar METHODS = {}\r\n\r\n\tMETHODS = {\r\n\t\tCOMMON: {\r\n\r\n\t\t\tclean: function () {\r\n\t\t\t\tthis.changeMode($mode)\r\n\t\t\t},\r\n\r\n\t\t\tinit: function (opt) {\r\n\t\t\t\tthis.initDisplay(opt.style || {})\r\n\t\t\t},\r\n\r\n\t\t\tchangeMode: function (type, opt) {\r\n\t\t\t\tvar type = type.toUpperCase()\r\n\t\t\t\topt = opt || {}\r\n\r\n\t\t\t\tif (!(type in METHODS)) throw 'illegal ViewContext mode type'\r\n\r\n\t\t\t\t$mode = type\r\n\t\t\t\tglobal.View = View = { __proto__: METHODS[type] }\r\n\t\t\t\tView.init(opt)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tchangeModeIfNeeded: function (type, opt) {\r\n\t\t\t\tif ($mode != type) this.changeMode(type, opt)\r\n\t\t\t},\r\n\r\n\t\t\ton: function (kind, onFulfilled, onRejected) {\r\n\t\t\t\t return new Promise( resolve => hookInput(kind, resolve) ).then(onFulfilled).catch(onRejected)\r\n\t\t\t},\r\n\r\n\t\t\tinitDisplay: function (opt) {\r\n\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\tbackground\t\t: 'black',\r\n\t\t\t\t\tmargin\t\t\t: 'auto',\r\n\t\t\t\t\tposition\t\t: 'relative',\r\n\t\t\t\t\thidth\t\t\t: '100%',\r\n\t\t\t\t\theight\t\t\t: '100%',\r\n\t\t\t\t\toverflow\t\t: 'hidden',\r\n\t\t\t\t//\t$height\t\t\t: 360,\r\n\t\t\t\t//\t$raito\t\t\t: 16 / 9,\r\n\t\t\t\t})\r\n\r\n\t\t\t\thookClear()\r\n\t\t\t\tthis.windows = {}\r\n\r\n\t\t\t\tvar height = opt.HEIGHT || 480\r\n\t\t\t\topt.height = opt.width = '100%'\r\n\r\n\t\t\t\tel_context = new DOM('div')\r\n\t\t\t\tel_player.removeChildren()\r\n\t\t\t\tel_player.append(el_context)\r\n\t\t\t\tel_wrapper.setStyles({ overflow\t: 'hidden', maxHeight: '100%', maxWidth: '100%' })\r\n\t\t\t\tif (!document.fullscreenElement) el_player.setStyles({ position: 'relative', overflow: 'hidden', height: '100%', width: '100%' })\r\n\t\t\t\tel_context.setStyles(opt)\r\n\t\t\t},\r\n\r\n\t\t\tshowNotice: function (message, show_time = 1000, delay_time = 250) {\r\n\t\t\t\tif (!message) throw 'illegal message string'\r\n\t\t\t\tmessage = '【！】\\n' + message\r\n\t\t\t\tvar noticeWindow = new DOM('div', {\r\n\t\t\t\t\tfontSize\t\t: '2em',\r\n\t\t\t\t\tcolor\t\t\t: 'rgba(0,0,0,0.75)',\r\n\t\t\t\t\ttextShadow\t\t: 'rgba(0,0,0,0.75) 0.01em 0.01em 0.01em',\r\n\t\t\t\t\tbackgroundColor\t: 'rgba(255,255,0,0.75)',\r\n\t\t\t\t\tboxShadow\t\t: 'rgba(100,100,0,0.5) 0px 0px 5px 5px',\r\n\t\t\t\t\tborderRadius\t: '2% / 10%',\r\n\t\t\t\t\ttextAlign\t\t: 'center',\r\n\t\t\t\t\tlineHeight\t\t: '1.5em',\r\n\t\t\t\t\topacity\t\t\t: '0',\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tleft\t\t\t: 'calc((100% - 90%) / 2)',\r\n\t\t\t\t\ttop\t\t\t\t: '20%',\r\n\t\t\t\t\tzIndex\t\t\t: '100',\r\n\t\t\t\t\twidth\t\t\t: '90%',\r\n\t\t\t\t})\r\n\t\t\t\tel_player.append(noticeWindow).append(new DOM('pre', {margin: '5%'})).append(new DOM('text', message))\r\n\t\t\t\treturn new Promise(function (ok, ng) {\r\n\t\t\t\t\tvar opacity = 0\r\n\t\t\t\t\tsetAnimate(function (delta, complete) {\r\n\t\t\t\t\t\topacity = delta / delay_time\r\n\t\t\t\t\t\tif (opacity >= 1) {\r\n\t\t\t\t\t\t\topacity = 1\r\n\t\t\t\t\t\t\tif (typeof navigator.vibrate == 'function') navigator.vibrate([100,100,100])\r\n\t\t\t\t\t\t\tcomplete()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnoticeWindow.style.opacity = opacity\r\n\t\t\t\t\t}).delay(show_time).and(setAnimate, (delta, complete) => {\r\n\t\t\t\t\t\topacity = 1 - delta / delay_time\r\n\t\t\t\t\t\tif (opacity <= 0) {\r\n\t\t\t\t\t\t\topacity = 0\r\n\t\t\t\t\t\t\tcomplete()\r\n\t\t\t\t\t\t\tnoticeWindow.remove()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnoticeWindow.style.opacity = opacity\r\n\t\t\t\t\t}).then(ok, ng)\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tsetLoadingMessage: function (message) {\r\n\t\t\t\tvar loadingWindow = new DOM('div', {\r\n\t\t\t\t\tfontSize\t\t: '2em',\r\n\t\t\t\t\tcolor\t\t\t: 'rgba(255,255,255,0.5)',\r\n\t\t\t\t\ttextShadow\t\t: 'rgba(0,0,0,0.5) 0.01em 0.01em 0.01em',\r\n\t\t\t\t//\ttextAlign\t\t: 'center',\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tright\t\t\t: '0%',\r\n\t\t\t\t\tbottom\t\t\t: '0%',\r\n\t\t\t\t\tzIndex\t\t\t: '900',\r\n\t\t\t\t//\twidth\t\t\t: 'auto',\r\n\t\t\t\t})\r\n\r\n\t\t\t\tvar defer = Promise.defer()\r\n\t\t\t\tPromise.resolve().delay(100).then(defer.resolve)\r\n\t\t\t\tdefer.promise.then( _ => el_player.append(loadingWindow).append(new DOM('pre', {margin: '0%'})).append(new DOM('text', message)) )\r\n\t\t\t\tfunction hide() { defer.reject(); loadingWindow.remove() }\r\n\t\t\t\treturn hide\r\n\r\n\t\t\t},\r\n\r\n\t\t\tadjustScale: adjustScale,\r\n\r\n\t\t\tupdateDebugWindow: function (obj) {\r\n\t\t\t\tel_debugWindow.textContent = 'デバッグ情報\\n' + JSON.stringify(obj, null, 4)\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n\r\n\tMETHODS = {\r\n\t\tTEST: { __proto__: METHODS.COMMON,\r\n\t\t\tinitDisplay: function (opt) {\r\n\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\tfontSize\t\t: 'calc(100% * 2 / 3)',\r\n\t\t\t\t\tcolor\t\t\t: 'white',\r\n\t\t\t\t})\r\n\t\t\t\tthis.__proto__.__proto__.initDisplay(opt)\r\n\t\t\t\tvar el = new DOM('div', {\r\n\t\t\t\t\tpadding: '10px',\r\n\t\t\t\t})\r\n\t\t\t\tvar el_body = new DOM('pre')\r\n\t\t\t\tthis.el_test = el_body\r\n\t\t\t\tel_context.append(el).append(el_body)\r\n\t\t\t},\r\n\t\t\tprint: function (text, opt) {\r\n\t\t\t\tthis.el_test.textContent += text\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\tNOVEL: { __proto__: METHODS.COMMON,\r\n\t\t\tinitDisplay: function (opt) {\r\n\t\t\t\t//LOG('initDisplay')\r\n\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\tcolor\t\t\t: 'rgba(255,255,255,0.9)',\r\n\t\t\t\t//\tfontSize\t\t: 'calc(480px / 20)',\r\n\t\t\t\t\ttextShadow\t\t: 'rgba(0,0,0,0.9) 0.1em 0.1em 0.1em',\r\n\t\t\t\t\toverflow\t\t: 'hidden',\r\n\t\t\t\t})\r\n\t\t\t\tthis.__proto__.__proto__.initDisplay(opt)\r\n\r\n\t\t\t\tthis.mainMessageWindow = this.addMessageWindow({z:10})\r\n\t\t\t\tthis.imageFrame = this.addImageFrame({z:20})\r\n\r\n\t\t\t\tView.on('Rclick').then(_ => this.showMenu())\r\n\t\t\t},\r\n\r\n\t\t\tmessageWindowProto: {\r\n\t\t\t\tnextPage: function (name, opt) {\r\n\t\t\t\t\tname = !name || name.match(/^\\s+$/) ? '' : '【' +name+ '】' \r\n\t\t\t\t\tthis.el_title.textContent = name\r\n\t\t\t\t\tthis.el_body.removeChildren()\r\n\r\n\t\t\t\t},\r\n\t\t\t\taddSentence: function (text, opt) {\r\n\t\t\t\t\ttext += '\\n'\r\n\t\t\t\t\topt = Util.setDefaults(opt, {\r\n\t\t\t\t\t\tweight: 25\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar length = text.length\r\n\t\t\t\t\tvar at = 0, nl = 0\r\n\t\t\t\t\tvar el = this.el_body\r\n\t\t\t\t\tvar weight = opt.weight\r\n\t\t\t\t\tvar [aborted, cancelled] = [false, false]\r\n\t\t\t\t\tvar [abort, cancel] = [_ => aborted = true, _ => cancelled = true]\r\n\t\t\t\t\tView.on('go').then(cancel)\r\n\r\n\t\t\t\t\tvar p = setAnimate( (delay, complete, pause) => {\r\n\t\t\t\t\t\tif (aborted) return complete()\r\n\t\t\t\t\t\tif (cancelled) {\r\n\t\t\t\t\t\t\t//el.append(new DOM('text', text.slice(at).replace(/\\u200B/g, '') ))\r\n\t\t\t\t\t\t\t//return complete()\r\n\t\t\t\t\t\t\tnl = length\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twhile (delay / weight >= at - nl) {\r\n\t\t\t\t\t\t\tvar str = text[at]\r\n\t\t\t\t\t\t\tif (str == '\\\\' && /\\[.+\\]/.test(text.slice(at))) {\r\n\t\t\t\t\t\t\t\tvar nat = text.indexOf(']', at)\r\n\t\t\t\t\t\t\t\t//var resume = pause()\r\n\t\t\t\t\t\t\t\tvar img = $isWebkit\r\n\t\t\t\t\t\t\t\t\t? el.append(new DOM('img', { height: '0.75em', width: '0.75em' }))\r\n\t\t\t\t\t\t\t\t\t: el.append(new DOM('iframe', { height: '0.75em', width: '0.75em', border: 'none' }))\r\n\t\t\t\t\t\t\t\t;(img =>\tPlayer.toBlobEmogiURL(text.slice(at+2, nat).trim()).then( url => {img.src = url} ).catch(LOG))(img)\r\n\t\t\t\t\t\t\t\tnl += nat - at\r\n\t\t\t\t\t\t\t\tat = nat\r\n\t\t\t\t\t\t\t} else if (str != '\\u200B') el.append(new DOM('text', str))\r\n\t\t\t\t\t\t\tif (++at >= length) return complete()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tp.abort = abort\r\n\t\t\t\t\tp.cancel = cancel\r\n\t\t\t\t\treturn p\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\taddMessageWindow: function (opt) {\r\n\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\tbackground\t\t: 'rgba(0,0,100,0.5)',\r\n\t\t\t\t\tboxShadow\t\t: 'rgba(0,0,100,0.5) 0 0 0.5em 0.5em',\r\n\t\t\t\t\tborderRadius\t: '1% / 1%',\r\n\t\t\t\t\twidth\t\t\t: 'calc(100% - 0.5em - (2% + 2%))',\r\n\t\t\t\t\theight\t\t\t: 'calc( 25% - 0.5em - (4% + 2%))',\r\n\t\t\t\t\tfontSize\t\t: '100%',\r\n\t\t\t\t\tlineHeight\t\t: '1.5em',\r\n\t\t\t\t\tfontWeight\t\t: 'bold',\r\n\t\t\t\t\tpadding\t\t\t: '4% 2% 2% 2%',\r\n\t\t\t\t\twhiteSpace\t\t: 'nowrap',\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tbottom\t\t\t: '0.25em',\r\n\t\t\t\t\tleft\t\t\t: '0.25em',\r\n\t\t\t\t\tzIndex\t\t\t: opt.z || 1400,\r\n\r\n\t\t\t\t})\r\n\t\t\t\tvar el = new DOM('div', opt)\r\n\t\t\t\tthis.windows.message = el\r\n\t\t\t\tel_context.append(el)\r\n\r\n\t\t\t\tvar el_title = el.append(new DOM('div', {\r\n\t\t\t\t\tdisplay\t\t\t: 'inline-block',\r\n\t\t\t\t\tmarginRight\t\t: '5%',\r\n\t\t\t\t//\tcolor\t\t\t: 'blue',\r\n\t\t\t\t\ttextAlign\t\t: 'right',\r\n\t\t\t\t\tverticalAlign\t: 'top',\r\n\t\t\t\t\twidth\t\t\t: '15%',\r\n\t\t\t\t\theight\t\t\t: '100%',\r\n\t\t\t\t//\tbackground\t\t: 'rgba(255,100,200,0.5)',\r\n\t\t\t\t//\tpadding\t\t\t: '5px',\r\n\t\t\t\t}))\r\n\t\t\t\tvar el_body = el.append(new DOM('div', {\r\n\t\t\t\t\tdisplay\t\t\t: 'inline-block',\r\n\t\t\t\t\twidth\t\t\t: 'auto',\r\n\t\t\t\t\theight\t\t\t: '100%',\r\n\t\t\t\t//\tpadding\t\t\t: '15px',\r\n\t\t\t\t})).append(new DOM('pre', {\r\n\t\t\t\t\tmargin\t\t\t: '0',\r\n\t\t\t\t}))\r\n\r\n\t\t\t\tvar mw = { __proto__: this.messageWindowProto,\r\n\t\t\t\t\tel\t\t\t\t: el,\r\n\t\t\t\t\tel_title\t\t: el_title,\r\n\t\t\t\t\tel_body\t\t\t: el_body,\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn mw\r\n\t\t\t},\r\n\r\n\t\t\taddImageFrame: function (opt) {\r\n\r\n\t\t\t\tvar fr = new DOM('div', {\r\n\t\t\t\t\theight\t\t\t: '100%',\r\n\t\t\t\t\twidth\t\t\t: '100%',\r\n\t\t\t\t\tzIndex\t\t\t: opt.z || 1500,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tel_context.append(fr)\r\n\t\t\t\treturn fr\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetChoiceWindow: function (opts) {\r\n\r\n\t\t\t\tvar defer = Promise.defer()\r\n\r\n\t\t\t\tvar cw = new DOM('div', {\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tleft\t\t\t: 'calc((100% - 70%) / 2 - 5%)',\r\n\t\t\t\t\twidth\t\t\t: '70%',\r\n\t\t\t\t//\theight\t\t\t: '70%',\r\n\t\t\t\t\ttop\t\t\t\t: '5%', \r\n\t\t\t\t\tboxShadow\t\t: 'rgba(100, 100, 255, 0.5) 0 0 2em',\r\n\t\t\t\t\tborderRadius\t: '3% / 5%',\r\n\t\t\t\t\tbackground\t\t: 'rgba(100, 100, 255, 0.3)',\r\n\t\t\t\t\tpadding\t\t\t: '0% 5%',\r\n\t\t\t\t//\tverticalAlign\t: 'middle',\r\n\t\t\t\t})\r\n\t\t\t\tthis.windows.choice = cw\r\n\r\n\t\t\t\topts.forEach(function (opt) {\r\n\t\t\t\t\tif (!('value' in opt)) opt.value = opt.name\r\n\t\t\t\t\tvar bt = new DOM('button', {\r\n\t\t\t\t\t\tdisplay\t\t\t: 'block',\r\n\t\t\t\t\t\tfontSize\t\t: '1.5em',\r\n\t\t\t\t\t\tboxShadow\t\t: 'inset 0 1px 3px #F1F1F1, inset 0 -15px rgba(0,0,223,0.2), 1px 1px 2px #E7E7E7',\r\n\t\t\t\t\t\tbackground\t\t: 'rgba(0,0,100,0.8)',\r\n\t\t\t\t\t\tcolor\t\t\t: 'white',\r\n\t\t\t\t\t\tborderRadius\t: '5% / 50%',\r\n\t\t\t\t\t\twidth\t\t\t: '100%',\r\n\t\t\t\t\t\theight\t\t\t: '2.5em',\r\n\t\t\t\t\t\tmargin\t\t\t: '5% 0%',\r\n\t\t\t\t\t})\r\n\t\t\t\t\tbt.append(new DOM('text', opt.name))\r\n\t\t\t\t\tbt.onclick = _ => {\r\n\t\t\t\t\t\tdefer.resolve(opt.value)\r\n\t\t\t\t\t\tdelete this.windows.choice\r\n\t\t\t\t\t\tcw.remove()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcw.append(bt)\r\n\t\t\t\t}, this)\r\n\r\n\t\t\t\tel_context.append(cw)\r\n\r\n\t\t\t\treturn defer.promise\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetBGImage: function (opt) {\r\n\t\t\t\tvar url = opt.url ? `url(${opt.url})` : 'none'\r\n\t\t\t\tel_context.style.backgroundImage = url\r\n\t\t\t\tel_context.style.backgroundSize = 'cover'\r\n\t\t\t},\r\n\r\n\t\t\tsetFDImages: function (opts) {\r\n\t\t\t\tvar el = this.imageFrame\r\n\t\t\t\tel.removeChildren()\r\n\t\t\t\topts.forEach( opt => {\r\n\t\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\t\tleft\t: null,\r\n\t\t\t\t\t\tright\t: null,\r\n\t\t\t\t\t\ttop\t\t: null,\r\n\t\t\t\t\t\tbottom\t: null,\r\n\t\t\t\t\t})\r\n\t\t\t\t\tvar mar = parseInt(opt.top) || parseInt(opt.bottom) || 0\r\n\t\t\t\t\tvar height = opt.height ? opt.height : `${100-mar}%`\r\n\t\t\t\t\tvar img = new DOM('img', {\r\n\t\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\t\tleft\t\t\t: opt.left,\r\n\t\t\t\t\t\tright\t\t\t: opt.right,\r\n\t\t\t\t\t\ttop\t\t\t\t: opt.top,\r\n\t\t\t\t\t\tbottom\t\t\t: opt.bottom,\r\n\t\t\t\t\t//\tmaxWidth\t\t: '50%',\r\n\t\t\t\t\t\theight\t\t\t: height,\r\n\t\t\t\t\t})\r\n\t\t\t\t\timg.src = opt.url\r\n\t\t\t\t\tel.append(img)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tnextPage: function (name, opt) {\r\n\t\t\t\tthis.mainMessageWindow.nextPage(name, opt)\r\n\t\t\t},\r\n\r\n\t\t\taddSentence: function (text, opt) {\r\n\t\t\t\treturn this.mainMessageWindow.addSentence(text, opt)\r\n\t\t\t},\r\n\r\n\t\t\tshowMenu: function (opt) {\r\n\t\t\t\tblockEvent('go')\r\n\t\t\t\tView.on('Rclick').then(_ => this.hideMenu())\r\n\t\t\t\tObject.keys(this.windows).forEach( key => {\r\n\t\t\t\t\tvar el = this.windows[key].hidden = true\r\n\t\t\t\t} )\r\n\t\t\t},\r\n\r\n\t\t\thideMenu: function (opt) {\r\n\t\t\t\tallowEvent('go')\r\n\t\t\t\tView.on('Rclick').then(_ => this.showMenu())\r\n\t\t\t\tObject.keys(this.windows).forEach( key => {\r\n\t\t\t\t\tvar el = this.windows[key].hidden = false\r\n\t\t\t\t} )\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t}\r\n\r\n\r\n\r\n\tvar [hookInput, hookClear, blockEvent, allowEvent] = (_ => {\r\n\r\n\t\tvar keyboardTable = {\r\n\t\t\t13: 'enter',\r\n\t\t\t32: 'space',\r\n\t\t}\r\n\r\n\t\tvar hooks = []\r\n\t\tvar blocks = new Set\r\n\r\n\t\tdocument.addEventListener('keydown', evt => {\r\n\t\t\tvar type = keyboardTable[evt.keyCode]\r\n\t\t\tif (type) onEvent(type, evt)\r\n\t\t}, true)\r\n\r\n\t\tel_wrapper.addEventListener('mousedown', evt => {\r\n\t\t\tvar type = 'LMR'[evt.button]\r\n\t\t\tif (type) onEvent(type + 'click', evt)\r\n\t\t}, true)\r\n\r\n\t\tel_wrapper.addEventListener('contextmenu', evt => {\r\n\t\t\tonEvent('contextmenu', evt)\r\n\t\t}, true)\r\n\r\n\t\tfunction onEvent(type, evt) {\r\n\t\t\tevt.preventDefault()\r\n\t\t\tevt.stopImmediatePropagation()\r\n\t\t\tif (blocks.has(type)) return\r\n\t\t\thooks = hooks.reduce( (ary, hook, i) => {\r\n\t\t\t\tif (hook.indexOf(type) === -1) ary.push(hook)\r\n\t\t\t\telse hook.resolve()\r\n\t\t\t\treturn ary\r\n\t\t\t}, [])\r\n\t\t}\r\n\r\n\t\tfunction toHook(kind) {\r\n\t\t\tswitch (kind) {\r\n\t\t\t\tcase 'go':\r\n\t\t\t\t\treturn ['Lclick', 'enter', 'space']\r\n\t\t\t\tbreak;\r\n\t\t\t\tcase 'Rclick':\r\n\t\t\t\t\treturn [kind]\r\n\t\t\t\tbreak\r\n\t\t\t\tdefault: throw 'illegal hook event type'\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn [function hookInput(kind, resolve) {\r\n\t\t\tvar hook = toHook(kind)\r\n\t\t\thook.resolve = resolve\r\n\t\t\thooks.push(hook)\r\n\t\t}, function hookClear() {\r\n\t\t\thooks.length = 0\r\n\t\t}, function blockEvent(kind) {\r\n\t\t\ttoHook(kind).forEach( type => blocks.add(type) )\r\n\t\t}, function allowEvent(kind) {\r\n\t\t\ttoHook(kind).forEach( type => blocks.delete(type) )\r\n\t\t},\r\n\t\t]\r\n\t})()\r\n\r\n\r\n\tvar $full = false\r\n\tvar $ratio = 16 / 9\r\n\tvar $mode = ''\r\n\tvar width = document.body.clientWidth\r\n\tvar $scale = width / $ratio >= 480 ? 480 : width / $ratio\r\n\t//document.body.style.width = '100%'\r\n\r\n\tMETHODS.TEST.changeMode('TEST')\r\n\tvar p = adjustScale($scale, $ratio)\r\n\r\n\tp.then( _ => READY.View.ready(null) )\r\n\r\n}).catch(LOG)","\r\nREADY('Player', 'View').then( _ => {\r\n\t'use strict'\r\n\r\n\tvar message = (_ => {\r\n\t\tvar abort = Util.NOP\r\n\t\treturn text => {\r\n\t\t\tabort()\r\n\t\t\tView.changeModeIfNeeded('NOVEL')\r\n\t\t\tView.nextPage('システム')\r\n\t\t\tvar p = View.addSentence(text, { weight: 10 })\r\n\t\t\tabort = p.abort\r\n\t\t\treturn p\r\n\t\t}\r\n\t})()\r\n\r\n\r\n\r\n\tvar setup = Util.co(function* () {\r\n\r\n\t\tPlayer.setRunPhase('準備')\r\n\r\n\t\tvar setting = yield message('作品一覧を読み込んでいます...').then( _ => Player.fetchSettingData(Data.URL.ContentsSetting) )\r\n\r\n\t\tvar scenario = yield message('再生する作品を選んでください').then( _ => {\r\n\r\n\t\t\tvar opts = setting['作品'].reduce( (opts, name) => {\r\n\t\t\t\topts.push({ name })\r\n\t\t\t\treturn opts\r\n\t\t\t}, [])\r\n\r\n\t\t\treturn View.setChoiceWindow(opts)\r\n\t\t})\r\n\r\n\t\tPlayer.scenarioName = scenario\r\n\r\n\t\tvar setting = yield message('作品情報を読み込んでいます...').then( _ => Player.fetchSettingData(`データ/${scenario}/設定.txt`) )\r\n\r\n\t\tvar script = yield message('開始シナリオを読み込んでいます...').then( _ => Player.fetchScriptData(setting['開始シナリオ'][0]) )\r\n\r\n\t\tPlayer.paramClear()\r\n\r\n\t\tyield message('再生準備が完了しました。\\nクリック、タップ、エンターキー、スペースキーで進みます。').on('go').then( _ => {\r\n\r\n\t\t\tPlayer.setRunPhase('再生')\r\n\r\n\t\t\treturn Player.runScript(script)\r\n\t\t})\r\n\r\n\t\tView.clean()\r\n\t\t//Player.cacheClear()\r\n\r\n\t\tPlayer.setRunPhase('準備')\r\n\r\n\t\tyield message('再生が終了しました。\\n作品選択メニューに戻ります。').delay(1000)\r\n\t\treturn setup().catch(restart)\r\n\t})\r\n\r\n\r\n\r\n\r\n\tvar restart = Util.co(function* (err) {\r\n\r\n\t\tLOG(err)\r\n\t\tView.clean()\r\n\t\tPlayer.setRunPhase('エラー解決')\r\n\r\n\t\tyield message('致命的なエラーが発生したため再生を継続できません。\\n作品選択メニューに戻ります。').delay(3000)\r\n\t\treturn setup().catch(restart)\r\n\r\n\t})\r\n\r\n\r\n\r\n\r\n\tvar start = Util.co(function* () {\r\n\r\n\t\tPlayer.setRunPhase('起動')\r\n\r\n\t\tvar setting = yield Player.fetchSettingData(Data.URL.EngineSetting)\r\n\r\n\t\tData.SystemVersion = setting['システムバージョン'][0]\r\n\r\n\t\tyield message( 'openノベルプレイヤー by Hikaru02\\n\\nシステムバージョン：　' + Data.SystemVersion).delay(1000)\r\n\r\n\t\treturn setup().catch(restart)\r\n\t})\r\n\r\n\r\n\r\n\tstart()\r\n\r\n}).catch(LOG)\r\n\r\n\r\n\r\n\r\n/* TODO\r\n\t・画像面のCanvas化\r\n\t・事前キャッシュ、効率化\r\n\t・選択肢ウィンドウ調整\r\n\t・音声\r\n\r\n*/","$ctx.maybeThrow()","$ctx.returnValue = $__placeholder__0"]}