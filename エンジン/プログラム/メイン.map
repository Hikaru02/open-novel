{"version":3,"file":"メイン.js","sources":["@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/1","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/ヘルパー.js","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/6","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/ストレージ.js","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/プレーヤー.js","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/8","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/15","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/10","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/13","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/ビュー.js","@traceur/generated/TemplateParser/17","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/サウンド.js","@traceur/generated/TemplateParser/18","@traceur/generated/TemplateParser/19","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/ゲーム.js","@traceur/generated/TemplateParser/20"],"names":[],"mappings":"AAAA,MAAM,SAAS,YAAoB,GAAE,CCArC,UAAS;;ACAL,CAAJ,IAAI,CAAA,YAAY,aAAoB,CAAC;CCArC,EAAC;AAAA,CAAA,GAAE,SAAA,CAAC;AACH,CAAA,eAAY,CAAA;AAER,CAAJ,MAAI,CAAA,MAAM,EAAG,CAAA,CAAC,CAAC,CAAC,KAAD,AAAK,CAAC,CAAC,MAAM,CAAC,CAAA;AACzB,CAAJ,MAAI,CAAA,OAAO,EAAG,CAAA,MAAM,QAAQ,CAAA;AACxB,CAAJ,MAAI,CAAA,GAAG,EAAG,CAAA,OAAO,IAAI,KAAK,CAAC,OAAO,CAAC,CAAA;AAE/B,CAAJ,MAAI,CAAA,IAAI,EAAG;AACV,CAAA,UAAK,CAAE,KAAI;AACX,CAAA,QAAG,CAAE;AACJ,CAAA,sBAAe,CAAE,aAAY;AAC7B,CAAA,oBAAa,CAAE,kBAAiB;CAAA,MAChC;CAAA,IACD,CAAA;AAEG,CAAJ,MAAI,CAAA,IAAI,EAAG;CAUV,gBAAW,CAAX,UAAY,AAAe;WAAf,IAAG,6CAAG,GAAE;WAAE,MAAK;CAC1B,WAAI,SAAS,OAAO,IAAK,EAAC;CAAE,cAAM,2BAA0B,CAAA;AAC5D,CAD4D,aACtD,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAC,SAAA,GAAG,CAAI;CAAE,aAAI,CAAC,CAAC,GAAG,GAAI,IAAG,CAAC;AAAE,CAAA,cAAG,CAAC,GAAG,CAAC,EAAG,CAAA,KAAK,CAAC,GAAG,CAAC,CAAA;CAAA,QAAE,EAAC,CAAA;CAC/E,aAAO,IAAG,CAAA;OACV;CAED,kBAAa,CAAb,UAAc,AAAe;WAAf,IAAG,6CAAG,GAAE;WAAE,MAAK;AAC5B,CAAA,aAAM,KAAK,CAAC,KAAK,CAAC,QAAQ,EAAC,SAAA,GAAG;gBAAI,CAAA,GAAG,CAAC,GAAG,CAAC,EAAG,CAAA,KAAK,CAAC,GAAG,CAAC;SAAA,EAAE,CAAA;CACzD,aAAO,IAAG,CAAA;OACV;CAED,eAAU,CAAV,UAAW,GAAG,CAAE;CACf,aAAO,CAAA,CAAC,MAAO,IAAG,CAAA,GAAK,SAAQ,CAAC,GAAI,EAAC,GAAG,GAAI,GAAE,CAAA,EAAI,CAAA,WAAW,KAAK,CAAC,GAAG,CAAC,CAAC,CAAA;OACxE;CA6BD,cAAS,CAAT,UAAU,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,IAAI,CAAE;CAC3B,WAAI,CAAC,IAAI,CAAA,EAAI,EAAC,IAAI;CAAE,cAAM,cAAa,CAAA;AACvC,CADuC,WACnC,CAAC,IAAI,MAAM,CAAC,WAAW,CAAC;AAAE,CAAA,aAAI,IAAM,IAAI,EAAA,IAAI,EAAA,KAAI,CAAE,CAAA;AACtD,CADsD,eAC5C,IAAI,EAAA,IAAI,EAAA,KAAI,EAAE;OACxB;CAED,gBAAW,CAAX,UAAY,GAAG;AAEV,CAAJ,UAAI,CAAA,KAAK,EAAG;AACX,CAAA,YAAG,CAAE,IAAG;AAER,CAAA,YAAG,CAAE,IAAG;AACR,CAAA,YAAG,CAAE,IAAG;AACR,CAAA,YAAG,CAAE,KAAI;AACT,CAAA,YAAG,CAAE,KAAI;AACT,CAAA,YAAG,CAAE,KAAI;AACT,CAAA,YAAG,CAAE,IAAG;AACR,CAAA,YAAG,CAAE,IAAG;AACR,CAAA,YAAG,CAAE,IAAG;AACR,CAAA,YAAG,CAAE,IAAG;AACR,CAAA,YAAG,CAAE,IAAG;AACR,CAAA,YAAG,CAAE,IAAG;AACR,CAAA,YAAG,CAAE,IAAG;AACR,CAAA,YAAG,CAAE,IAAG;AACR,CAAA,YAAG,CAAE,IAAG;AACR,CAAA,YAAG,CAAE,IAAG;CAAA,QACR,CAAA;CAED,aAAO,CAAA,GAAG,QAAQ,CAAC,IAAI,GAAE,SAAA,IAAI;gBAAI,EAAC,IAAI,GAAI,MAAK,CAAA,CAAG,CAAA,KAAK,CAAC,IAAI,CAAC,EAAG,KAAI,CAAC;SAAA,EAAE,QAC/D,CAAC,kBAAkB,GAAE,SAAA,IAAI;gBAAI,CAAA,MAAM,aAAa,CAAC,IAAI,WAAW,CAAC,CAAC,CAAC,CAAA,CAAC,MAAK,CAAC;SAAA,EAAE,CAAA;OACpF;CAED,QAAG,CAAH,UAAI,CAAE,GAAE;CAER,UAAK,CAAL,UAAM,OAAO,CAAE;AAAE,CAAA,YAAK,CAAC,OAAO,CAAC,CAAA;OAAE;AAEjC,CAAA,YAAO,CAAE,UAAS;CAElB,OAAE,CAAF,UAAG,IAAI;CACN,aAAO,UAAU;AACZ,CAAJ,YAAI,CAAA,KAAK,EAAG,CAAA,OAAO,MAAM,EAAE,CAAA;AACvB,CAAJ,YAAI,CAAA,IAAI,EAAG,CAAA,IAAI,MAAM,CAAC,IAAI,CAAE,UAAS,CAAC,CAAA;AAClC,CAAJ,YAAI,CAAA,IAAI,IAAG,SAAA,GAAG;CACb,qBC9GL,CAAA,eAAe,aAAa,CD8GH,IAAI,KAAK,CAAC,GAAG,CAAC,CC9GQ;;iCD8GR;AAElC,CAAA,gBAAK,EAAG,CAAA,OAAO,QAAQ,CAAC,KAAK,CAAC,CAAA;CAC9B,eAAI,IAAI;AAAE,CAAA,kBAAK,KAAK,CAAC,KAAK,QAAQ,CAAE,CAAA,KAAK,OAAO,CAAC,CAAA;;AAC5C,CAAA,kBAAK,KAAK,CAAC,IAAI,CAAE,CAAA,KAAK,OAAO,CAAC,CAAA;CAAA,UACnC,CAAA,CAAA;AACD,CAAA,aAAI,EAAE,CAAA;CACN,eAAO,CAAA,KAAK,QAAQ,CAAA;SACpB,CAAA;OACD;KAED,CAAA;AAID,CAAA,OAAI,YAAY,CAAC,MAAM,UAAU,CAAE,EAClC,MAAM,CAAE,SAAS,OAAM,CAAC,GAAG,CAAE;CAC5B,aAAO,CAAA,GAAI,MAAK,CAAC,GAAG,EAAG,EAAC,CAAC,KAAK,CAAC,IAAI,CAAC,CAAA;OACpC,CACD,CAAC,CAAA;AAGF,CAAA,OAAI,YAAY,CAAC,OAAO,CAAE;CAEzB,UAAK,CAAL,UAAM;AACD,CAAJ,UAAI,CAAA,OAAO;AAAE,CAAA,iBAAM,CAAA;AACf,CAAJ,UAAI,CAAA,OAAO,EAAG,IAAI,QAAO,EAAC,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC,CAAI;AACnC,CAAA,gBAAO,EAAG,GAAE,CAAE,CAAA,MAAM,EAAG,GAAE,CAAA;SAC3B,EAAC,CAAA;CACF,aAAO;AAAC,CAAA,gBAAO,CAAP,QAAO;AAAE,CAAA,gBAAO,CAAP,QAAO;AAAE,CAAA,eAAM,CAAN,OAAM;CAAA,QAAC,CAAA;OACjC;CAED,UAAK,CAAL,UAAM,IAAI,CAAE;CACX,aAAO,CAAA,OAAO,QAAQ,EAAE,MAAM,CAAC,IAAI,CAAC,CAAA;OACpC;CAAA,IAED,CAAC,CAAA;AAIF,CAAA,OAAI,cAAc,CAAC,OAAO,UAAU,CAAE;AAerC,CAAA,OAAE,CAAE,SAAS,GAAE,CAAC,IAAI,AAA4C;WAA1C,YAAW,+CAAG,SAAA,MAAM;gBAAI,OAAM;SAAA;WAAE,WAAU;CAC/D,aAAO,CAAA,IAAI,KAAK,EAAE,SAAA,MAAM;gBAAI,CAAA,IAAI,GAAG,CAAC,IAAI,CAAC,KAAK,EAAE,SAAA,CAAC;kBAAI,CAAA,WAAW,CAAC,MAAM,CAAC;WAAA,EAAE,MAAM,CAAC,UAAU,CAAC;SAAA,EAAE,CAAA;OAC9F;AAED,CAAA,QAAG,CAAE,SAAS,IAAG,CAAC,IAAI,CAAE,CAAA,GAAG;CAC1B,aAAO,CAAA,IAAI,KAAK,EAAE,SAAA,CAAC;gBAAI,CAAA,IAAI,CAAC,GAAG,CAAC;SAAA,EAAE,CAAA;OAClC;AAED,CAAA,UAAK,CAAE,SAAS,MAAK,CAAC,IAAI;CACzB,WAAI,CAAC,CAAC,IAAI;CAAE,cAAM,sBAAqB,CAAA;AACvC,CADuC,aAChC,CAAA,IAAI,KAAK,EAAE,SAAA,CAAC;gBAAI,IAAI,QAAO,EAAE,SAAA,OAAO;kBAAI,CAAA,UAAU,CAAC,OAAO,CAAE,KAAI,CAAC;WAAA,EAAE;SAAA,EAAE,CAAA;OAC5E;AAED,CAAA,YAAO,CAAE,SAAS,QAAO,CAAC,WAAW,CAAE,CAAA,UAAU;CAChD,aAAO,CAAA,IAAI,KAAK,EAAE,SAAA,GAAG,CAAI;CACxB,aAAI,WAAW;AAAE,CAAA,sBAAW,CAAC,GAAG,CAAC,CAAA;AACjC,CADiC,eAC1B,CAAA,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAA;SAC3B,IAAE,SAAA,GAAG,CAAI;CACT,aAAI,UAAU;AAAE,CAAA,qBAAU,CAAC,GAAG,CAAC,CAAA;AAC/B,CAD+B,eACxB,CAAA,OAAO,OAAO,CAAC,GAAG,CAAC,CAAA;SAC1B,EAAE,CAAA;OACH;AACD,CAAA,UAAK,CAAE,SAAS,MAAK,CAAC;CACrB,aAAO,CAAA,IAAI,MAAM,EAAE,SAAA,GAAG,CAAI;AACzB,CAAA,YAAG,CAAC,GAAG,CAAC,CAAA;CACR,eAAO,CAAA,OAAO,OAAO,CAAC,GAAG,CAAC,CAAA;SAC1B,EAAE,CAAA;OACH;AACD,CAAA,YAAO,CAAE,UAAU,GAAG;CACrB,aAAO,CAAA,IAAI,KAAK,EAAE,SAAA,CAAC;gBAAI,CAAA,OAAO,OAAO,CAAC,GAAG,CAAC;SAAA,EAAE,CAAA;OAC5C;CAAA,IACD,CAAC,CAAA;AAEF,CAAA,SAAM,eAAe,CAAC,OAAO,UAAU,CAAE,IAAG,CAAE;AAC7C,CAAA,eAAU,CAAE,KAAI;AAAE,CAAA,iBAAY,CAAE,KAAI;AACpC,CAAA,QAAG,CAAE,UAAU;AACV,CAAJ,UAAI,CAAA,EAAE,EAAG,KAAI,CAAA;AACT,CAAJ,UAAI,CAAA,EAAE,EAAG,UAAU,AAAO;CEzMjB,cAAS,GAAA,OAAoB,GAAE;CAAE,mBAAoB,EAAC,CACjD,OAAoB,CAAA,SAAS,OAAO,CAAE,OAAmB;AAC5D,CAAA,qBAAoC,EAAG,CAAA,SAAS,MAAmB,CAAC;AFwMzE,CExMyE,YFwMzE,CAAA,GAAG,EAAG,CAAA,IAAI,OAAO,CAAA;CACrB,aAAI,GAAG,IAAK,EAAC;CAAE,iBAAO,GAAE,CAAA;AACxB,CADwB,mBC5M7B,CAAA,eAAe,aAAa,CD6ME,IAAI,CC7Ma;CD6MrC,iBAAI;CAAE,iBAAI;CAAE,iBAAI,WAAQ;CAE7B,aAAI,MAAO,KAAI,CAAA,EAAI,WAAU,CAAE;CAC9B,mBAAQ,IAAI,OAAO;CACnB,iBAAK,EAAC,CAAC;CACP,iBAAK,EAAC;CAAE,qBAAO,CAAA,EAAE,KAAK,CAAC,IAAI,CAAC,EAAE,CAAA;CAAA,YAC9B;WACD,KAAM;CACL,mBAAQ,IAAI,OAAO;CACnB,iBAAK,EAAC;CAAE,qBAAO,CAAA,EAAE,GAAG,CAAC,IAAI,CAAC,EAAE,CAAA;AAC5B,CAD4B,iBACvB,EAAC,CAAC;CACP,iBAAK,EAAC;CAAE,qBAAO,CAAA,EAAE,KAAK,CAAC,IAAI,CAAE,KAAI,CAAE,KAAI,CAAC,EAAE,CAAA;CAAA,YAC1C;WAED;AACD,CADC,cACK,2BAA0B,CAAA;SAChC,CAAA;AACD,CAAA,WAAI,cAAc,CAAC,EAAE,CAAE;AACtB,CAAA,aAAI,GAAE,SAAA,AAAC,GAAG,CAAE,CAAA,GAAG,AAAC;kBAAI,CAAA,EAAE,KAAK,CAAC,GAAG,CAAE,IAAG,CAAC,EAAE;WAAA,CAAA;AACvC,CAAA,cAAK,GAAE,SAAA,GAAG;kBAAI,CAAA,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE;WAAA,CAAA;SAC7B,CAAC,CAAA;AACF,CAAA,aAAM,eAAe,CAAC,EAAE,CAAE,IAAG,CAAE;AAC9B,CAAA,mBAAU,CAAE,KAAI;AAAE,CAAA,qBAAY,CAAE,KAAI;AACpC,CAAA,YAAG,GAAE,SAAA,CAAC;kBAAI,GAAE;WAAA,CAAA;SACZ,CAAC,CAAA;AACF,CAAA,SAAE,UAAU,EAAG,GAAE,CAAA;CACjB,aAAO,GAAE,CAAA;OACT;CAAA,IACD,CAAC,CAAA;CAEF,WAAS,SAAQ,CAAC,IAAI,CAAE;CACvB,WAAO,CAAA,GAAI,QAAO,CAAC,IAAI,CAAC,EAAE,CAAA;KAC1B;AAED,CAFC,OAEG,cAAc,CAAC,QAAQ,CAAE;AAC5B,CAAA,UAAK,GAAE,SAAA,CAAC,CAAI;AACP,CAAJ,UAAI,CAAA,KAAK,EAAG,CAAA,OAAO,MAAM,EAAE,CAAA;AAC3B,CAAA,YAAK,QAAQ,EAAG,CAAA,KAAK,QAAQ,EAAE,CAAA;CAC/B,aAAO,MAAK,CAAA;OACZ,CAAA;AACD,CAAA,YAAO,GAAE,SAAA,GAAG;cAAI,CAAA,OAAO,QAAQ,CAAC,GAAG,CAAC,EAAE;OAAA,CAAA;AACtC,CAAA,WAAM,GAAG,SAAA,GAAG;cAAI,CAAA,OAAO,OAAO,CAAC,GAAG,CAAC,EAAE;OAAA,CAAA;AACrC,CAAA,QAAG,GAAM,SAAA,GAAG;cAAI,CAAA,OAAO,IAAI,CAAC,GAAG,CAAC,EAAE;OAAA,CAAA;AAClC,CAAA,SAAI,GAAK,SAAA,GAAG;cAAI,CAAA,OAAO,KAAK,CAAC,GAAG,CAAC,EAAE;OAAA,CAAA;KACnC,CAAC,CAAA;AAEF,CAAA,OAAI,UAAU,EAAG;AAAE,CAAA,YAAO,CAAE,SAAQ;AAAE,CAAA,MAAC,CAAE,CAAA,OAAO,QAAQ,EAAE;CAAA,IAAE,CAAA;AAExD,CAAJ,MAAI,CAAA,KAAK,EAAG,CAAA,EAAE,SAAA,CAAC;CACd,aAAS,MAAK,CAAC,IAAI;AACd,CAAJ,UAAI,CAAA,KAAK,EAAG,CAAA,CAAC,SAAS,OAAO,GAAI,EAAC,CAAC,EAAG,CAAA,EAAE,MAAM,KAAK,CAAC,SAAS,CAAC,CAAA,CAAG,CAAA,CAAC,KAAK,QAAQ,CAAC,IAAI,CAAC,CAAC,EAAG,KAAI,EAAG,EAAC,IAAI,CAAC,CAAA;CACtG,aAAO,CAAA,QAAQ,IAAI,CAAC,KAAK,IAAI,EAAC,SAAA,IAAI,CAAI;CACrC,aAAI,CAAC,CAAC,IAAI,GAAI,MAAK,CAAC;CAAE,gBAAM,CAAA,sBAAsB,EAAE,KAAI,CAAA,CAAE,IAAG,CAAA;AAC7D,CAD6D,eACtD,CAAA,KAAK,CAAC,IAAI,CAAC,CAAA;SAClB,EAAC,CAAC,CAAA;OACH;CACD,MAAC;AAAA,CAAA,MAAC,KAAK,CAAE,SAAQ,CAAE,OAAM,CAAE,UAAS,CAAE,QAAO,CAAE,OAAM,CAAC,QAAQ,EAAC,SAAA,IAAI;AAClE,CAAA,aAAM,CAAC,IAAI,CAAC,EAAG,KAAI,CAAA;AACf,CAAJ,UAAI,CAAA,KAAK,EAAG,CAAA,QAAQ,MAAM,EAAE,CAAA;AAC5B,CAAA,YAAK,CAAC,IAAI,CAAC,EAAG,CAAA,KAAK,QAAQ,CAAA;AAC3B,CAAA,YAAK,CAAC,IAAI,CAAC,MAAM,IAAG,SAAA,GAAG,CAAI;CAC1B,aAAI,GAAG;AAAE,CAAA,iBAAM,CAAC,IAAI,CAAC,EAAG,IAAG,CAAA;AAC3B,CAD2B,cACtB,QAAQ,EAAE,CAAA;SACf,CAAA,CAAA;OACD,EAAC,CAAA;CACF,WAAO,MAAK,CAAA;KACZ,EAAC,EAAE,CAAA;AAEJ,CAAA,SAAM,iBAAiB,CAAC,kBAAkB,CAAE,CAAA,KAAK,IAAI,MAAM,CAAC,CAAA;AAG5D,CAAA,OAAI,YAAY,CAAC,MAAM,CAAE;AACxB,CAAA,WAAM,CAAN,OAAM;AAAE,CAAA,UAAK,CAAL,MAAK;AAAE,CAAA,SAAI,CAAJ,KAAI;AAAE,CAAA,QAAG,CAAH,IAAG;AAAE,CAAA,SAAI,CAAJ,KAAI;CAAA,IAC9B,CAAC,CAAA;GAEF,EAAC,EAAE,CAAC;CGxRL,WAAwB;CLEnB,CDFoD,CAAC;AOA1D,CAAA,KAAM,IAAI,CAAC,YAAmB,GAAE,CAAC,CAAA;APAjC,CAAA,KAAM,SAAS,aAAoB,GAAE,CCArC,UAAS;;ACAL,CAAJ,IAAI,CAAA,YAAY,cAAoB,CAAC;AMArC,CAAA,MAAK,EAAE,KAAK,EAAE,SAAA,CAAC;AACd,CAAA,eAAY,CAAA;AAER,CAAJ,MAAI,CAAA,EAAE;AAAE,CAAA,eAAQ,CAAA;AAEZ,CAAJ,MAAI,CAAA,OAAO,EAAG;CACb,QAAG,CAAH,UAAI,GAAG,CAAE,CAAA,GAAG;CACX,aAAO,IAAI,QAAO,AAAC,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AACxB,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,UAAU,CAAE,YAAW,CAAC,CAAA;AAC5C,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,UAAU,CAAC,CAAA;AAC/B,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,IAAI,CAAC,GAAG,CAAE,IAAG,CAAC,CAAA;AACzB,CAAA,WAAE,WAAW,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,EAAE;WAAA,CAAA,CAAA;AACzB,CAAA,WAAE,QAAQ,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,EAAC,YAAa,EAAA,IAAG,EAAA,WAAW,EAAA,CAAA,EAAE,MAAM,QAAQ,EAAA,IAAG,EAAC;WAAA,CAAA,CAAA;SACpE,EAAC,CAAA;OACF;CAED,QAAG,CAAH,UAAI,GAAG,CAAE,CAAA,GAAG;CACX,aAAO,IAAI,QAAO,AAAC,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AACxB,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,UAAU,CAAE,YAAW,CAAC,CAAA;AAC5C,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,UAAU,CAAC,CAAA;AAC/B,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,IAAI,CAAC,GAAG,CAAE,IAAG,CAAC,CAAA;AACzB,CAAA,WAAE,WAAW,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,EAAE;WAAA,CAAA,CAAA;AACzB,CAAA,WAAE,QAAQ,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,EAAC,YAAa,EAAA,IAAG,EAAA,WAAW,EAAA,CAAA,EAAE,MAAM,QAAQ,EAAA,IAAG,EAAC;WAAA,CAAA,CAAA;SACpE,EAAC,CAAA;OACF;CAED,QAAG,CAAH,UAAI,GAAG;CACN,aAAO,IAAI,QAAO,AAAC,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AACxB,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,UAAU,CAAE,WAAU,CAAC,CAAA;AAC3C,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,UAAU,CAAC,CAAA;AAC/B,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,IAAI,CAAC,GAAG,CAAC,CAAA;AACpB,CAAA,WAAE,WAAW,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,CAAC,EAAE,OAAO,CAAC;WAAA,CAAA,CAAA;AAClC,CAAA,WAAE,QAAQ,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,EAAC,YAAa,EAAA,IAAG,EAAA,WAAW,EAAA,CAAA,EAAE,MAAM,QAAQ,EAAA,IAAG,EAAC;WAAA,CAAA,CAAA;SACpE,EAAC,CAAA;OACF;CAED,WAAM,CAAN,UAAO,GAAG;CACT,aAAO,IAAI,QAAO,AAAC,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AACxB,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,UAAU,CAAE,YAAW,CAAC,CAAA;AAC5C,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,UAAU,CAAC,CAAA;AAC/B,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,OAAO,CAAC,GAAG,CAAC,CAAA;AACvB,CAAA,WAAE,WAAW,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,EAAE;WAAA,CAAA,CAAA;AACzB,CAAA,WAAE,QAAQ,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,EAAC,YAAa,EAAA,IAAG,EAAA,WAAW,EAAA,CAAA,EAAE,MAAM,QAAQ,EAAA,IAAG,EAAC;WAAA,CAAA,CAAA;SACpE,EAAC,CAAA;OACF;CAED,iBAAY,CAAZ,UAAa,IAAI,CAAE,CAAA,EAAE;AAChB,CAAJ,UAAI,CAAA,QAAQ,EAAG,CAAA,MAAM,KAAK,aAAa,CAAA;CACvC,aAAO,IAAI,QAAO,AAAC,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AACxB,CAAJ,YAAI,CAAA,KAAK,EAAG,IAAI,MAAK,CAAC,EAAE,EAAG,KAAI,CAAA,CAAG,EAAC,CAAC,CAAA;AAChC,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,UAAU,CAAE,WAAU,CAAC,CAAA;AAC3C,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,UAAU,CAAC,CAAA;CAEnC,cAAS,GAAA,CAAA,EAAE,EAAG,KAAI,CAAE,CAAA,EAAE,GAAI,GAAE,CAAE,GAAE,EAAE,CAAE;AAC/B,CAAJ,cAAI,CAAA,EAAE,EAAG,CAAA,EAAE,IAAI,CAAC,QAAQ,EAAC,IAAG,CAAA,CAAC,GAAE,CAAC,CAAA;AAChC,CAAA,aAAE,UAAU,EAAG,CAAA,EAAC,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;sBAAI,SAAA,CAAC,CAAI;AAChC,CAAA,oBAAK,CAAC,EAAE,EAAG,KAAI,CAAC,EAAG,CAAA,EAAE,OAAO,CAAA;eAC5B;aAAA,EAAC,CAAC,EAAE,CAAE,GAAE,CAAC,CAAA;WACV;AAED,CAFC,WAEC,WAAW,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,CAAC,KAAK,CAAC;WAAA,CAAA,CAAA;AAC9B,CAAA,WAAE,QAAQ,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,EAAC,cAAe,EAAA,CAAA,EAAE,MAAM,QAAQ,EAAA,IAAG,EAAC;WAAA,CAAA,CAAA;SACxD,EAAC,CAAA;OACF;CAED,gBAAW,CAAX,UAAY,EAAE,CAAE,CAAA,IAAI;AACf,CAAJ,UAAI,CAAA,QAAQ,EAAG,CAAA,MAAM,KAAK,aAAa,CAAA;CACvC,aAAO,IAAI,QAAO,AAAC,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AACxB,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,UAAU,CAAE,YAAW,CAAC,CAAA;AAC5C,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,UAAU,CAAC,CAAA;AAC/B,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,IAAI,CAAC,IAAI,CAAE,CAAA,QAAQ,EAAC,IAAG,CAAA,CAAC,GAAE,CAAC,CAAA;AACtC,CAAA,WAAE,WAAW,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,EAAE;WAAA,CAAA,CAAA;AACzB,CAAA,WAAE,QAAQ,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,EAAC,cAAe,EAAA,CAAA,EAAE,MAAM,QAAQ,EAAA,IAAG,EAAC;WAAA,CAAA,CAAA;SACxD,EAAC,CAAA;OACF;CAED,eAAU,CAAV,UAAW,GAAG,CAAE,CAAA,GAAG;CAClB,aAAO,CAAA,GAAI,QAAO,AAAC,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AACxB,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,SAAS,CAAE,WAAU,CAAC,CAAA;AAC1C,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,SAAS,CAAC,CAAA;AAC9B,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,IAAI,CAAC,GAAG,CAAC,CAAA;AACpB,CAAA,WAAE,WAAW,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,CAAC,EAAE,OAAO,CAAC;WAAA,CAAA,CAAA;AAClC,CAAA,WAAE,QAAQ,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,EAAC,YAAa,EAAA,IAAG,EAAA,WAAW,EAAA,CAAA,EAAE,MAAM,QAAQ,EAAA,IAAG,EAAC;WAAA,CAAA,CAAA;SACpE,EAAC,KAAK,EAAE,SAAA,GAAG,CAAI;CACf,eAAO,CAAA,CAAC,GAAG,IAAK,UAAS,CAAC,EAAG,CAAA,OAAO,WAAW,CAAC,GAAG,CAAE,IAAG,CAAC,CAAA,CAAG,IAAG,CAAA;SAC/D,EAAC,CAAA;OACF;CAED,eAAU,CAAV,UAAW,GAAG,CAAE,CAAA,GAAG;CAClB,aAAO,IAAI,QAAO,AAAC,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AACxB,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,SAAS,CAAE,YAAW,CAAC,CAAA;AAC3C,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,YAAY,CAAC,SAAS,CAAC,CAAA;AAC9B,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,EAAE,IAAI,CAAC,GAAG,CAAE,IAAG,CAAC,CAAA;AACzB,CAAA,WAAE,WAAW,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,CAAC,GAAG,CAAC;WAAA,CAAA,CAAA;AAC5B,CAAA,WAAE,QAAQ,IAAG,SAAA,CAAC;kBAAI,CAAA,EAAE,EAAC,YAAa,EAAA,IAAG,EAAA,WAAW,EAAA,CAAA,EAAE,MAAM,QAAQ,EAAA,IAAG,EAAC;WAAA,CAAA,CAAA;SACpE,EAAC,CAAA;OACF;KAED,CAAA;AAGD,CAAA,MAAI,QAAO,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AAChB,CAAJ,QAAI,CAAA,EAAE,EAAG,CAAA,SAAS,KAAK,CAAC,YAAY,CAAE,EAAC,CAAC,CAAA;AACxC,CAAA,OAAE,gBAAgB,IAAG,SAAA,GAAG,CAAI;AACvB,CAAJ,UAAI,CAAA,EAAE,EAAG,CAAA,EAAE,OAAO,CAAA;AACd,CAAJ,UAAI,CAAA,EAAE,EAAG,CAAA,GAAG,WAAW,CAAA;CACvB,WAAI,EAAE,EAAG,EAAC;AAAE,CAAA,WAAE,kBAAkB,CAAC,UAAU,CAAC,CAAA;AAC5C,CAD4C,WACxC,EAAE,EAAG,EAAC;AAAE,CAAA,WAAE,kBAAkB,CAAC,SAAS,CAAC,CAAA;CAAA,MAC3C,CAAA,CAAA;AACD,CAAA,OAAE,UAAU,IAAG,SAAA,CAAC;cAAI,CAAA,EAAE,CAAC,EAAE,OAAO,CAAC;OAAA,CAAA,CAAA;AACjC,CAAA,OAAE,QAAQ,IAAG,SAAA,GAAG;cAAI,CAAA,EAAE,EAAC,aAAc,EAAA,CAAA,GAAG,QAAQ,EAAA,IAAG,EAAC;OAAA,CAAA,CAAA;KAEpD,EAAC,KAAK,EAAE,SAAA,GAAG,CAAI;AACf,CAAA,OAAE,EAAG,IAAG,CAAA;AACR,CAAA,UAAK,QAAQ,MAAM,CAAC,OAAO,CAAC,CAAA;KAC5B,EAAC,CAAA;GAEF,EAAC,MAAM,EAAE,CAAA;CFrHV,WAAwB;CLEnB,CDFoD,CAAC;AOA1D,CAAA,KAAM,IAAI,CAAC,aAAmB,GAAE,CAAC,CAAA;APAjC,CAAA,KAAM,SAAS,aAAoB,GAAE,CCArC,UAAS;;ACAL,CAAJ,IAAI,CAAA,YAAY,cAAoB,CAAC;AOCrC,CAAA,MAAK,EAAE,KAAK,EAAE,SAAA,CAAC;AACd,CAAA,eAAY,CAAA;CAEZ,WAAS,SAAQ,CAAC,KAAK,CAAE;AAAE,CAAA,aAAQ,MAAM,EAAG,CAAA,GAAG,EAAE,MAAK,CAAA,CAAE,IAAG,CAAA;KAAE;AAC7D,CAD6D,WACpD,YAAW,CAAC,IAAI,CAAE;AAAE,CAAA,aAAQ,EAAI,IAAI,EAAA,OAAM,EAAC,CAAA;KAAE;AACtD,CADsD,WAC7C,cAAa,CAAC,IAAI,CAAE;AAAE,CAAA,aAAQ,EAAI,IAAI,EAAA,MAAK,EAAC,CAAA;KAAE;AAGvD,CAHuD,WAG9C,YAAW,CAAC,IAAI;AACxB,CAAA,SAAI,EAAG,CAAA,IAAI,QAAQ,CAAC,OAAO,CAAE,KAAI,CAAC,QAAQ,CAAC,MAAM,CAAE,KAAI,CAAC,QAAQ,CAAC,KAAK,CAAE,OAAM,CAAC,CAAA,CAAG,OAAM,CAAA;AACxF,CAAA,SAAI,EAAG,CAAA,IAAI,QAAQ,CAAC,WAAW,CAAE,GAAE,CAAC,CAAA;AACpC,CAAA,SAAI,EAAG,CAAA,IAAI,QAAQ,CAAC,WAAW,GAAE,SAAA,AAAC,CAAC,CAAE,CAAA,GAAG,AAAC;gBAAI,YAAa,EAAA,IAAG;OAAE,EAAC,CAAA;CAGhE,aAAS,SAAQ,CAAC,IAAI,CAAE,CAAA,IAAI;AACvB,CAAJ,UAAI,CAAA,MAAM,EAAG,CAAA,IAAI,MAAM,CAAC,4BAA4B,CAAC,CAAA,EAAI,GAAE,CAAA;AAC3D,CAAA,aAAM,QAAQ,EAAC,SAAA,KAAK,CAAI;AAEnB,CAAJ,YAAI,CAAA,MAAM,EAAG,CAAA,KAAK,QAAQ,CAAC,OAAO,CAAC,GAAE,CAAC,QAAQ,CAAC,KAAK,CAAE,GAAE,CAAC,MAAM,CAAC,KAAK,CAAC,CAAA;AAElE,CAAJ,YAAI,CAAA,GAAG,EAAG,CAAA,MAAM,MAAM,EAAE,KAAK,EAAE,CAAA;AAC3B,CAAJ,YAAI,CAAA,IAAI,EAAG,CAAA,IAAI,EAAE,CAAA,MAAM,KAAK,CAAC,IAAI,CAAC,CAAA,CAAE,KAAI,CAAA;AACpC,CAAJ,YAAI,CAAA,GAAG,EAAG,GAAE,CAAA;CACZ,aAAI,GAAG,CAAC,CAAC,CAAC,IAAK,IAAG,CAAE;AACnB,CAAA,eAAI,KAAK,CAAC,CAAC,IAAI,CAAE,EAAC,CAAC,GAAG,CAAE,OAAM,CAAC,CAAC,CAAC,CAAC,CAAA;CAClC,kBAAM;WACN;AAAM,CAAA,cAAG,EAAG,CAAA,GAAG,MAAM,CAAC,CAAC,CAAC,CAAA;AAEzB,CAFyB,aAErB,IAAI,MAAM,CAAC,IAAI,CAAC,CAAE;AACrB,CAAA,eAAI,KAAK,CAAC,CAAC,GAAG,CAAE,IAAG,CAAC,CAAC,CAAA;AAErB,CAAA,mBAAQ,CAAC,GAAG,CAAE,KAAI,CAAC,CAAA;WACnB;AAAM,CAAA,eAAI,KAAK,CAAC,CAAC,GAAG,CAAE,OAAM,CAAC,CAAC,CAAA;CAAA,QAC/B,EAAC,CAAA;OACF;AAEG,CAAJ,QAAI,CAAA,IAAI,EAAG,GAAE,CAAA;AACb,CAAA,eAAU,CAAC,IAAI,CAAC,CAAA;AAChB,CAAA,aAAQ,CAAC,IAAI,CAAE,KAAI,CAAC,CAAA;CACpB,WAAO,KAAI,CAAA;KAEX;CAID,WAAS,WAAU,CAAC,GAAG,CAAE;CACxB,WAAO,CAAA,IAAI,MAAM,CAAC,IAAI,UAAU,CAAC,GAAG,CAAC,CAAC,CAAA;KACtC;AAGD,CAHC,WAGQ,UAAS,CAAC,IAAI,CAAE;CACxB,WAAO,UAAU,CAAE;CAAE,aAAO,CAAA,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,IAAI,CAAE,UAAS,CAAC,CAAA;OAAE,CAAA;KAC/D;AAID,CAJC,WAIQ,WAAU,CAAC,IAAI;CACvB,MAAC;AAAA,CAAA,MAAC,IAAI,MAAM,CAAC,WAAW,CAAC,CAAA,EAAI,GAAE,CAAC,QAAQ,EAAE,SAAA,GAAG,CAAI;AAC5C,CAAJ,UAAI,CAAA,IAAI,EAAG,CAAA,GAAG,MAAM,CAAC,CAAC,CAAE,EAAC,CAAC,CAAC,CAAA;AAC3B,CAAA,qBAAc,CAAC,IAAI,CAAC,CAAA;OACpB,EAAC,CAAA;KACF;AAIG,CAAJ,MAAI,CAAA,aAAa,EAAG,CAAA,EAAC,SAAA,CAAC;AAEjB,CAAJ,QAAI,CAAA,MAAM,EAAG,GAAE,CAAA;AACX,CAAJ,QAAI,CAAA,GAAG,EAAG,EAAC,CAAA;AACP,CAAJ,QAAI,CAAA,CAAC,EAAG,EAAC,CAAA;CAET,aAAS,KAAI,CAAC;CACb,cAAO,CAAC,EAAG,IAAG,CAAE;AACX,CAAJ,YAAI,CAAA,IAAI,EAAG,CAAA,MAAM,MAAM,EAAE,CAAA;CACzB,aAAI,CAAC,IAAI;CAAE,kBAAM;AACjB,CADiB,WACf,CAAC,CAAA;AACH,CAAA,gBAAO,QAAQ,CAAC,IAAI,EAAE,CAAC,QAAQ,EAAC,SAAA,CAAC,CAAI;AACpC,CAAA,aAAE,CAAC,CAAA;AACH,CAAA,eAAI,EAAE,CAAA;WACN,EAAC,MAAM,EAAE,CAAA;SACV;CAAA,MACD;CAED,aAAS,OAAM,CAAC,IAAI,CAAE;AACrB,CAAA,aAAM,KAAK,CAAC,IAAI,CAAC,CAAA;AACjB,CAAA,WAAI,EAAE,CAAA;OACN;AAED,CAFC,WAEM,OAAM,CAAA;KAEb,EAAC,EAAE,CAAA;CAIJ,WAAS,YAAW,CAAC,MAAM,AAAsB;SAApB,MAAK,6CAAG,CAAA,MAAM,MAAM;CAEhD,SAAI,CAAC,KAAK,QAAQ,CAAC,MAAM,CAAC,CAAE;AAC3B,CAAA,UAAG,CAAC,sBAAsB,CAAC,CAAA;AAC3B,CAAA,UAAG,CAAC,MAAM,CAAC,CAAA;CACX,aAAO,CAAA,OAAO,OAAO,CAAC,sBAAsB,CAAC,CAAA;OAC7C;AAED,CAFC,mBLrGH,CAAA,eAAe,aAAa,CKuGT,MAAM,CLvGsB,UKuGtB;CACvB,SAAI,CAAC,KAAK;AAAE,CAAA,UAAG,CAAC,UAAU,CAAC,CAAA;AAE3B,CAF2B,WAErB,EAAG,CAAA,UAAU,CAAC,MAAM,CAAC,CAAA;AAEvB,CAAJ,QAAI,CAAA,aAAa,EAAG;AACnB,CAAA,SAAE,CAAE,CAAA,SAAS,CAAC,OAAO,CAAC;CAEtB,SAAE,CAAF,UAAG,IAAI,CAAE;AACJ,CAAJ,YAAI,CAAA,IAAI,EAAG,CAAA,IAAI,CAAC,CAAC,CAAC,CAAA;AAClB,CAAA,eAAM,CAAC,CAAC,IAAI,CAAE,KAAI,CAAE,MAAK,CAAC,CAAC,CAAA;SAC3B;AAED,CAAA,SAAE,CAAE,CAAA,SAAS,CAAC,KAAK,CAAC;CACpB,UAAG,CAAH,UAAI,IAAI;AAEP,CAAA,aAAI,QAAQ,EAAE,SAAA,GAAG;CAEhB,eAAI,IAAI,WAAW,CAAC,GAAG,CAAC;CAAE,oBAAM;AAChC,CADgC,qBLzHrC,CAAA,eAAe,aAAa,CK0HC,GAAG,CL1He;CK0HrC,uBAAQ;CAAE,oBAAK,WAAO;CAC3B,eAAI,CAAC,QAAQ;CAAE,oBAAM;AACrB,CADqB,eAClB,CAAC,KAAK;CAAE,oBAAM;AAEb,CAFa,cAEb,CAAA,IAAI,EAAG,CAAA,KAAK,CAAC,CAAC,CAAC,CAAA;AAEnB,CAAA,iBAAM,CAAC,CAAC,KAAK,CAAE,KAAI,CAAE,MAAK,CAAC,CAAC,CAAA;WAC5B,EAAC,CAAA;SACF;CAED,UAAG,CAAH,UAAI,IAAI;AAEP,CAAA,aAAI,QAAQ,EAAC,SAAA,GAAG,CAAI;AACf,CAAJ,cAAI,CAAA,KAAK,EAAG,CAAA,GAAG,CAAC,CAAC,CAAC,CAAA;CAClB,eAAI,MAAO,MAAK,CAAC,CAAC,CAAC,CAAA,EAAI,SAAQ;AAAE,CAAA,0BAAa,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,CAAA;;AACxD,CAAA,wBAAW,CAAC,KAAK,CAAE,MAAK,CAAC,CAAA;CAAA,UAC9B,EAAE,CAAA;SAEH;AAED,CAAA,SAAE,CAAE,CAAA,SAAS,CAAC,KAAK,CAAC;AACpB,CAAA,UAAG,CAAE,CAAA,SAAS,CAAC,KAAK,CAAC;CAErB,WAAI,CAAJ,UAAK,IAAI;;AAEJ,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,IAAI,CAAC,CAAC,CAAC,CAAA;CAChB,aAAI,CAAC,EAAE;CAAE,kBAAM;AACX,CADW,YACX,CAAA,IAAI,EAAG,GAAE;AAAE,CAAA,iBAAI,EAAG,MAAK,CAAA;CAC3B,mBLtJJ,CAAA,eAAe,aAAa,CKsJA,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CLtJd;CKsJtC,iBAAI;CAAE,iBAAI,ECtJnB,CAAA,CAAC,MAAoB,QAAoC,CAAC,IAAK,KAAK,EAAC,CAAA,CDsJ/C,GAAE,OCrJqB,CDqJgB;CACzD,aAAI,CAAC,IAAI;AAAE,CAAA,eAAI,EAAG,CAAA,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AAClD,CADkD,YAClD,CAAA,MAAM,IAAM,MAAM,KAAK,aAAa,EAAA,IAAI,EAAA,CAAA,IAAI,UAAU,CAAC,MAAM,CAAE,KAAI,CAAE,MAAK,CAAC,CAAE,CAAA;CAEjF,aAAI,CAAC,QAAQ,CAAC,MAAM,CAAC;AAAE,CAAA,0BAAe,CAAC,EAAE,CAAE,KAAI,CAAC,KAAK,EAAE,SAAA,MAAM;oBAAI,CAAA,WAAW,CAAC,MAAM,CAAC;aAAA,EAAE,MAAM,EAAE,CAAA;CAAA,QAE9F;AAED,CAAA,SAAE,CAAE,CAAA,SAAS,CAAC,OAAO,CAAC;AACtB,CAAA,aAAM,CAAE,CAAA,SAAS,CAAC,OAAO,CAAC;AAC1B,CAAA,YAAK,CAAE,CAAA,SAAS,CAAC,OAAO,CAAC;AAEzB,CAAA,SAAE,CAAE,CAAA,SAAS,CAAC,OAAO,CAAC;AAEtB,CAAA,SAAE,CAAE,CAAA,SAAS,CAAC,MAAM,CAAC;AACrB,CAAA,UAAG,CAAE,CAAA,SAAS,CAAC,MAAM,CAAC;AACtB,CAAA,WAAI,CAAE,CAAA,SAAS,CAAC,KAAK,CAAC;AAEtB,CAAA,SAAE,CAAE,CAAA,SAAS,CAAC,KAAK,CAAC;AAEpB,CAAA,UAAG,CAAE,CAAA,SAAS,CAAC,OAAO,CAAC;AAEvB,CAAA,YAAK,CAAE,CAAA,SAAS,CAAC,OAAO,CAAC;AAEzB,CAAA,WAAI,CAAE,CAAA,SAAS,CAAC,OAAO,CAAC;CAExB,YAAK,CAAL,UAAM,CAAE,GACP;CAAA,MAED,CAAA;AAGG,CAAJ,QAAI,CAAA,KAAK,EAAG,CAAA,OAAO,MAAM,EAAE,CAAA;AACvB,CAAJ,QAAI,CAAA,OAAO,EAAG,EAAC,CAAA;CAEf,aAAS,OAAM,CAAC,IAAI,AAAmB;WAAjB,MAAK,6CAAG,UAAS;AACtC,CAAA,SAAE,OAAO,CAAA;AACT,CAAA,oBAAa,EAAE,SAAA,CAAC;CACf,eAAO,CAAA,KAAK,YE5LhB,CAAA,eAAe,SAAS,CF4LJ,IAAI,CE5LmB,SF4LV,EAAE,SAAA,CAAC,CAAI;CACnC,eAAI,EAAE,OAAO,CAAA,EAAI,EAAC;AAAE,CAAA,kBAAK,QAAQ,EAAE,CAAA;CAAA,UACnC,EAAC,MAAM,EAAE,CAAA;SACV,EAAC,CAAA;OAEF;AAGD,CAAA,WAAM,QAAQ,EAAE,SAAA,IAAI,CAAI;CACvB,UAAI;CAEH,aAAI,CAAC,IAAI;CAAE,kBAAM;AACb,CADa,YACb,CAAA,GAAG,EAAG,CAAA,IAAI,CAAC,CAAC,CAAC,KAAK,EAAE,CAAA;AACpB,CAAJ,YAAI,CAAA,IAAI,EAAG,CAAA,IAAI,CAAC,CAAC,CAAC,CAAA;CAElB,aAAI,GAAG,GAAI,cAAa,CAAE;AACzB,CAAA,wBAAa,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAA;WACxB,KAAM;AACN,CAAA,cAAG,CAAC,wBAAwB,EAAE,IAAG,CAAA,CAAE,OAAM,CAAC,CAAA;WAC1C;CAAA,QAED,CAAC,OAAO,GAAG,CAAE;AACb,CAAA,YAAG,EAAC,cAAe,EAAA,IAAG,EAAA,MAAM,EAAA,IAAG,EAAA,QAAO,EAAC,CAAA;SACvC;CAAA,MAED,EAAC,CAAA;CAGF,SAAI,OAAO,GAAI,EAAC;AAAE,CAAA,YAAK,QAAQ,EAAE,CAAA;AAEjC,CAFiC,WAE1B,CAAA,KAAK,QAAQ,CAAA;KAGpB;CAID,WAAS,UAAS,CAAC,MAAM,AAA8C;SAA5C,MAAK,6CAAG,CAAA,MAAM,MAAM;SAAE,WAAU;SAAE,WAAU;;CAEtE,SAAI,CAAC,KAAK;AAAE,CAAA,UAAG,CAAC,UAAU,CAAC,CAAA;AAC3B,CAD2B,UACtB,EAAG,CAAA,KAAK,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AAE3B,CAAA,SAAI,mBAAmB,CAAC,OAAO,CAAC,CAAA;AAChC,CAAA,WAAM,KAAK,MAAM,EAAG,OAAM,CAAA;AAC1B,CAAA,aAAQ,MAAM,IAAG,GAAI,EAAA,CAAA,MAAM,KAAK,aAAa,EAAA,IAAG,CAAA,CAAA;AAE5C,CAAJ,QAAI,CAAA,GAAG,EAAG,CAAA,OAAO,MAAM,EAAE,CAAA;CACzB,SAAI,CAAC,UAAU;AAAE,CAAA,iBAAU,EAAG,CAAA,GAAG,QAAQ,CAAA;AACzC,CADyC,SACrC,CAAC,UAAU;AAAE,CAAA,iBAAU,EAAG,CAAA,GAAG,QAAQ,CAAA;AAEzC,CAFyC,eL5O3C,CAAA,eAAe,aAAa,CK8Oe,MAAM,CL9OF;CK8OlC,iBAAQ;;mCAA4B;AAE3C,CAAJ,QAAI,CAAA,SAAS,EAAG,EAAC,CAAC,QAAQ,CAAA;CAC1B,SAAI,MAAM;AAAE,CAAA,aAAM,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAC,SAAA,IAAI;gBAAI,CAAA,MAAM,SAAS,CAAC,IAAI,CAAE,CAAA,MAAM,CAAC,IAAI,CAAC,CAAC;SAAA,EAAC,CAAA;AACpF,CADoF,SAChF,QAAQ;AAAE,CAAA,aAAM,YAAY,CAAC,QAAQ,CAAC,CAAA;AAE1C,CAF0C,WAEpC,EAAG,CAAA,UAAU,CAAC,MAAM,CAAC,CAAA;CAE3B,aAAS,aAAY,CAAC,MAAM,CAAE;CAAE,aAAO,CAAA,SAAS,CAAC,MAAM,CAAE,MAAK,CAAE,WAAU,CAAE,WAAU,CAAC,CAAA;OAAE;AACzF,CADyF,aAChF,eAAc,CAAC,MAAM,CAAE;CAAE,aAAO,CAAA,SAAS,CAAC,MAAM,CAAE,UAAS,CAAE,UAAS,CAAE,WAAU,CAAC,CAAA;OAAE;AAE1F,CAF0F,QAE1F,CAAA,WAAW;cACd,UAAG,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,MAAM;CAEpB,iBAAS,SAAQ,CAAC;AAEb,CAAJ,cAAI,CAAA,GAAG,EAAG,CAAA,IAAI,MAAM,EAAE,CAAA;CACtB,eAAI,CAAC,GAAG;CAAE,mBAAO,CAAA,IAAI,EAAE,CAAA;AAEnB,CAFmB,cAEnB,CAAA,IAAI,EAAG,CAAA,GAAG,CAAC,CAAC,CAAC;AAAE,CAAA,oBAAK,EAAG,CAAA,GAAG,CAAC,CAAC,CAAC,CAAA;CACjC,eAAI,IAAI,WAAW,CAAC,IAAI,CAAC;AAAE,CAAA,iBAAI,EAAG,GAAE,CAAA;AACpC,CADoC,eAChC,EAAG,CAAA,aAAa,CAAC,IAAI,CAAC,CAAA;AAC1B,CAAA,eAAI,SAAS,CAAC,IAAI,CAAC,CAAA;CAGnB,mBAAS,aAAY,CAAC;AACjB,CAAJ,gBAAI,CAAA,IAAI,EAAG,CAAA,KAAK,MAAM,EAAE,CAAA;CACxB,iBAAI,CAAC,IAAI;CAAE,qBAAO,CAAA,QAAQ,EAAE,CAAA;AAC5B,CAD4B,iBACxB,EAAG,CAAA,IAAI,QAAQ,CAAC,WAAW,GAAE,SAAA,AAAC,CAAC,CAAE,CAAA,GAAG,AAAC,CAAI;CAC5C,qBAAO,CAAA,QAAQ,OAAO,CAAC,GAAG,CAAC,CAAA;eAC3B,EAAC,QAAQ,CAAC,MAAM,CAAE,KAAI,CAAC,CAAA;AACxB,CAAA,iBAAI,EAAG,CAAA,aAAa,CAAC,IAAI,CAAC,CAAA;AAE1B,CAAA,iBAAI,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,IAAI,CAAE,aAAY,CAAE,OAAM,CAAC,CAAA;aACrD;AACD,CAAA,uBAAY,EAAE,CAAA;WACd;AAED,CAAA,iBAAQ,EAAE,CAAA;SACV;;;;;cAED,UAAG,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,MAAM;AAChB,CAAJ,YAAI,CAAA,IAAI,EAAG,CAAA,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AACjC,CAAA,kBAAS,CAAC,IAAI,CAAE,KAAI,CAAE,MAAK,CAAC,KAAK,EAAE,SAAA,GAAG;kBAAI,CAAA,IAAI,WAAW,CAAC,CAAE,GAAG,CAAH,IAAG,CAAE,CAAC;WAAA,EAAE,KAAK,CAAC,IAAI,CAAE,OAAM,CAAC,CAAA;SACvF;;;;;cAEG,CAAA,SAAS,CAAC,KAAK,CAAC;;;;;cACpB,UAAI,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,MAAM;AAErB,CAAA,gBAAO,IAAI,CAAC,IAAI,OAAO,EAAC,SAAA,AAAC,IAAI,CAAE,CAAA,GAAG,AAAC;;;CAElC,eAAI,CAAC,IAAI;CAAE,oBAAM;AAEjB,CAFiB,eAEb,IAAI,WAAW,CAAC,GAAG,CAAC;CAAE,mBAAO,KAAI,CAAA;AAErC,CAFqC,qBLnS1C,CAAA,eAAe,aAAa,CKqSC,GAAG,CLrSe;CKqSrC,uBAAQ;CAAE,oBAAK,WAAO;CAE3B,eAAI,CAAC,QAAQ;CAAE,mBAAO,CAAA,MAAM,CAAC,SAAS,CAAC,CAAA;AACvC,CADuC,eACpC,CAAC,KAAK;CAAE,mBAAO,CAAA,MAAM,CAAC,UAAU,CAAC,CAAA;AAEpC,CAFoC,mBAE5B,EAAG,CAAA,aAAa,CAAC,QAAQ,CAAC,CAAA;AAC9B,CAAJ,cAAI,CAAA,IAAI,EAAG,CAAA,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;AAE9B,CAAJ,cAAI,CAAA,MAAM,EAAG,CAAA,CAAC,MAAM,CAAC,QAAO,CAAC,CAAC,IAAI,QAAQ,CAAC,QAAQ,CAAC,CAAC,CAAA;AACjD,CAAJ,cAAI,CAAA,MAAM,EAAG,MAAK,CAAA;CAClB,qBAAqB,EAAC,CAAC,CAAE,EAAC,CAAC;CAAtB,oBAAK;CAAE,oBAAK,WAAU;AACvB,CAAJ,cAAI,CAAA,MAAM,EAAG,KAAI,CAAA;CAEjB,eAAI,CAAC,MAAM,CAAE;AACR,CAAJ,gBAAI,CAAA,GAAG,EAAG,CAAA,IAAI,YAAY,CAAC,QAAQ,CAAC,MAAM,CAAC,aAAa,CAAC,CAAA;CACzD,iBAAI,CAAC,GAAG;CAAE,qBAAO,CAAA,MAAM,CAAC,SAAS,CAAC,CAAA;AAClC,CADkC,uBLpTxC,CAAA,eAAe,aAAa,CKqTkB,GAAG,CLrTF;CKqTpC,sBAAK;CAAE,sBAAK,ECrTvB,CAAA,CAAC,MAAoB,QAAoC,CAAC,IAAK,KAAK,EAAC,CAAA,CDqT7C,IAAG,OCpTkB;CDoThB,uBAAM,ECrTnC,CAAA,CAAC,MAAoB,QAAoC,CAAC,IAAK,KAAK,EAAC,CAAA,CDqT/B,KAAI,OCpTG,CDoTI;AAC3C,CAAA,kBAAK,EAAG,CAAA,IAAI,IAAI,CAAC,CAAC,KAAK,CAAC,CAAA;AACxB,CAAA,kBAAK,EAAG,CAAA,IAAI,IAAI,CAAC,CAAC,KAAK,CAAC,CAAA;AACxB,CAAA,mBAAM,EAAG,CAAA,KAAK,MAAM,CAAC,GAAG,CAAC,CAAA,CAAG,QAAO,EAAG,OAAM,CAAA;AAC5C,CAAA,mBAAM,EAAG,CAAA,KAAK,MAAM,CAAC,GAAG,CAAC,CAAA,CAAG,SAAQ,EAAG,MAAK,CAAA;AAC5C,CAAA,mBAAM,EAAG,CAAA,MAAM,GAAI,KAAI,CAAA,GAAM,CAAC,MAAM,CAAA,CAAA,IAAG,GAAG,KAAI,CAAA;aAC9C;AAED,CAFC,eAEG,KAAK,CAAC,SAAS,CAAC,KAAK,CAAE,KAAI,CAAE,MAAK,CAAC,KAAK,EAAE,SAAA,GAAG;;oBAAI;sBAAG,IAAG;;;;;sBAAE,OAAM;;;;6CAAG,OAAM;wBAAM,KAAK,EAAA,IAAG;;;;6CAAG,OAAM;wBAAM,KAAK,EAAA,IAAG;;;;wBAAG;aAAA,EAAE,CAAC,CAAA;CACvH,iBAAO,KAAI,CAAA;WACX,EAAE,GAAE,CAAC,CAAC,KAAK,CAAC,IAAI,YAAY,KAAK,CAAC,IAAI,CAAC,CAAC,KAAK,CAAC,IAAI,CAAE,OAAM,CAAC,CAAA;SAC5D;;;;;cAEG,CAAA,SAAS,CAAC,KAAK,CAAC;;;;;cACpB,UAAI,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,MAAM;AAErB,CAAA,aAAI,gBAAgB,CAAC,IAAI,IAAI,EAAC,SAAA,GAAG,CAAI;CACpC,iBAAO;AAAE,CAAA,iBAAI,CAAE,CAAA,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;AAAE,CAAA,kBAAK,CAAE,CAAA,GAAG,CAAC,CAAC,CAAC;CAAA,YAAE,CAAA;WACrD,EAAC,CAAC,KAAK,EAAE,SAAA,KAAK,CAAI;CAClB,eAAI,MAAO,MAAK,CAAC,CAAC,CAAC,CAAA,EAAI,SAAQ;AAAE,CAAA,wBAAW,CAAC,MAAM,CAAC,CAAC,KAAK,CAAE,KAAI,CAAE,OAAM,CAAC,CAAA;;AACpE,CAAA,yBAAY,CAAC,KAAK,CAAC,KAAK,CAAC,IAAI,CAAE,OAAM,CAAC,CAAA;CAAA,UAC3C,EAAE,CAAA;SAEH;;;;;cAED,UAAK,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,MAAM;AAClB,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,aAAa,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;AAC/B,CAAA,wBAAe,CAAC,EAAE,CAAE,MAAK,CAAC,KAAK,EAAE,SAAA,MAAM;kBAAI,CAAA,cAAc,CAAC,MAAM,CAAC;WAAA,EAAE,KAAK,CAAC,IAAI,CAAE,OAAM,CAAC,CAAA;SACtF;;;;;cAEG,CAAA,SAAS,CAAC,OAAO,CAAC;;;;;cACd,CAAA,SAAS,CAAC,OAAO,CAAC;;;;;cAC1B,UAAM,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,MAAM;AAEvB,CAAA,aAAI,QAAQ,EAAC,SAAA,GAAG,CAAI;AACnB,CAAA,cAAG,EAAG,CAAA,IAAI,YAAY,CAAC,GAAG,CAAC,CAAA;AAC3B,CAAA,cAAG,EAAG,CAAA,GAAG,MAAM,CAAC,YAAY,CAAC,CAAA;CAC7B,eAAI,CAAC,GAAG;CAAE,mBAAO,CAAA,MAAM,CAAC,cAAc,CAAC,CAAA;AACnC,CADmC,cACnC,CAAA,IAAI,EAAG,CAAA,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AAC5B,CAAJ,cAAI,CAAA,MAAM,EAAG,CAAA,GAAG,CAAC,CAAC,CAAC,CAAA;CAEnB,eAAI,CAAC,IAAI;CAAE,mBAAO,CAAA,MAAM,CAAC,cAAc,CAAC,CAAA;AACpC,CADoC,cACpC,CAAA,GAAG,EAAG,CAAA,UAAU,CAAC,MAAM,CAAE,OAAM,CAAC,CAAA;AAEpC,CAAA,mBAAQ,CAAC,IAAI,CAAE,IAAG,CAAC,CAAA;WAEnB,EAAC,CAAA;AACF,CAAA,aAAI,EAAE,CAAA;SACN;;;;;cAED,UAAG,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,MAAM,CAAE;AAEtB,CAAA,YAAG,EAAG,CAAA,IAAI,YAAY,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAA;CAC/B,aAAI,CAAC,GAAG;CAAE,iBAAO,CAAA,MAAM,CAAC,cAAc,CAAC,CAAA;AACnC,CADmC,YACnC,CAAA,GAAG,EAAG,CAAA,MAAM,KAAK,CAAC,GAAG,CAAC,CAAA,CAAG,CAAA,GAAG,MAAM,CAAC,YAAY,CAAC,CAAA,CAAG,GAAG,IAAG,CAAE,KAAI,CAAC,CAAA;AAEhE,CAAJ,YAAI,CAAA,IAAI,EAAG,CAAA,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AAC5B,CAAJ,YAAI,CAAA,MAAM,EAAG,CAAA,GAAG,CAAC,CAAC,CAAC,CAAA;AACf,CAAJ,YAAI,CAAA,GAAG,EAAG,CAAA,UAAU,CAAC,MAAM,CAAE,OAAM,CAAC,CAAA;AAEhC,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,MAAM,CAAC,EAAE,CAAE,IAAG,CAAC,CAAA,EAAI,IAAG,CAAA;AAC/B,CAAA,iBAAQ,CAAC,IAAI,CAAE,GAAE,CAAC,CAAA;AAElB,CAAA,aAAI,EAAE,CAAA;SACN;;;;;cAEG,CAAA,SAAS,CAAC,MAAM,CAAC;;;;;cAChB,CAAA,SAAS,CAAC,MAAM,CAAC;;;;;cACtB,UAAK,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,MAAM,AAAO;aAAL,EAAC,6CAAG,EAAC;AAC7B,CAAA,UAAC,EAAE,CAAA;CACH,aAAI,CAAC,EAAG,MAAK;CAAE,iBAAO,CAAA,MAAM,CAAC,uBAAuB,CAAC,CAAA;AACrD,CADqD,YACjD,QAAO,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;CACnB,eAAI,CAAC,IAAI,KAAK,EAAC,SAAA,AAAC,IAAc,AAAC,CAAI;iBAAlB,OAAM;CAAE,qBAAI;CAC5B,iBAAI,CAAC,MAAM;CAAE,qBAAO,CAAA,MAAM,CAAC,cAAc,CAAC,CAAA;AACvC,CADuC,gBACvC,CAAA,IAAI,EAAG,EAAC,CAAC,UAAU,CAAC,MAAM,CAAE,GAAE,CAAC,CAAA;CACnC,iBAAI,IAAI;AAAE,CAAA,2BAAY,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAE,GAAE,CAAC,CAAA;AACzC,CADyC,mBAClC,KAAI,CAAA;aACX,EAAC;AAAG,CAAA,iBAAI,EAAE,CAAA;CAAA,UACX,EAAC,KAAK,EAAE,SAAA,CAAC;kBAAI,CAAA,WAAW,CAAC,MAAM,CAAC,CAAC,IAAI,CAAE,KAAI,CAAE,OAAM,CAAE,EAAC,CAAC;WAAA,EAAE,MAAM,CAAC,MAAM,CAAC,CAAA;SACxE;;;;;cAED,UAAG,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,MAAM;CACnB,aAAI,CAAC,IAAI,KAAK,EAAC,SAAA,AAAC,IAAc,AAAC,CAAI;eAAlB,OAAM;CAAE,mBAAI;CAC5B,eAAI,CAAC,MAAM;CAAE,mBAAO,CAAA,MAAM,CAAC,cAAc,CAAC,CAAA;AACvC,CADuC,cACvC,CAAA,IAAI,EAAG,EAAC,CAAC,UAAU,CAAC,MAAM,CAAE,OAAM,CAAC,CAAA;CACvC,eAAI,IAAI;AAAE,CAAA,yBAAY,CAAC,IAAI,CAAC,KAAK,CAAC,IAAI,CAAE,OAAM,CAAC,CAAA;AAC/C,CAD+C,iBACxC,KAAI,CAAA;WACX,EAAC;AAAG,CAAA,eAAI,EAAE,CAAA;CAAA,QACX;;;;;cAED,UAAI,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,MAAM;CAErB,aAAI,UAAU,GAAI,CAAA,GAAG,QAAQ;CAAE,iBAAO,CAAA,MAAM,CAAC,uBAAuB,CAAC,CAAA;AACjE,CADiE,YACjE,CAAA,MAAM,EAAG,GAAE,CAAA;AACf,CAAA,qBAAY,EAAE,SAAA,AAAC,KAAK,CAAE,CAAA,GAAG,AAAC;kBAAI,CAAA,MAAM,CAAC,GAAG,CAAC,EAAG,MAAK;WAAA,EAAE,CAAA;AAC/C,CAAJ,YAAI,CAAA,EAAE,EAAG;AACR,CAAA,iBAAM,CAAE,MAAK;AACb,CAAA,eAAI,CAAE,CAAA,IAAI,CAAC,CAAC,CAAC;AACb,CAAA,iBAAM,CAAN,OAAM;CAAA,UACN,CAAA;AAED,CAAA,eAAM,KAAK,aAAa,EAAG,GAAE,CAAA;AAC7B,CAAA,aAAI,EAAE,CAAA;AACN,CAAA,0BAAiB,EAAE,CAAA;SACnB;;;;;cAED,UAAM,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,MAAM,CAAE;AACrB,CAAJ,YAAI,CAAA,GAAG,EAAG,CAAA,IAAI,CAAC,CAAC,CAAC,CAAA;CACjB,aAAI,IAAI,WAAW,CAAC,GAAG,CAAC;CAAE,iBAAO,CAAA,IAAI,EAAE,CAAA;AACvC,CADuC,iBAC/B,GAAG;CACV,eAAK,MAAK,CAAC;CACX,eAAK,MAAK;AACT,CAAA,gBAAG,QAAQ,EAAE,CAAA;CACd,mBAAK;AACL,CADK,eACA,KAAI,CAAC;CACV,eAAK,MAAK,CAAC;CACX,eAAK,KAAI,CAAC;CACV,eAAK,MAAK;AACT,CAAA,uBAAU,EAAE,CAAA;CACb,mBAAK;AACL,CADK,eACA,MAAK,CAAC;CACX,eAAK,KAAI,CAAC;CACV,eAAK,MAAK;AACT,CAAA,uBAAU,EAAE,CAAA;CACb,mBAAK;AACL,CADK;AAEL,CAAA,mBAAM,EAAC,SAAU,EAAA,IAAG,EAAA,IAAG,EAAC,CAAA;CADhB,UAGR;SACD;;;;;cAED,UAAK,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,MAAM,CAAE;AACxB,CAAA,aAAI,EAAE,CAAA;SACN;;;;eAED,CAAA;CAED,aAAS,UAAS,CAAC;AAId,CAAJ,UAAI,CAAA,GAAG;AAAE,CAAA,eAAI,EAAG,CAAA,GAAI,QAAO,EAAE,SAAA,AAAC,OAAO,CAAE,CAAA,MAAM,AAAC,CAAI;AAE7C,CAAJ,gBAAI,CAAA,IAAI,EAAG,CAAA,MAAM,MAAM,EAAE,CAAA;CACzB,iBAAI,CAAC,IAAI,CAAE;CACV,qBAAO,CAAA,SAAS,EAAG,CAAA,GAAG,OAAO,EAAC,MAAO,EAAA,SAAQ,EAAA,aAAY,EAAC,CAAA,CAAG,CAAA,GAAG,QAAQ,EAAE,CAAA;eAC1E;AACD,CADC,gBACE,EAAG,CAAA,IAAI,CAAC,CAAC,CAAC,KAAK,EAAE,CAAA;AAChB,CAAJ,gBAAI,CAAA,IAAI,EAAG,CAAA,IAAI,CAAC,CAAC,CAAC,CAAA;CAElB,iBAAI,SAAS,CAAE;CACd,mBAAI,GAAG,GAAI,MAAK,CAAE;AACb,CAAJ,oBAAI,CAAA,IAAI,EAAG,CAAA,IAAI,CAAC,CAAC,CAAC,CAAA;CAClB,qBAAI,IAAI,GAAI,SAAQ,CAAE;AACrB,CAAA,4BAAS,EAAG,MAAK,CAAA;CACjB,yBAAO,CAAA,WAAW,CAAC,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAE,QAAO,CAAE,OAAM,CAAC,CAAA;mBAClD;CAAA,gBACD;AACD,CADC,sBACM,EAAE,CAAA;eACT,KAAM,KAAI,GAAG,GAAI,YAAW,CAAE;AAC9B,CAAA,0BAAW,CAAC,GAAG,CAAC,CAAC,IAAI,CAAE,QAAO,CAAE,OAAM,CAAC,CAAA;eACvC,KAAM;AACN,CAAA,mBAAI,MAAM,CAAC,iBAAiB,EAAE,IAAG,CAAA,CAAE,qCAAoC,CAAC,CAAA;AACxE,CAAA,sBAAO,EAAE,CAAA;eACT;CAAA,YAED,EAAC,KAAK,CAAC,SAAS,GAAE,SAAA,GAAG,CAAI;AACrB,CAAJ,gBAAI,CAAA,OAAO,EAAG,CAAA,GAAG,IAAG,OAAQ,EAAA,IAAG,EAAA,MAAM,EAAA,IAAG,EAAA,YAAW,KAAG,OAAQ,EAAA,IAAG,EAAA,eAAc,CAAA,CAAA;AAC/E,CAAA,iBAAI,MAAM,CAAC,2BAA2B,EAAE,QAAO,CAAA,CAAE,4BAA2B,CAAC,CAAA;CAC7E,mBAAO,CAAA,SAAS,EAAE,CAAA;aAClB,EAAC,CAAA;OACF;AAGD,CAAA,cAAS,EAAE,CAAA;CACX,WAAO,CAAA,GAAG,QAAQ,CAAA;KAElB;CAID,WAAS,cAAa,CAAC,GAAG;CACzB,WAAO,CAAA,GAAG,QAAQ,CAAC,YAAY,GAAE,SAAA,AAAC,CAAC,CAAE,CAAA,KAAK,AAAC;cAAI,CAAA,UAAU,CAAC,KAAK,CAAC;OAAA,EAAE,CAAA;KAClE;CAGD,WAAS,WAAU,CAAC,MAAM,CAAE,CAAA,MAAM;AACjC,CAAA,WAAM,EAAG,CAAA,MAAM,KAAK,EAAE,CAAA;CACtB,SAAI,IAAI,WAAW,CAAC,MAAM,CAAC;CAAE,aAAO,KAAI,CAAA;AACxC,CADwC,WAClC,EAAG,CAAA,IAAI,YAAY,CAAC,MAAM,CAAC,QACzB,CAAC,KAAK,CAAC,OAAM,CAAC,QACd,CAAC,OAAO,CAAE,IAAG,CAAC,QAAQ,CAAC,YAAY,GAAE,SAAA,GAAG;cAAI,CAAA,GAAG,QAAQ,CAAC,GAAG,CAAE,KAAI,CAAC;OAAA,EAAE,QACpE,CAAC,OAAO,CAAE,IAAG,CAAC,QAAQ,CAAC,YAAY,GAAE,SAAA,GAAG;cAAI,CAAA,GAAG,QAAQ,CAAC,GAAG,CAAE,KAAI,CAAC;OAAA,EAAE,QACpE,CAAC,OAAO,CAAE,IAAG,CAAC,QAAQ,CAAC,YAAY,GAAE,SAAA,GAAG;cAAI,CAAA,GAAG,QAAQ,CAAC,GAAG,CAAE,KAAI,CAAC;OAAA,EAAE,QACpE,CAAC,IAAI,CAAE,IAAG,CAAC,QAAQ,CAAC,sBAAsB,CAAE,MAAK,CAAC,QAAQ,CAAC,sBAAsB,CAAE,MAAK,CAAC,CAAA;CACjG,SAAI,CAAC,MAAM;CAAE,aAAO,CAAA,MAAM,CAAC,cAAc,CAAC,CAAA;AAC1C,CAD0C,SACtC,IAAI,KAAK,CAAC,MAAM,CAAC;CAAE,aAAO,CAAA,MAAM,CAAC,UAAU,CAAC,CAAA;AAChD,CADgD,WAC1C,EAAG,CAAA,MAAM,QAAQ,CAAC,yBAAyB,GAAE,SAAA,GAAG,CAAI;CACzD,WAAI,WAAW,KAAK,CAAC,GAAG,CAAC;CAAE,eAAO,IAAG,CAAA;AACrC,CADqC,WACjC,WAAW,KAAK,CAAC,GAAG,CAAC;CAAE,eAAO,IAAG,CAAA;AACrC,CADqC,eAC9B,YAAa,EAAA,IAAG,EAAA,KAAI,EAAA;OAC3B,EAAC,CAAA;CAEF,WAAO,CAAA,IAAI,CAAC,MAAM,CAAC,CAAA;KACnB;CAGD,WAAS,kBAAiB,CAAC;CAE1B,SAAI,CAAC,IAAI,MAAM;CAAE,cAAM;AAEnB,CAFmB,QAEnB,CAAA,MAAM,EAAG,GAAE,CAAA;AACf,CAAA,iBAAY,EAAE,SAAA,AAAC,KAAK,CAAE,CAAA,GAAG,AAAC;cAAI,CAAA,MAAM,CAAC,GAAG,CAAC,EAAG,MAAK;OAAA,EAAE,CAAA;AAE/C,CAAJ,QAAI,CAAA,WAAW,EAAG,CAAA,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC,CAAA,EAAI,EAAC,CAAC,EAAG,KAAI,CAAA,CAAG,KAAI,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAA;AACjE,CAAJ,QAAI,CAAA,IAAI,EAAG,CAAA,MAAM,KAAK,aAAa,GAAI,CAAA,MAAM,KAAK,aAAa,KAAK,CAAA,EAAI,OAAM,CAAA;AAE1E,CAAJ,QAAI,CAAA,GAAG,EAAG;AACT,CAAA,eAAQ,CAAE,CAAA,WAAW,EAAG,KAAI;AAC5B,CAAA,aAAM,CAAE,KAAI;AACZ,CAAA,YAAK,CAAE,OAAM;CAAA,MACb,CAAA;AAED,CAAA,SAAI,kBAAkB,CAAC,GAAG,CAAC,CAAA;KAC3B;CAGD,WAAS,eAAc,CAAC,IAAI,CAAE;CAC7B,WAAO,CAAA,SAAS,CAAC,KAAK,CAAE,KAAI,CAAE,MAAK,CAAC,CAAA;KACpC;AAED,CAFC,WAEQ,gBAAe,CAAC,IAAI,CAAE;CAC9B,WAAO,CAAA,SAAS,CAAC,MAAM,CAAE,KAAI,CAAE,MAAK,CAAC,CAAA;KACrC;AAGD,CAHC,WAGQ,UAAS,CAAC,IAAI,CAAE,CAAA,IAAI,CAAE,CAAA,IAAI,AAAa;SAAX,IAAG,6CAAG,MAAK;AAC3C,CAAJ,QAAI,CAAA,IAAI,EAAG,CAAA,GAAG,EAAG,OAAM,EAAG,MAAK,CAAA;AAC3B,CAAJ,QAAI,CAAA,GAAG,EAAG,CAAA,IAAI,UAAU,CAAC,IAAI,CAAE,KAAI,CAAE,KAAI,CAAC,CAAA;AACtC,CAAJ,QAAI,CAAA,MAAM,EAAG,CAAA,GAAG,IAAG,EAAG,EAAA,IAAG,KAAQ,MAAM,KAAK,aAAa,EAAA,IAAI,EAAA,IAAG,CAAE,CAAA;CAClE,SAAI,IAAI,WAAW,CAAC,IAAI,CAAC;CAAE,aAAO,CAAA,OAAO,QAAQ,CAAC,IAAI,CAAC,CAAA;AACvD,CADuD,SACnD,QAAQ,CAAC,MAAM,CAAC;CAAE,aAAO,CAAA,OAAO,QAAQ,CAAC,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAA;AAC1D,CAD0D,QAC1D,CAAA,KAAK,EAAG,CAAA,OAAO,MAAM,EAAE,CAAA;AAC3B,CAAA,aAAQ,CAAC,MAAM,CAAE,CAAA,KAAK,QAAQ,CAAC,CAAA;AAC3B,CAAJ,QAAI,CAAA,IAAI,EAAG,CAAA,IAAI,kBAAkB,CAAC,YAAY,CAAC,CAAA;CAC/C,WAAO,CAAA,GAAI,QAAO,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AAC3B,CAAA,WAAI,EAAI,IAAI,EAAA,IAAI,EAAA,OAAM,EAAG,MAAM,EAAE,SAAA,CAAC;kBAAO,IAAI,EAAA,aAAa,EAAA,IAAG;SAAE,EAAE,KAAK,EAAE,SAAA,GAAG;gBAAI,CAAA,EAAE,CAAC,GAAG,CAAC;SAAA,EAAE,GAAE,CAAC,CAAA;OAC3F,EAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,SAAA,IAAI,CAAI;AAC3B,CAAJ,UAAI,CAAA,OAAO,EAAG,CAAA,GAAG,gBAAgB,CAAC,IAAI,CAAC,CAAA;AACvC,CAAA,YAAK,QAAQ,CAAC,OAAO,CAAC,CAAA;AACtB,CAAA,sBAAe,CAAC,IAAI,KAAK,CAAC,CAAA;AAE1B,CAAA,WAAI,EAAE,CAAA;CACN,aAAO,QAAO,CAAA;OACd,EAAC,QAAQ,CAAC,IAAI,CAAC,CAAA;KAChB;CAID,WAAS,iBAAgB,CAAC,GAAG;CAC5B,WAAO,CAAA,QAAQ,CAAC,GAAG,CAAC,KAAK,EAAE,SAAA,IAAI;AAC1B,CAAJ,UAAI,CAAA,OAAO,EAAG,CAAA,WAAW,CAAC,IAAI,CAAC,CAAA;AAC3B,CAAJ,UAAI,CAAA,IAAI,EAAG,GAAE,CAAA;AACb,CAAA,cAAO,QAAQ,EAAE,SAAA,GAAG,CAAI;AACvB,CAAA,aAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAG,CAAA,GAAG,CAAC,CAAC,CAAC,CAAA;SACrB,EAAC,CAAA;CACF,aAAO,KAAI,CAAA;OACX,EAAE,CAAA;KACH;CAGD,WAAS,gBAAe,CAAC,IAAI,CAAE,CAAA,IAAI;;CAClC,SAAI,CAAC,IAAI;CAAE,aAAO,CAAA,OAAO,OAAO,CAAC,YAAY,CAAC,CAAA;AAC9C,CAD8C,eLrkBhD,CAAA,eAAe,aAAa,CKskBF,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CLtkBZ;CKskBxC,aAAI;CAAE,aAAI,ECtkBjB,CAAA,CAAC,MAAoB,QAAoC,CAAC,IAAK,KAAK,EAAC,CAAA,CDskBjD,GAAE,OCrkBuB,CDqkBc;CACzD,SAAI,CAAC,IAAI,CAAE;CACV,WAAI,CAAC,IAAI;CAAE,eAAO,CAAA,OAAO,OAAO,CAAC,YAAY,CAAC,CAAA;AAC9C,CAD8C,WAC1C,EAAG,CAAA,IAAI,QAAQ,CAAC,IAAI,CAAC,IAAG,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;OAC3C;AACD,CADC,WACM,CAAA,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,EAAE,SAAA,IAAI;cAAI,CAAA,WAAW,CAAC,IAAI,CAAC;OAAA,EAAE,KAAK,EAAC,SAAA,MAAM,CAAI;AAC5F,CAAA,aAAM,QAAQ,CAAC,CAAC,KAAK,CAAC,EAAC,EAAE,CAAC,CAAC,CAAC,CAAA;AAC5B,CAAA,aAAM,KAAK,EAAG,KAAI,CAAA;AAClB,CAAA,aAAM,MAAM,EAAG,KAAI,CAAA;CACnB,aAAO,OAAM,CAAA;OACb,EAAC,CAAA;KACF;CAGD,WAAS,YAAW,CAAC,IAAI,CAAE,CAAA,GAAG,CAAE;CAC/B,WAAO,CAAA,SAAS,CAAC,KAAK,CAAE,KAAI,CAAE,MAAK,CAAE,IAAG,CAAC,CAAA;KACzC;AAGD,CAHC,WAGQ,SAAQ,CAAC,GAAG,CAAE;CACtB,WAAO,CAAA,IAAI,CAAC,GAAG,CAAE,OAAM,CAAC,CAAA;KACxB;AAED,CAFC,WAEQ,SAAQ,CAAC,GAAG,CAAE;CACtB,WAAO,CAAA,IAAI,CAAC,GAAG,CAAE,OAAM,CAAC,CAAA;KACxB;AAED,CAFC,WAEQ,KAAI,CAAC,GAAG,CAAE,CAAA,IAAI;CACtB,WAAO,IAAI,QAAO,CAAC,SAAU,EAAE,CAAE,CAAA,EAAE;AAC9B,CAAJ,UAAI,CAAA,GAAG,EAAG,IAAI,eAAc,EAAE,CAAA;AAC9B,CAAA,UAAG,OAAO,IAAG,SAAA,CAAC;gBAAI,CAAA,EAAE,CAAC,GAAG,SAAS,CAAC;SAAA,CAAA,CAAA;AAClC,CAAA,UAAG,QAAQ,IAAG,SAAA,CAAC;gBAAI,CAAA,EAAE,CAAC,GAAI,MAAK,EAAC,UAAW,EAAA,IAAG,EAAA,WAAU,EAAC,CAAC;SAAA,CAAA,CAAA;AAC1D,CAAA,UAAG,KAAK,CAAC,KAAK,CAAE,IAAG,CAAC,CAAA;CACpB,WAAI,IAAI;AAAE,CAAA,YAAG,aAAa,EAAG,KAAI,CAAA;AACjC,CADiC,UAC9B,KAAK,EAAE,CAAA;OACV,CAAC,CAAA;KACF;CAED,WAAS,KAAI,CAAC,GAAG;CAChB,WAAO,IAAI,QAAO,CAAC,SAAU,EAAE,CAAE,CAAA,EAAE;AAC9B,CAAJ,UAAI,CAAA,GAAG,EAAG,IAAI,eAAc,EAAE,CAAA;AAC9B,CAAA,UAAG,OAAO,IAAG,SAAA,CAAC,CAAI;CACjB,aAAI,GAAG,OAAO,EAAG,IAAG;AAAE,CAAA,aAAE,CAAC,GAAG,CAAC,CAAA;;AACxB,CAAA,aAAE,CAAC,GAAI,MAAK,EAAC,UAAW,EAAA,IAAG,EAAA,WAAU,EAAC,CAAC,CAAA;CAAA,QAC5C,CAAA,CAAA;AACD,CAAA,UAAG,QAAQ,IAAG,SAAA,CAAC;gBAAI,CAAA,EAAE,CAAC,GAAI,MAAK,EAAC,UAAW,EAAA,IAAG,EAAA,WAAU,EAAC,CAAC;SAAA,CAAA,CAAA;AAC1D,CAAA,UAAG,KAAK,CAAC,MAAM,CAAE,IAAG,CAAC,CAAA;AACrB,CAAA,UAAG,KAAK,EAAE,CAAA;OACV,CAAC,CAAA;KAEF;CAGD,WAAS,MAAK,CAAC,OAAO,CAAE;CACvB,SAAI,CAAC,IAAI,MAAM;AAAE,CAAA,WAAI,WAAW,CAAC,MAAM,CAAC,CAAA;AACxC,CADwC,SACpC,MAAM,CAAC,OAAO,CAAC,CAAA;KACnB;AAGD,CAHC,WAGQ,KAAI,CAAC,EAAE,CAAE;AACb,CAAJ,QAAI,CAAA,EAAE,EAAG,CAAA,MAAM,KAAK,aAAa,CAAA;CACjC,SAAI,CAAC,EAAE;CAAE,aAAO,CAAA,OAAO,OAAO,CAAC,qBAAqB,CAAC,CAAA;AACrD,CADqD,WAC9C,CAAA,OAAO,YAAY,CAAC,EAAE,CAAE,GAAE,CAAC,CAAA;KAElC;AAGD,CAHC,WAGQ,aAAY,CAAC;CACrB,WAAO,CAAA,IAAI,GAAG,CG1oBhB,eAAe,sBAAsB,CH0oBpB,cAAW;;;;;;;;CI1oB5B,aAAO,CCAP,eAAe,wBDAS,ACAe,CCAvC,SAAS,IAAI,CAAE;CACT,gBAAO,IAAI;;;;CCDjB,qBP2oBqB,CAAA,OAAO,aAAa,CAAC,CAAC,CAAE,IAAG,CAAC,CO3oBzB;;uBCAxB,CAAA,IAAI,KAAK;;;;sBR4oBK,CAAA,KAAK,IAAI,EAAE,SAAA,AAAC,IAAI,CAAE,CAAA,CAAC,AAAC,CAAI;AAC9B,CAAJ,oBAAI,CAAA,IAAI,EAAG,CAAA,IAAI,EAAG,CAAA,IAAI,KAAK,EAAG,aAAY,CAAA;AACtC,CAAJ,oBAAI,CAAA,IAAI,EAAG,CAAA,CAAC,IAAK,EAAC,CAAA,CAAG,IAAG,EAAG,EAAC,CAAA;CAC5B,uBAAO;AAAC,CAAA,uBAAI,GAAK,IAAI,EAAA,IAAI,EAAA,KAAI,CAAE;AAAE,CAAA,wBAAK,CAAE,KAAI;AAAE,CAAA,2BAAQ,CAAE,EAAC,IAAI;CAAA,kBAAE,CAAA;iBAC/D,EAAC;;;;;COhpBL,qBPipBoB,CAAA,IAAI,gBAAgB,CAAC,IAAI,CAAE,EAAC,GAAG,CAAE,KAAI,CAAC,CAAC,COjpBnC;;sBCAxB,CAAA,IAAI,KAAK;;;;sBbAT,CAAA,eAAe,aAAa,CKkpBI,IAAI,CLlpBW;;;;AcA/C,CAAA,mBAAI,YAAY,ETmpBN,CAAA,MAAM,gBAAgB,EAAI,MAAM,EAAA,IAAI,EAAA,KAAI,EAAG,KAAK,EAAE,SAAA,MAAM,CAAI;AAClE,CAAA,uBAAM,OAAO,EAAG,OAAM,CAAA;AACtB,CAAA,uBAAM,SAAS,EAAG,CAAA,MAAM,KAAK,aAAa,CAAA;CAC1C,uBAAO,OAAM,CAAA;iBACb,ESvpBgC,ATupB/B,CSvpB+B;;;;CCApC,qBAAO,CAAA,IAAI,IAAI,EAAE,CAAA;;CJCmB,QAC/B,OFA4B,KAAI,CAAC,CAAC;OJspBpC,CGxpBqD,CHwpBpD,EAAE,CAAA;KACJ;CAED,WAAS,aAAY,CAAC;CACrB,WAAO,CAAA,IAAI,GAAG,CG5pBhB,eAAe,sBAAsB,CH4pBpB,cAAW;;;;;;;;;;;;CI5pB5B,aAAO,CCAP,eAAe,wBDAS,ACAe,CCAvC,SAAS,IAAI,CAAE;CACT,gBAAO,IAAI;;;;CCDjB,qBP6pBqB,CAAA,OAAO,aAAa,CAAC,CAAC,CAAE,IAAG,CAAC,CO7pBzB;;uBCAxB,CAAA,IAAI,KAAK;;;;sBR8pBK,CAAA,KAAK,IAAI,EAAE,SAAA,AAAC,IAAI,CAAE,CAAA,CAAC,AAAC,CAAI;AAC9B,CAAJ,oBAAI,CAAA,IAAI,EAAG,CAAA,IAAI,EAAG,CAAA,IAAI,KAAK,EAAG,aAAY,CAAA;AACtC,CAAJ,oBAAI,CAAA,IAAI,EAAG,CAAA,CAAC,IAAK,EAAC,CAAA,CAAG,IAAG,EAAG,EAAC,CAAA;CAC5B,uBAAO;AAAC,CAAA,uBAAI,GAAK,IAAI,EAAA,IAAI,EAAA,KAAI,CAAE;AAAE,CAAA,wBAAK,CAAE,EAAC;CAAA,kBAAC,CAAA;iBAC1C,EAAC;;;;sBAEc,CAAA,IAAI,gBAAgB;sBAApB,UAAoB,CAApB,IAAI,CAAiB,KAAI,CAAE,EAAC,GAAG,CAAE,KAAI,CAAC,CAAC;;;;;COpqB1D,2BAAwB;;sBCAxB,CAAA,IAAI,KAAK;;;;oBRoqBG,OAAkD,EAAC;;;;wBAE/C,GAAE;AACf,CAAA,2BAAY,EAAE,SAAA,AAAC,KAAK,CAAE,CAAA,GAAG,AAAC;wBAAI,CAAA,MAAM,CAAC,GAAG,CAAC,EAAG,MAAK;iBAAA,EAAE,CAAA;sBACxC,CAAA,MAAM,KAAK,aAAa;;;;uBAEtB,CAAA,OAAO,YAAY;uBAAnB,WAAmB,CAAnB,OAAO,CAAa,GAAE,CAAE,KAAI,CAAC;;;;;CO1qB7C,4BAAwB;;uBCAxB,CAAA,IAAI,KAAK;;;;ACAT,CAAA,mBAAI,YAAY,QAAoB,CAAA;;;;CCApC,qBAAO,CAAA,IAAI,IAAI,EAAE,CAAA;;CJCmB,QAC/B,OFA4B,KAAI,CAAC,CAAC;OJ0qBpC,CG5qBqD,CH4qBpD,EAAE,CAAA;KACJ;CAGD,WAAS,KAAI,CAAC,CAAE;AACf,CAAA,WAAM,KAAK,EAAG,GAAE,CAAA;AAChB,CAAA,WAAM,KAAK,MAAM,EAAG,QAAO,CAAA;AAC3B,CAAA,WAAM,YAAY,CAAC,IAAI,CAAC,CAAA;AACxB,CAAA,WAAM,WAAW,EAAE,CAAA;AACnB,CAAA,SAAI,MAAM,EAAE,CAAA;KACZ;AAED,CAFC,WAEQ,YAAW,CAAC,QAAQ,CAAE;AAC9B,CAAA,WAAM,KAAK,aAAa,EAAG,SAAQ,CAAA;KACnC;AAID,CAJC,aL1rBF,CAAA,eAAe,aAAa,CK8rBuC,EAAC,SAAA,CAAC;AAE/D,CAAJ,QAAI,CAAA,QAAQ,EAAG,IAAI,IAAG,CAAA;AACtB,CAAA,cAAS,EAAE,CAAA;CAEX,aAAS,UAAS,CAAC,CAAE;AACpB,CAAA,eAAQ,MAAM,EAAE,CAAA;AAChB,CAAA,eAAQ,IAAI,CAAC,OAAO,CAAE,EAAC,CAAC,CAAA;OACxB;AAED,CAFC,WAEM;CACN,iBAAU,CAAV,UAAW;AACV,CAAA,iBAAQ,QAAQ,EAAE,SAAA,AAAC,CAAC,CAAE,CAAA,CAAC,AAAC;CAAM,eAAI,CAAC,KAAK;AAAE,CAAA,cAAC,KAAK,EAAC,SAAA,GAAG;sBAAI,CAAA,GAAG,gBAAgB,CAAC,GAAG,CAAC;eAAA,EAAC,CAAA;CAAA,UAAE,EAAE,CAAA;AACrF,CAAA,kBAAS,EAAE,CAAA;AACX,CAAA,0BAAiB,EAAE,CAAA;SACnB;CACD,eAAQ,CAAR,UAAS,GAAG,CAAE;CAAE,eAAO,CAAA,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAA;SAAE;CAC1C,eAAQ,CAAR,UAAS,GAAG,CAAE;CAAE,eAAO,CAAA,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAA;SAAE;CAC1C,eAAQ,CAAR,UAAS,GAAG,CAAE,CAAA,GAAG,CAAE;AAAE,CAAA,iBAAQ,IAAI,CAAC,GAAG,CAAE,IAAG,CAAC,CAAA;SAAE;CAC7C,sBAAe,CAAf,UAAgB,CAAC,CAAE;AAClB,CAAA,iBAAQ,IAAI,CAAC,OAAO,CAAE,CAAA,QAAQ,IAAI,CAAC,OAAO,CAAC,CAAA,CAAG,EAAC,CAAC,CAAA;AAEhD,CAAA,0BAAiB,EAAE,CAAA;SACnB;CAAA,MACD,CAAA;KACD,EAAC,EAAE,CLvtB0C;;;;;+CKutB1C;CAEJ,aLztBD,CAAA,eAAe,aAAa,CKytB0B,EAAC,SAAA,CAAC;AAClD,CAAJ,QAAI,CAAA,QAAQ,EAAG,IAAI,IAAG,CAAA;CAEtB,WAAO;CACN,eAAQ,CAAR,UAAS,GAAG,CAAE,CAAA,GAAG,CAAE;AAClB,CAAA,iBAAQ,IAAI,CAAC,GAAG,CAAE,IAAG,CAAC,CAAA;AACtB,CAAA,0BAAiB,EAAE,CAAA;SACnB;CACD,eAAQ,CAAR,UAAS,GAAG,CAAE;CACb,aAAI,CAAC,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAE;AACvB,CAAA,mBAAQ,IAAI,CAAC,GAAG,CAAE,EAAC,CAAC,CAAA;AACpB,CAAA,4BAAiB,EAAE,CAAA;WACnB;AACD,CADC,eACM,CAAA,QAAQ,IAAI,CAAC,GAAG,CAAC,CAAA;SACxB;CACD,iBAAU,CAAV,UAAW,CAAE;AACZ,CAAA,iBAAQ,MAAM,EAAE,CAAA;AAChB,CAAA,0BAAiB,EAAE,CAAA;SACnB;CACD,mBAAY,CAAZ,UAAa,IAAI,CAAE;AAClB,CAAA,iBAAQ,QAAQ,CAAC,IAAI,CAAC,CAAA;SACtB;CAAA,MACD,CAAA;KACD,EAAC,EAAE,CLhvB0C;;;;yCKgvB1C;AAEJ,CAAA,QAAK,OAAO,MAAM,CAAC;AAClB,CAAA,gBAAW,CAAX,YAAW;AAAE,CAAA,kBAAa,CAAb,cAAa;AAAE,CAAA,qBAAgB,CAAhB,iBAAgB;AAAE,CAAA,oBAAe,CAAf,gBAAe;AAAE,CAAA,gBAAW,CAAX,YAAW;AAAE,CAAA,cAAS,CAAT,UAAS;AAAE,CAAA,UAAK,CAAL,MAAK;AAAE,CAAA,eAAU,CAAV,WAAU;AAAE,CAAA,eAAU,CAAV,WAAU;AACpH,CAAA,cAAS,CAAT,UAAS;AAAE,CAAA,mBAAc,CAAd,eAAc;AAAE,CAAA,SAAI,CAAJ,KAAI;AAAE,CAAA,SAAI,CAAJ,KAAI;AAAE,CAAA,SAAI,CAAE,GAAE;AAAE,CAAA,iBAAY,CAAZ,aAAY;AAAE,CAAA,iBAAY,CAAZ,aAAY;AAAE,CAAA,aAAQ,CAAR,SAAQ;AAAE,CAAA,aAAQ,CAAR,SAAQ;AAAE,CAAA,eAAU,CAAV,WAAU;AAAE,CAAA,SAAI,CAAJ,KAAI;AAAE,CAAA,gBAAW,CAAX,YAAW;AAC9H,CAAA,gBAAW,CAAX,YAAW;AAAE,CAAA,SAAI,CAAJ,KAAI;CAAA,IACjB,CAAC,CAAA;GAEF,EAAC,MAAM,EAAE,CAAA;CHxvBV,WAAwB;CLEnB,CDFoD,CAAC;AOA1D,CAAA,KAAM,IAAI,CAAC,aAAmB,GAAE,CAAC,CAAA;APAjC,CAAA,KAAM,SAAS,WAAoB,GAAE,CCArC,UAAS;;ACAL,CAAJ,IAAI,CAAA,YAAY,YAAoB,CAAC;AkBCrC,CAAA,MAAK,CAAC,SAAS,CAAE,SAAQ,CAAE,MAAK,CAAE,QAAO,CAAC,KAAK,EAAE,SAAA,CAAC;AACjD,CAAA,eAAY,CAAA;AAER,CAAJ,MAAI,CAAA,IAAI,EAAG,KAAI,CAAA;AAEX,CAAJ,MAAI,CAAA,OAAO,EAAG,IAAI,MAAK,CAAC,OAAO,CAAE,KAAI,CAAC,CAAA;AAClC,CAAJ,MAAI,CAAA,OAAO,EAAG,IAAI,MAAK,CAAC,OAAO,CAAE,QAAO,CAAC,CAAA;AAErC,CAAJ,MAAI,CAAA,EAAE,EAAG,CAAA,OAAO,UAAU,CAAA;AAC1B,CAAA,OAAI,YAAY,CAAC,EAAE,CAAE;AACpB,CAAA,OAAE,CAAO,CAAA,EAAE,iBAAiB;AAC5B,CAAA,sBAAiB,CAAG,CAAA,EAAE,wBAAwB,GAAI,CAAA,EAAE,qBAAqB;AACzE,CAAA,WAAM,CAAM,CAAA,EAAE,YAAY;AAC1B,CAAA,mBAAc,CAAI,UAAU,CAAE;AAAE,CAAA,WAAI,UAAU,EAAG,GAAE,CAAC;CAAC,aAAO,KAAI,CAAA;OAAE;AAClE,CAAA,cAAS,CAAK,UAAU,MAAM;;AAC7B,CAAA,aAAM,EAAG,CAAA,MAAM,GAAI,GAAE,CAAA;AACrB,CAAA,aAAM,KAAK,CAAC,MAAM,CAAC,QAAQ,EAAE,SAAA,GAAG,CAAI;CAAE,aAAI,MAAM,CAAC,GAAG,CAAC,GAAI,KAAI;AAAE,CAAA,sBAAU,CAAC,GAAG,CAAC,EAAG,CAAA,MAAM,CAAC,GAAG,CAAC,CAAA;CAAA,QAAE,EAAE,KAAI,CAAC,CAAA;CACrG,aAAO,KAAI,CAAA;OACX;CAAA,IACD,CAAC,CAAA;CAEF,OAAI,CAAC,QAAQ,mBAAmB;AAAE,CAAA,WAAM,eAAe,CAAC,QAAQ,CAAE,qBAAoB,CAAE,EACvF,GAAG,GAAE,SAAA,GAAG,CAAI;CACX,aAAI,0BAA0B,GAAI,SAAQ;AAAE,CAAA,mBAAQ,yBAAyB,EAAG,IAAG,CAAA;;AAC9E,CAAA,mBAAQ,sBAAsB,EAAG,IAAG,CAAA;CAAA,QACzC,CAAA,CACD,CAAC,CAAA;AACF,CADE,OACE,CAAC,QAAQ,kBAAkB;AAAE,CAAA,WAAM,eAAe,CAAC,QAAQ,CAAE,oBAAmB,CAAE,EACrF,GAAG,GAAE,SAAA,CAAC;gBAAI,CAAA,QAAQ,wBAAwB,GAAI,CAAA,QAAQ,qBAAqB;SAAA,CAAA,CAC3E,CAAC,CAAA;AAEE,CAFF,MAEE,CAAA,SAAS,EAAG,EAAC,CAAC,EAAE,wBAAwB,CAAA;CAE5C,WAAS,IAAG,CAAC,OAAO,CAAE,CAAA,MAAM,CAAE;CAC7B,SAAI,OAAO,GAAI,OAAM;CAAE,aAAO,CAAA,QAAQ,eAAe,CAAC,MAAM,CAAC,CAAA;AACzD,CADyD,QACzD,CAAA,EAAE,EAAG,CAAA,QAAQ,cAAc,CAAC,OAAO,CAAC,CAAA;CACxC,WAAO,CAAA,EAAE,UAAU,CAAC,MAAM,CAAC,CAAA;KAC3B;AAGG,CAHH,MAGG,CAAA,KAAK,EAAM,CAAA,QAAQ,cAAc,KAAK,CAAC,QAAQ,CAAC;AAChD,CAAA,eAAQ,EAAG,CAAA,QAAQ,iBAAiB,KAAK,CAAC,QAAQ,CAAC,CAAA;AAEnD,CAAJ,MAAI,CAAA,OAAO,EAAM,CAAA,KAAK,CAAC,aAAa,CAAC;AACpC,CAAA,iBAAU,EAAG,IAAI,IAAG,CAAC,KAAK,CAAC;AACxB,CAAA,gBAAS,EAAI,IAAI,IAAG,CAAC,KAAK,CAAC;AAC3B,CAAA,iBAAU,EAAG,IAAI,IAAG,CAAC,KAAK,CAAC,CAAA;AAE9B,CAAA,UAAO,eAAe,EAAE,CAAA;AACxB,CAAA,UAAO,OAAO,CAAC,UAAU,CAAC,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,CAAA;CAKhE,WAAS,YAAW,CAAC,MAAM,CAAE,CAAA,KAAK,CAAE,CAAA,IAAI,CAAE;AAGrC,CAAJ,QAAI,CAAA,CAAC,EAAG,CAAA,OAAO,QAAQ,EAAE,CAAA;CAEzB,SAAI,CAAC,IAAI,CAAE;AACV,CAAA,gBAAS,MAAM,OAAO,EAAG,OAAM,CAAA;CAC/B,WAAI,MAAM,EAAG,iBAAgB,CAAA,CAAG,IAAG;AAAE,CAAA,UAAC,EAAG,CAAA,IAAI,WAAW,CAAC,6BAA6B,CAAC,CAAA;CAAA,MACvF;AAEG,CAFH,QAEG,CAAA,KAAK,EAAG,CAAA,KAAK,GAAI,CAAA,EAAE,EAAG,EAAC,CAAA;AAEvB,CAAJ,QAAI,CAAA,KAAK,EAAG,CAAA,MAAM,EAAG,MAAK,CAAA;AAG1B,CAAA,cAAS,MAAM,SAAS,EAAG,CAAA,MAAM,EAAG,GAAE,CAAA,CAAG,KAAI,CAAA;AAE7C,CAAA,eAAU,MAAM,OAAO,EAAG,CAAA,MAAM,EAAG,KAAI,CAAA;AACvC,CAAA,eAAU,MAAM,MAAM,EAAI,CAAA,KAAK,EAAI,KAAI,CAAA;AAEvC,CAAA,aAAQ,MAAM,MAAM,EAAG,CAAA,KAAK,EAAG,GAAE,CAAA,CAAG,KAAI,CAAA;CAExC,SAAI,IAAI,CAAE;AACT,CAAA,gBAAS,MAAM,OAAO,EAAG,CAAA,MAAM,EAAG,KAAI,CAAA;CACtC,WAAI,aAAa;AAAE,CAAA,sBAAa,MAAM,OAAO,EAAG,CAAA,MAAM,EAAG,KAAI,CAAA;CAAA,MAC7D;AAAM,CAAA,gBAAS,EAAG,CAAA,IAAI,IAAI,CAAA;AAE3B,CAF2B,WAEpB,EAAC,CAAA;KAER;AAIG,CAJH,MAIG,CAAA,QAAQ,EAAG,CAAA,OAAO,OAAO,CAAC,GAAI,IAAG,CAAC,KAAK,CAAE;AAC5C,CAAA,UAAK,CAAI,QAAO;AAChB,CAAA,cAAS,CAAG,SAAQ;AACpB,CAAA,aAAQ,CAAG,MAAK;AAChB,CAAA,YAAO,CAAI,MAAK;CAAA,IAChB,CAAC,CAAC,CAAA;AAGC,CAAJ,MAAI,CAAA,EAAE,EAAG;AACR,CAAA,WAAM,CAAE,MAAK;AACb,CAAA,WAAM,CAAE,MAAK;CAAA,IACb,CAAA;AAEG,CAAJ,MAAI,CAAA,eAAe,IAAG,SAAA,CAAC;YAAI,CAAA,QAAQ,OAAO,CAAC,GAAI,IAAG,CAAC,KAAK,CAAE,EAAE,OAAO,CAAE,eAAc,CAAE,CAAC,CAAC;KAAA,CAAA,CAAA;AACnF,CAAJ,MAAI,CAAA,WAAW,EAAG,CAAA,eAAe,EAAE,CAAA;CACnC,IAAC;AAAA,CAAA,IAAC,GAAG,CAAE,IAAG,CAAE,IAAG,CAAE,KAAI,CAAC,QAAQ,EAAE,SAAA,IAAI;AAC/B,CAAJ,QAAI,CAAA,EAAE,EAAG,CAAA,WAAW,OAAO,CAAC,GAAI,IAAG,CAAC,QAAQ,CAAE,GAAE,CAAC,CAAC,CAAA;AAClD,CAAA,OAAE,OAAO,CAAC,GAAI,IAAG,CAAC,MAAM,CAAE,CAAA,IAAI,EAAG,IAAG,CAAC,CAAC,CAAA;AACtC,CAAA,OAAE,GAAG,CAAC,OAAO,GAAE,SAAA,CAAC;cAAI,CAAA,WAAW,CAAC,IAAI,EAAG,iBAAgB,CAAC;OAAA,EAAE,CAAA;KAC1D,EAAC,CAAA;AAEE,CAAJ,MAAI,CAAA,WAAW,EAAG,CAAA,eAAe,EAAE,CAAA;AAC/B,CAAJ,MAAI,CAAA,EAAE,EAAG,CAAA,WAAW,OAAO,CAAC,GAAI,IAAG,CAAC,QAAQ,CAAE,GAAE,CAAC,CAAC,CAAA;AAClD,CAAA,KAAE,OAAO,CAAC,GAAI,IAAG,CAAC,MAAM,CAAE,aAAY,CAAC,CAAC,CAAA;AACxC,CAAA,KAAE,GAAG,CAAC,OAAO,GAAE,SAAA,CAAC;AACf,CAAA,cAAS,IAAG,SAAA,CAAC,CAAI;AACZ,CAAJ,UAAI,CAAA,KAAK,EAAG,CAAA,EAAE,EAAG,EAAC,CAAA;AACd,CAAJ,UAAI,CAAA,KAAK,EAAG,CAAA,QAAQ,KAAK,YAAY,CAAA;AACjC,CAAJ,UAAI,CAAA,MAAM,EAAG,CAAA,KAAK,EAAG,MAAK,CAAA;AAC1B,CAAA,kBAAW,CAAC,MAAM,CAAE,EAAC,CAAE,KAAI,CAAC,CAAA;OAC5B,CAAA,CAAA;AACD,CAAA,cAAS,EAAE,CAAA;KACX,EAAC,CAAA;AACE,CAAJ,MAAI,CAAA,aAAa,CAAA;AACb,CAAJ,MAAI,CAAA,EAAE,EAAG,CAAA,WAAW,OAAO,CAAC,GAAI,IAAG,CAAC,QAAQ,CAAE,GAAE,CAAC,CAAC,CAAA;AAClD,CAAA,KAAE,OAAO,CAAC,GAAI,IAAG,CAAC,MAAM,CAAE,aAAY,CAAC,CAAC,CAAA;AACxC,CAAA,KAAE,GAAG,CAAC,OAAO,GAAE,SAAA,CAAC;AACf,CAAA,kBAAa,EAAG,IAAI,IAAG,CAAC,KAAK,CAAE;AAAC,CAAA,YAAK,CAAE,OAAM;AAAE,CAAA,aAAM,CAAE,OAAM;AAAE,CAAA,eAAQ,CAAE,OAAM;CAAA,MAAC,CAAC,CAAA;AACjF,CAAA,cAAS,OAAO,EAAE,CAAA;AAClB,CAAA,eAAU,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,SAAS,CAAC,CAAA;AAClD,CAAA,kBAAa,kBAAkB,EAAE,CAAA;AACjC,CAAA,cAAS,IAAG,SAAA,CAAC,CAAI;AACZ,CAAJ,UAAI,CAAA,KAAK,EAAG,CAAA,EAAE,EAAG,EAAC,CAAA;AACd,CAAJ,UAAI,CAAA,KAAK,EAAG,CAAA,MAAM,MAAM;AAAE,CAAA,iBAAM,EAAG,CAAA,MAAM,OAAO,CAAA;CAChD,WAAI,MAAM,EAAG,MAAK,CAAA,CAAG,MAAK;AAAE,CAAA,eAAM,EAAG,CAAA,KAAK,EAAG,MAAK,CAAA;AAClD,CADkD,kBACvC,CAAC,MAAM,CAAE,EAAC,CAAE,KAAI,CAAC,CAAA;OAC5B,CAAA,CAAA;AACD,CAAA,cAAS,EAAE,CAAA;AACX,CAAA,SAAI,WAAW,CAAC,yBAAyB,CAAC,CAAA;KAC1C,EAAC,CAAA;AAGE,CAAJ,MAAI,CAAA,WAAW,EAAG,CAAA,eAAe,EAAE,CAAA;AAC/B,CAAJ,MAAI,CAAA,EAAE,EAAG,CAAA,WAAW,OAAO,CAAC,GAAI,IAAG,CAAC,QAAQ,CAAE,GAAE,CAAC,CAAC,CAAA;AAClD,CAAA,KAAE,OAAO,CAAC,GAAI,IAAG,CAAC,MAAM,CAAE,QAAO,CAAC,CAAC,CAAA;AACnC,CAAA,KAAE,GAAG,CAAC,OAAO,GAAE,SAAA,CAAC,CAAI;AACnB,CAAA,cAAS,CAAC,QAAQ,CAAC,CAAA;KACnB,EAAC,CAAA;AACE,CAAJ,MAAI,CAAA,EAAE,EAAG,CAAA,WAAW,OAAO,CAAC,GAAI,IAAG,CAAC,QAAQ,CAAE,GAAE,CAAC,CAAC,CAAA;AAClD,CAAA,KAAE,OAAO,CAAC,GAAI,IAAG,CAAC,MAAM,CAAE,SAAQ,CAAC,CAAC,CAAA;AACpC,CAAA,KAAE,GAAG,CAAC,OAAO,GAAE,SAAA,CAAC,CAAI;AACf,CAAJ,QAAI,CAAA,CAAC,EAAG,EAAC,KAAK,aAAa,CAAA;AAC3B,CAAA,UAAK,aAAa,EAAG,EAAC,CAAA;AACtB,CAAA,YAAO,WAAW,CAAC,cAAc,CAAE,EAAC,CAAC,MAAM,EAAE,CAAA;CAC7C,SAAI,KAAK,kBAAkB;AAC1B,CAAA,WAAI,WAAW,EAAC,OAAQ,IAAA,CAAC,EAAC,IAAG,EAAC,IAAG,GAAA,WAAU,EAAC,CAAA;;AAE5C,CAAA,WAAI,WAAW,CAAC,CAAA,OAAQ,IAAA,CAAC,EAAC,IAAG,EAAC,IAAG,GAAA,WAAU,GAAC,uBAAsB,CAAC,CAAA;CAAA,IACpE,EAAC,CAAA;AAEE,CAAJ,MAAI,CAAA,WAAW,EAAG,CAAA,eAAe,EAAE,CAAA;AAC/B,CAAJ,MAAI,CAAA,EAAE,EAAG,CAAA,WAAW,OAAO,CAAC,GAAI,IAAG,CAAC,QAAQ,CAAE,GAAE,CAAC,CAAC,CAAA;AAClD,CAAA,KAAE,OAAO,CAAC,GAAI,IAAG,CAAC,MAAM,CAAE,SAAQ,CAAC,CAAC,CAAA;AACpC,CAAA,KAAE,GAAG,CAAC,OAAO,GAAE,SAAA,CAAC,CAAI;AACnB,CAAA,WAAM,WAAW,EAAE,CAAA;AACnB,CAAA,SAAI,WAAW,CAAC,cAAc,CAAC,CAAA;KAC/B,EAAC,CAAA;AACE,CAAJ,MAAI,CAAA,EAAE,EAAG,CAAA,WAAW,OAAO,CAAC,GAAI,IAAG,CAAC,QAAQ,CAAE,GAAE,CAAC,CAAC,CAAA;AAClD,CAAA,KAAE,OAAO,CAAC,GAAI,IAAG,CAAC,MAAM,CAAE,OAAM,CAAC,CAAC,CAAA;AAClC,CAAA,KAAE,GAAG,CAAC,OAAO,GAAE,SAAA,CAAC,CAAI;AACnB,CAAA,SAAI,MAAM,EAAE,CAAA;KACZ,EAAC,CAAA;AAGE,CAAJ,MAAI,CAAA,EAAE,EAAG,IAAI,IAAG,CAAC,KAAK,CAAC,CAAA;AACnB,CAAJ,MAAI,CAAA,cAAc,EAAG,CAAA,QAAQ,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,GAAI,IAAG,CAAC,KAAK,CAAE;AAAE,CAAA,cAAS,CAAE,OAAM;AAAE,CAAA,eAAU,CAAE,WAAU;CAAA,IAAE,CAAC,CAAC,CAAA;AAC9G,CAAA,iBAAc,YAAY,EAAG,eAAc,CAAA;CAI3C,WAAS,WAAU,CAAC,IAAI;AACnB,CAAJ,QAAI,CAAA,KAAK,EAAG,CAAA,WAAW,IAAI,EAAE,CAAA;AACzB,CAAJ,QAAI,CAAA,SAAS,EAAG,MAAK,CAAA;AACjB,CAAJ,QAAI,CAAA,MAAM,EAAG,MAAK,CAAA;CAClB,WAAO,IAAI,QAAO,EAAC,SAAA,EAAE;AAChB,CAAJ,UAAI,CAAA,QAAQ,IAAG,SAAA,CAAC,CAAI;AACnB,CAAA,kBAAS,EAAG,KAAI,CAAA;AAChB,CAAA,WAAE,EAAE,CAAA;SACJ,CAAA,CAAA;AACG,CAAJ,UAAI,CAAA,KAAK,IAAG,SAAA,CAAC;AACZ,CAAA,eAAM,EAAG,KAAI,CAAA;CACb,iBAAO,SAAA,CAAC;kBAAI,CAAA,qBAAqB,CAAC,IAAI,CAAC;WAAA,EAAA;SACvC,CAAA,CAAA;AACG,CAAJ,UAAI,CAAA,IAAI,IAAG,SAAA,GAAG,CAAI;CACjB,aAAI,SAAS;CAAE,kBAAM;AACjB,CADiB,YACjB,CAAA,KAAK,EAAG,CAAA,GAAG,EAAG,MAAK,CAAA;CACvB,aAAI,KAAK,EAAG,EAAC;AAAE,CAAA,gBAAK,EAAG,EAAC,CAAA;AACxB,CADwB,aACpB,CAAC,MAAM;AAAE,CAAA,gCAAqB,CAAC,IAAI,CAAC,CAAA;AACxC,CADwC,aACpC,CAAC,KAAK,CAAE,SAAQ,CAAE,MAAK,CAAC,CAAA;SAC5B,CAAA,CAAA;AACD,CAAA,4BAAqB,CAAC,IAAI,CAAC,CAAA;OAC3B,EAAC,CAAA;KAEF;AAKG,CAAJ,MAAI,CAAA,SAAS,EAAG,CAAA,IAAI,IAAI,CAAA;AACxB,CAAA,SAAM,SAAS,IAAG,SAAA,CAAC;YAAI,CAAA,SAAS,EAAE;KAAA,CAAA,CAAA;AAElC,CAAA,WAAQ,mBAAmB,IAAG,SAAA,CAAC,CAAI;AAC9B,CAAJ,QAAI,CAAA,IAAI,EAAG,CAAA,QAAQ,kBAAkB,GAAI,cAAa,CAAA;CAEtD,SAAI,CAAC,IAAI,CAAE;AACV,CAAA,oBAAa,OAAO,EAAE,CAAA;AACtB,CAAA,oBAAa,eAAe,EAAE,CAAA;AAC9B,CAAA,iBAAU,OAAO,CAAC,SAAS,CAAC,CAAA;AAC5B,CAAA,kBAAW,CAAC,MAAM,CAAE,OAAM,CAAC,CAAA;OAC3B;CAAA,IACD,CAAA,CAAA;AAGG,CAAJ,MAAI,CAAA,OAAO,EAAG,GAAE,CAAA;AAEhB,CAAA,UAAO,EAAG,EACT,MAAM,CAAE;AAEP,CAAA,YAAK,CAAE,UAAU,CAAE;AAClB,CAAA,aAAI,WAAW,CAAC,KAAK,CAAC,CAAA;SACtB;AAED,CAAA,WAAI,CAAE,UAAU,GAAG,CAAE;AACpB,CAAA,aAAI,YAAY,CAAC,GAAG,MAAM,GAAI,GAAE,CAAC,CAAA;SACjC;AAED,CAAA,iBAAU,CAAE,UAAU,IAAI,CAAE,CAAA,GAAG,CAAE;AAC5B,CAAJ,YAAI,CAAA,IAAI,EAAG,CAAA,IAAI,YAAY,EAAE,CAAA;AAC7B,CAAA,YAAG,EAAG,CAAA,GAAG,GAAI,GAAE,CAAA;CAEf,aAAI,CAAC,CAAC,IAAI,GAAI,QAAO,CAAC;CAAE,gBAAM,gCAA+B,CAAA;AAE7D,CAF6D,cAExD,EAAG,KAAI,CAAA;AACZ,CAAA,eAAM,KAAK,EAAG,CAAA,IAAI,EAAG,EAAE,SAAS,CAAE,CAAA,OAAO,CAAC,IAAI,CAAC,CAAE,CAAA;AACjD,CAAA,aAAI,KAAK,CAAC,GAAG,CAAC,CAAA;SAEd;AAED,CAAA,yBAAkB,CAAE,UAAU,IAAI,CAAE,CAAA,GAAG,CAAE;CACxC,aAAI,KAAK,GAAI,KAAI;AAAE,CAAA,eAAI,WAAW,CAAC,IAAI,CAAE,IAAG,CAAC,CAAA;CAAA,QAC7C;AAED,CAAA,SAAE,CAAE,UAAU,IAAI,CAAE,CAAA,WAAW,CAAE,CAAA,UAAU;AACtC,CAAJ,YAAI,CAAA,MAAM,IAAG,SAAA,CAAC;kBAAI,CAAA,IAAI,GAAG,CAAC,IAAI,CAAE,YAAW,CAAE,WAAU,CAAC;WAAA,CAAA,CAAA;CACxD,eAAO,CAAA,GAAI,QAAO,EAAE,SAAA,OAAO;kBAAI,CAAA,SAAS,CAAC,IAAI,CAAE,QAAO,CAAC;WAAA,EAAE,KAAK,EAAE,SAAA,CAAC;kBAAI,OAAM;WAAA,EAAE,KAAK,CAAC,WAAW,CAAC,MAAM,EAAE,MAAM,CAAC,UAAU,CAAC,CAAA;SACzH;AAED,CAAA,kBAAW,CAAE,UAAU,GAAG,CAAE;AAC3B,CAAA,aAAI,YAAY,CAAC,GAAG,CAAE;AACrB,CAAA,qBAAU,CAAI,QAAO;AACrB,CAAA,iBAAM,CAAK,OAAM;AACjB,CAAA,mBAAQ,CAAI,WAAU;AACtB,CAAA,gBAAK,CAAK,OAAM;AAChB,CAAA,iBAAM,CAAK,OAAM;AACjB,CAAA,mBAAQ,CAAI,SAAQ;CAAA,UAGpB,CAAC,CAAA;AAEF,CAAA,kBAAS,EAAE,CAAA;AACX,CAAA,aAAI,QAAQ,EAAG,GAAE,CAAA;AAEb,CAAJ,YAAI,CAAA,MAAM,EAAG,CAAA,GAAG,OAAO,GAAI,IAAG,CAAA;AAC9B,CAAA,YAAG,OAAO,EAAG,CAAA,GAAG,MAAM,EAAG,OAAM,CAAA;AAE/B,CAAA,mBAAU,EAAG,IAAI,IAAG,CAAC,KAAK,CAAC,CAAA;AAC3B,CAAA,kBAAS,eAAe,EAAE,CAAA;AAC1B,CAAA,kBAAS,OAAO,CAAC,UAAU,CAAC,CAAA;AAC5B,CAAA,mBAAU,UAAU,CAAC;AAAE,CAAA,mBAAQ,CAAG,SAAQ;AAAE,CAAA,oBAAS,CAAE,OAAM;AAAE,CAAA,mBAAQ,CAAE,OAAM;CAAA,UAAE,CAAC,CAAA;CAClF,aAAI,CAAC,QAAQ,kBAAkB;AAAE,CAAA,oBAAS,UAAU,CAAC;AAAE,CAAA,qBAAQ,CAAE,WAAU;AAAE,CAAA,qBAAQ,CAAE,SAAQ;AAAE,CAAA,mBAAM,CAAE,OAAM;AAAE,CAAA,kBAAK,CAAE,OAAM;CAAA,YAAE,CAAC,CAAA;AACjI,CADiI,mBACvH,UAAU,CAAC,GAAG,CAAC,CAAA;SACzB;AAED,CAAA,iBAAU,CAAE,UAAU,OAAO,CAAE,CAAA,SAAS,AAAkB;aAAhB,WAAU,6CAAG,IAAG;CACzD,aAAI,CAAC,OAAO;CAAE,gBAAM,yBAAwB,CAAA;AAC5C,CAD4C,aACxC,CAAC,SAAS;AAAE,CAAA,oBAAS,EAAG,CAAA,OAAO,MAAM,CAAC,IAAI,CAAC,OAAO,EAAG,IAAG,CAAA;AAC5D,CAD4D,gBACrD,EAAG,CAAA,OAAO,EAAG,QAAO,CAAA;AACvB,CAAJ,YAAI,CAAA,YAAY,EAAG,IAAI,IAAG,CAAC,KAAK,CAAE;AACjC,CAAA,mBAAQ,CAAI,MAAK;AACjB,CAAA,gBAAK,CAAK,mBAAkB;AAC5B,CAAA,qBAAU,CAAI,wCAAuC;AACrD,CAAA,0BAAe,CAAG,uBAAsB;AACxC,CAAA,oBAAS,CAAI,sCAAqC;AAClD,CAAA,uBAAY,CAAG,WAAU;AACzB,CAAA,oBAAS,CAAI,SAAQ;AACrB,CAAA,qBAAU,CAAI,QAAO;AACrB,CAAA,kBAAO,CAAK,IAAG;AACf,CAAA,mBAAQ,CAAI,WAAU;AACtB,CAAA,eAAI,CAAK,yBAAwB;AACjC,CAAA,cAAG,CAAM,MAAK;AACd,CAAA,iBAAM,CAAK,MAAK;AAChB,CAAA,gBAAK,CAAK,MAAK;CAAA,UACf,CAAC,CAAA;AACF,CAAA,kBAAS,OAAO,CAAC,YAAY,CAAC,OAAO,CAAC,GAAI,IAAG,CAAC,KAAK,CAAE,EAAC,MAAM,CAAE,KAAI,CAAC,CAAC,CAAC,OAAO,CAAC,GAAI,IAAG,CAAC,MAAM,CAAE,QAAO,CAAC,CAAC,CAAA;CACtG,eAAO,IAAI,QAAO,CAAC,SAAU,EAAE,CAAE,CAAA,EAAE;AAC9B,CAAJ,cAAI,CAAA,OAAO,EAAG,EAAC,CAAA;AACf,CAAA,qBAAU,CAAC,SAAU,KAAK,CAAE,CAAA,QAAQ,CAAE;AACrC,CAAA,oBAAO,EAAG,CAAA,KAAK,EAAG,WAAU,CAAA;CAC5B,iBAAI,OAAO,GAAI,EAAC,CAAE;AACjB,CAAA,sBAAO,EAAG,EAAC,CAAA;AACX,CAAA,sBAAO,CAAC,CAAC,GAAG,CAAC,IAAG,CAAC,IAAG,CAAC,CAAC,CAAA;AACtB,CAAA,uBAAQ,EAAE,CAAA;eACV;AACD,CADC,yBACW,MAAM,QAAQ,EAAG,QAAO,CAAA;aACpC,CAAC,MAAM,CAAC,SAAS,CAAC,IAAI,CAAC,UAAU,GAAE,SAAA,AAAC,KAAK,CAAE,CAAA,QAAQ,AAAC,CAAI;AACxD,CAAA,oBAAO,EAAG,CAAA,CAAC,EAAG,CAAA,KAAK,EAAG,WAAU,CAAA;CAChC,iBAAI,OAAO,GAAI,EAAC,CAAE;AACjB,CAAA,sBAAO,EAAG,EAAC,CAAA;AACX,CAAA,uBAAQ,EAAE,CAAA;AACV,CAAA,2BAAY,OAAO,EAAE,CAAA;eACrB;AACD,CADC,yBACW,MAAM,QAAQ,EAAG,QAAO,CAAA;aACpC,EAAC,KAAK,CAAC,EAAE,CAAE,GAAE,CAAC,CAAA;WAEf,CAAC,CAAA;SACF;AAED,CAAA,wBAAiB,CAAE,UAAU,OAAO;AAC/B,CAAJ,YAAI,CAAA,aAAa,EAAG,IAAI,IAAG,CAAC,KAAK,CAAE;AAClC,CAAA,mBAAQ,CAAI,MAAK;AACjB,CAAA,gBAAK,CAAK,yBAAwB;AAClC,CAAA,qBAAU,CAAI,oCAAmC;AAEjD,CAAA,mBAAQ,CAAI,WAAU;AACtB,CAAA,gBAAK,CAAK,KAAI;AACd,CAAA,iBAAM,CAAK,KAAI;AACf,CAAA,iBAAM,CAAK,MAAK;CAAA,UAEhB,CAAC,CAAA;AAEE,CAAJ,YAAI,CAAA,KAAK,EAAG,CAAA,OAAO,MAAM,EAAE,CAAA;AAC3B,CAAA,gBAAO,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,KAAK,QAAQ,CAAC,CAAA;AAChD,CAAA,cAAK,QAAQ,KAAK,EAAE,SAAA,CAAC;kBAAI,CAAA,SAAS,OAAO,CAAC,aAAa,CAAC,OAAO,CAAC,GAAI,IAAG,CAAC,KAAK,CAAE,EAAC,MAAM,CAAE,KAAI,CAAC,CAAC,CAAC,OAAO,CAAC,GAAI,IAAG,CAAC,MAAM,CAAE,QAAO,CAAC,CAAC;WAAA,EAAE,CAAA;CAClI,iBAAS,KAAI,CAAC,CAAE;AAAE,CAAA,gBAAK,OAAO,EAAE,CAAC;AAAC,CAAA,wBAAa,OAAO,EAAE,CAAA;WAAE;AAC1D,CAD0D,eACnD,KAAI,CAAA;SAEX;AAED,CAAA,kBAAW,CAAX,YAAW;AAAE,CAAA,iBAAU,CAAV,WAAU;AAEvB,CAAA,wBAAiB,CAAE,UAAU,GAAG,CAAE;AACjC,CAAA,uBAAc,YAAY,EAAG,CAAA,UAAU,EAAG,CAAA,IAAI,UAAU,CAAC,GAAG,CAAE,KAAI,CAAE,EAAC,CAAC,CAAA;SACtE;CAAA,MACD,CACD,CAAA;AAED,CAAA,UAAO,EAAG;AACT,CAAA,SAAI,CAAE;AAAE,CAAA,gBAAS,CAAE,CAAA,OAAO,OAAO;AAChC,CAAA,kBAAW,CAAE,UAAU,GAAG,CAAE;AAC3B,CAAA,aAAI,YAAY,CAAC,GAAG,CAAE;AACrB,CAAA,mBAAQ,CAAI,qBAAoB;AAChC,CAAA,gBAAK,CAAK,QAAO;CAAA,UACjB,CAAC,CAAA;AACF,CAAA,aAAI,UAAU,UAAU,YAAY,CAAC,GAAG,CAAC,CAAA;AACrC,CAAJ,YAAI,CAAA,EAAE,EAAG,IAAI,IAAG,CAAC,KAAK,CAAE,EACvB,OAAO,CAAE,OAAM,CACf,CAAC,CAAA;AACE,CAAJ,YAAI,CAAA,OAAO,EAAG,IAAI,IAAG,CAAC,KAAK,CAAC,CAAA;AAC5B,CAAA,aAAI,QAAQ,EAAG,QAAO,CAAA;AACtB,CAAA,mBAAU,OAAO,CAAC,EAAE,CAAC,OAAO,CAAC,OAAO,CAAC,CAAA;SACrC;AACD,CAAA,YAAK,CAAE,UAAU,IAAI,CAAE,CAAA,GAAG,CAAE;AAC3B,CAAA,aAAI,QAAQ,YAAY,GAAI,KAAI,CAAA;SAChC;CAAA,MACD;AAED,CAAA,UAAK,CAAE;AAAE,CAAA,gBAAS,CAAE,CAAA,OAAO,OAAO;AACjC,CAAA,kBAAW,CAAE,UAAU,GAAG;;AAEzB,CAAA,aAAI,YAAY,CAAC,GAAG,CAAE;AACrB,CAAA,gBAAK,CAAK,wBAAuB;AAEjC,CAAA,qBAAU,CAAI,oCAAmC;AACjD,CAAA,mBAAQ,CAAI,SAAQ;CAAA,UACpB,CAAC,CAAA;AACF,CAAA,aAAI,UAAU,UAAU,YAAY,CAAC,GAAG,CAAC,CAAA;AAEzC,CAAA,aAAI,kBAAkB,EAAG,CAAA,IAAI,iBAAiB,CAAC,CAAC,CAAC,CAAC,GAAE,CAAC,CAAC,CAAA;AACtD,CAAA,aAAI,WAAW,EAAG,CAAA,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC,GAAE,CAAC,CAAC,CAAA;AAE5C,CAAA,aAAI,GAAG,CAAC,MAAM,CAAC,KAAK,EAAC,SAAA,CAAC;kBAAI,CAAA,cAAa,EAAE;WAAA,EAAC,MAAM,EAAE,CAAA;SAClD;AAED,CAAA,yBAAkB,CAAE;AACnB,CAAA,iBAAQ,CAAE,UAAU,IAAI,AAAoB;;uBhBxYhD,CAAA,eAAe,aAAa,2CgBwYkB,GAAE,ChBxYD;qBiBA/C,CAAA,CAAC,iBAAuD,CAAC,IAAK,KAAK,EAAC,CAAA,CDwY/B,MAAK,QCvYG;ADwYxC,CAAA,eAAI,QAAQ,QAAQ,UAAU,CAAC;AAC9B,CAAA,uBAAU,CAAK,CAAA,GAAG,EAAG,qBAAoB,EAAG,oBAAmB;AAC/D,CAAA,sBAAS,CAAI,CAAA,CAAC,GAAG,EAAG,qBAAoB,EAAG,oBAAmB,CAAC,EAAG,mBAAkB;CAAA,YACpF,CAAC,CAAA;AACF,CAAA,eAAI,EAAG,CAAA,CAAC,IAAI,CAAA,EAAI,CAAA,IAAI,MAAM,CAAC,OAAO,CAAC,CAAA,CAAG,GAAE,EAAG,CAAA,GAAG,EAAE,KAAI,CAAA,CAAE,IAAG,CAAA;AACzD,CAAA,eAAI,SAAS,YAAY,EAAG,KAAI,CAAA;AAChC,CAAA,eAAI,QAAQ,eAAe,EAAE,CAAA;WAE7B;AAED,CAAA,oBAAW,CAAE,UAAU,IAAI,CAAE,CAAA,GAAG;AAC/B,CAAA,eAAI,GAAI,KAAI,CAAA;AACZ,CAAA,cAAG,EAAG,CAAA,IAAI,YAAY,CAAC,GAAG,CAAE,EAC3B,MAAM,CAAE,GAAE,CACV,CAAC,CAAA;AAEE,CAAJ,cAAI,CAAA,MAAM,EAAG,CAAA,IAAI,OAAO,CAAA;AACpB,CAAJ,cAAI,CAAA,EAAE,EAAG,EAAC;AAAE,CAAA,iBAAE,EAAG,EAAC,CAAA;AACd,CAAJ,cAAI,CAAA,EAAE,EAAG,CAAA,IAAI,QAAQ,CAAA;AACjB,CAAJ,cAAI,CAAA,MAAM,EAAG,CAAA,GAAG,OAAO,CAAA;CACvB,sBAA2B,EAAC,KAAK,CAAE,MAAK,CAAC;CAApC,sBAAO;CAAE,wBAAS,YAAkB;CACzC,sBAAsB,GAAC,SAAA,CAAC;oBAAI,CAAA,OAAO,EAAG,KAAI;aAAA,IAAE,SAAA,CAAC;oBAAI,CAAA,SAAS,EAAG,KAAI;aAAA,EAAC;CAA7D,oBAAK;CAAE,qBAAM,YAAgD;AAClE,CAAA,eAAI,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;AAEtB,CAAJ,cAAI,CAAA,CAAC,EAAG,CAAA,UAAU,EAAE,SAAA,AAAC,KAAK,CAAE,CAAA,QAAQ,CAAE,CAAA,KAAK,AAAC;CAC3C,iBAAI,OAAO;CAAE,qBAAO,CAAA,QAAQ,EAAE,CAAA;AAC9B,CAD8B,iBAC1B,SAAS,CAAE;AAGd,CAAA,iBAAE,EAAG,OAAM,CAAA;eACX;AACD,CADC,oBACM,KAAK,EAAG,OAAM,CAAA,EAAI,CAAA,EAAE,EAAG,GAAE,CAAE;AAC7B,CAAJ,kBAAI,CAAA,GAAG,EAAG,CAAA,IAAI,CAAC,EAAE,CAAC,CAAA;CAClB,mBAAI,CAAC,GAAG;CAAE,uBAAO,CAAA,QAAQ,EAAE,CAAA;AAC3B,CAD2B,mBACvB,GAAG,GAAI,KAAI,CAAA,EAAI,CAAA,QAAQ,KAAK,CAAC,IAAI,MAAM,CAAC,EAAE,CAAC,CAAC,CAAE;AAC7C,CAAJ,oBAAI,CAAA,GAAG,EAAG,CAAA,IAAI,QAAQ,CAAC,GAAG,CAAE,GAAE,CAAC,CAAA;AAC3B,CAAJ,oBAAI,CAAA,IAAI,EAAG,CAAA,IAAI,MAAM,CAAC,EAAE,EAAC,EAAC,CAAE,IAAG,CAAC,KAAK,EAAE,CAAA;CACvC,qBAAI,SAAS,CAAE;AACV,CAAJ,sBAAI,CAAA,GAAG,EAAG,CAAA,EAAE,OAAO,CAAC,GAAI,IAAG,CAAC,KAAK,CAAE;AAAE,CAAA,2BAAM,CAAE,SAAQ;AAAE,CAAA,0BAAK,CAAE,SAAQ;CAAA,oBAAE,CAAC,CAAC,CAAA;CAC1E,oBAAC;AAAA,CAAA,qBAAC,SAAA,AAAC,GAAG,CAAE,CAAA,IAAI,AAAC;4BAAI,CAAA,MAAM,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,SAAA,GAAG,CAAI;AAAC,CAAA,0BAAG,IAAI,EAAG,IAAG,CAAA;uBAAC,EAAE,MAAM,CAAC,GAAG,CAAC;qBAAA,EAAC,CAAC,GAAG,CAAE,KAAI,CAAC,CAAA;mBAClG,KAAM;AACF,CAAJ,sBAAI,CAAA,GAAG,EAAG,CAAA,EAAE,OAAO,CAAC,GAAI,IAAG,CAAC,QAAQ,CAAE;AAAE,CAAA,2BAAM,CAAE,SAAQ;AAAE,CAAA,0BAAK,CAAE,SAAQ;CAAA,oBAAE,CAAC,CAAC,CAAA;AAC7E,CAAA,sBAAG,KAAK,EAAG,gBAAe,CAAA;CAC1B,oBAAC;AAAA,CAAA,qBAAC,SAAA,AAAC,GAAG,CAAE,CAAA,IAAI,AAAC;4BAAI,CAAA,MAAM,eAAe,CAAC,IAAI,CAAC,KAAK,EAAE,SAAA,GAAG,CAAI;AAAC,CAAA,0BAAG,KAAK,EAAG,IAAG,CAAA;uBAAC,EAAE,MAAM,CAAC,GAAG,CAAC;qBAAA,EAAC,CAAC,GAAG,CAAE,KAAI,CAAC,CAAA;mBAQnG;AACD,CADC,mBACC,GAAI,CAAA,GAAG,EAAG,GAAE,CAAA;AACd,CAAA,mBAAE,EAAG,IAAG,CAAA;iBACR,KAAM,KAAI,GAAG,GAAI,SAAQ;AAAE,CAAA,mBAAE,OAAO,CAAC,GAAI,IAAG,CAAC,MAAM,CAAE,IAAG,CAAC,CAAC,CAAA;AAC3D,CAD2D,mBACvD,EAAE,EAAE,CAAA,EAAI,OAAM;CAAE,uBAAO,CAAA,QAAQ,EAAE,CAAA;CAAA,cACrC;CAAA,YACD,EAAC,CAAA;AAEF,CAAA,YAAC,MAAM,EAAG,MAAK,CAAA;AACf,CAAA,YAAC,OAAO,EAAG,OAAM,CAAA;CACjB,iBAAO,EAAC,CAAA;WACR;CAAA,QACD;AAED,CAAA,uBAAgB,CAAE,UAAU,GAAG,CAAE;AAChC,CAAA,aAAI,YAAY,CAAC,GAAG,CAAE;AACrB,CAAA,qBAAU,CAAI,qBAAoB;AAClC,CAAA,oBAAS,CAAI,qCAAoC;AACjD,CAAA,uBAAY,CAAG,UAAS;AACxB,CAAA,gBAAK,CAAK,iCAAgC;AAC1C,CAAA,iBAAM,CAAK,iCAAgC;AAC3C,CAAA,mBAAQ,CAAI,OAAM;AAClB,CAAA,qBAAU,CAAI,QAAO;AACrB,CAAA,qBAAU,CAAI,OAAM;AACpB,CAAA,kBAAO,CAAK,cAAa;AACzB,CAAA,qBAAU,CAAI,SAAQ;AACtB,CAAA,mBAAQ,CAAI,WAAU;AACtB,CAAA,iBAAM,CAAK,SAAQ;AACnB,CAAA,eAAI,CAAK,SAAQ;AACjB,CAAA,iBAAM,CAAK,CAAA,GAAG,EAAE,GAAI,KAAI;CAAA,UAExB,CAAC,CAAA;AACE,CAAJ,YAAI,CAAA,EAAE,EAAG,IAAI,IAAG,CAAC,KAAK,CAAE,IAAG,CAAC,CAAA;AAC5B,CAAA,aAAI,QAAQ,QAAQ,EAAG,GAAE,CAAA;AACzB,CAAA,mBAAU,OAAO,CAAC,EAAE,CAAC,CAAA;AAEjB,CAAJ,YAAI,CAAA,QAAQ,EAAG,CAAA,EAAE,OAAO,CAAC,GAAI,IAAG,CAAC,KAAK,CAAE;AACvC,CAAA,kBAAO,CAAK,eAAc;AAC1B,CAAA,sBAAW,CAAI,KAAI;AAEnB,CAAA,oBAAS,CAAI,QAAO;AACpB,CAAA,wBAAa,CAAG,MAAK;AACrB,CAAA,gBAAK,CAAK,MAAK;AACf,CAAA,iBAAM,CAAK,OAAM;CAAA,UAGjB,CAAC,CAAC,CAAA;AACC,CAAJ,YAAI,CAAA,OAAO,EAAG,CAAA,EAAE,OAAO,CAAC,GAAI,IAAG,CAAC,KAAK,CAAE;AACtC,CAAA,kBAAO,CAAK,eAAc;AAC1B,CAAA,gBAAK,CAAK,OAAM;AAChB,CAAA,iBAAM,CAAK,OAAM;CAAA,UAEjB,CAAC,CAAC,OAAO,CAAC,GAAI,IAAG,CAAC,KAAK,CAAE,EACzB,MAAM,CAAK,IAAG,CACd,CAAC,CAAC,CAAA;AAEC,CAAJ,YAAI,CAAA,EAAE,EAAG;AAAE,CAAA,oBAAS,CAAE,CAAA,IAAI,mBAAmB;AAC5C,CAAA,aAAE,CAAM,GAAE;AACV,CAAA,mBAAQ,CAAI,SAAQ;AACpB,CAAA,kBAAO,CAAK,QAAO;CAAA,UACnB,CAAA;CAED,eAAO,GAAE,CAAA;SACT;AAED,CAAA,oBAAa,CAAE,UAAU,GAAG,CAAE;AAEzB,CAAJ,YAAI,CAAA,EAAE,EAAG,IAAI,IAAG,CAAC,KAAK,CAAE;AACvB,CAAA,iBAAM,CAAK,OAAM;AACjB,CAAA,gBAAK,CAAK,OAAM;AAChB,CAAA,iBAAM,CAAK,CAAA,GAAG,EAAE,GAAI,KAAI;CAAA,UACxB,CAAC,CAAA;AAEF,CAAA,mBAAU,OAAO,CAAC,EAAE,CAAC,CAAA;CACrB,eAAO,GAAE,CAAA;SAET;AAED,CAAA,sBAAe,CAAE,UAAU,IAAI,AAAoB;;qBhB1gBtD,CAAA,eAAe,aAAa,2CgB0gBwB,GAAE,ChB1gBP;mBiBA/C,CAAA,CAAC,iBAAuD,CAAC,IAAK,KAAK,EAAC,CAAA,CD0gBzB,MAAK,QCzgBH;AD2gBrC,CAAJ,YAAI,CAAA,KAAK,EAAG,CAAA,OAAO,MAAM,EAAE,CAAA;AACvB,CAAJ,YAAI,CAAA,OAAO,EAAG,MAAK,CAAA;AACf,CAAJ,YAAI,CAAA,OAAO,CAAA;AACP,CAAJ,YAAI,CAAA,UAAU,EAAG,EAAC,KAAK,CAAA;AACnB,CAAJ,YAAI,CAAA,GAAG,EAAG,GAAE,CAAA;AAGR,CAAJ,YAAI,CAAA,EAAE,EAAG,IAAI,IAAG,CAAC,KAAK,CAAE;AACvB,CAAA,mBAAQ,CAAI,WAAU;AACtB,CAAA,eAAI,CAAK,8BAA6B;AACtC,CAAA,gBAAK,CAAK,MAAK;AAEf,CAAA,cAAG,CAAM,KAAI;AACb,CAAA,oBAAS,CAAI,CAAA,GAAG,EAAG,mCAAkC,EAAG,mCAAkC;AAC1F,CAAA,uBAAY,CAAG,UAAS;AACxB,CAAA,qBAAU,CAAI,CAAA,GAAG,EAAG,2BAA0B,EAAG,2BAA0B;AAC3E,CAAA,kBAAO,CAAK,QAAO;AACnB,CAAA,oBAAS,CAAI,CAAA,IAAI,OAAO,EAAG,EAAC,CAAA,CAAG,SAAQ,EAAG,SAAQ;AAClD,CAAA,oBAAS,CAAI,MAAK;CAAA,UAElB,CAAC,CAAA;CACF,aAAI,CAAC,GAAG,CAAE;CACT,eAAI,IAAI,QAAQ,OAAO;AAAE,CAAA,iBAAI,QAAQ,OAAO,OAAO,EAAE,CAAA;AACrD,CADqD,eACjD,QAAQ,OAAO,EAAG,GAAE,CAAA;WACxB,KAAM;CACN,eAAI,IAAI,QAAQ,WAAW;AAAE,CAAA,iBAAI,QAAQ,WAAW,OAAO,EAAE,CAAA;AAC7D,CAD6D,eACzD,QAAQ,WAAW,EAAG,GAAE,CAAA;WAC5B;AAED,CAFC,aAEG,QAAQ,CAAC,SAAU,GAAG;;CACzB,eAAI,CAAC,CAAC,OAAO,GAAI,IAAG,CAAC;AAAE,CAAA,gBAAG,MAAM,EAAG,CAAA,GAAG,KAAK,CAAA;AACvC,CADuC,cACvC,CAAA,EAAE,EAAG,IAAI,IAAG,CAAC,QAAQ,CAAE;AAC1B,CAAA,oBAAO,CAAK,QAAO;AACnB,CAAA,qBAAQ,CAAI,QAAO;AACnB,CAAA,sBAAS,CAAI,CAAA,yCAAyC,EAAG,EAAC,GAAG,EAAG,sBAAqB,EAAG,oBAAmB,CAAC,CAAA,CAAG,wBAAuB;AACtI,CAAA,uBAAU,CAAI,CAAA,GAAG,EAAG,qBAAoB,EAAG,oBAAmB;AAC9D,CAAA,kBAAK,CAAK,QAAO;AACjB,CAAA,yBAAY,CAAG,WAAU;AACzB,CAAA,kBAAK,CAAK,OAAM;AAChB,CAAA,mBAAM,CAAK,QAAO;AAClB,CAAA,mBAAM,CAAK,QAAO;AAClB,CAAA,uBAAU,CAAI,gCAA+B;CAAA,YAC7C,CAAC,CAAA;AACF,CAAA,aAAE,SAAS,EAAG,EAAC,CAAC,GAAG,SAAS,CAAA;AAC5B,CAAA,aAAE,OAAO,CAAC,GAAI,IAAG,CAAC,MAAM,CAAE,CAAA,GAAG,KAAK,CAAC,CAAC,CAAA;AACpC,CAAA,aAAE,QAAQ,EAAG,CAAA,EAAE,YAAY,IAAG,SAAA,CAAC,CAAI;AAClC,CAAA,oBAAO,KAAK,EAAE,CAAA;AACd,CAAA,eAAE,UAAU,CAAC,CAAE,UAAU,CAAE,CAAA,GAAG,EAAG,wBAAuB,EAAG,wBAAuB,CAAE,CAAC,CAAA;AACjF,CAAJ,gBAAI,CAAA,GAAG,EAAG,CAAA,GAAG,CAAC,UAAU,CAAC,CAAA;CACzB,iBAAI,GAAG;AAAE,CAAA,kBAAG,KAAK,EAAE,CAAA;AACnB,CADmB,uBACT,EAAG,MAAK,CAAA;aAClB,CAAA,CAAA;AACD,CAAA,aAAE,OAAO,EAAG,CAAA,EAAE,WAAW,IAAG,SAAA,CAAC,CAAI;AAChC,CAAA,eAAE,UAAU,CAAC,CAAE,UAAU,CAAE,CAAA,GAAG,EAAG,qBAAoB,EAAG,oBAAmB,CAAE,CAAC,CAAA;AAC1E,CAAJ,gBAAI,CAAA,GAAG,EAAG,CAAA,GAAG,CAAC,UAAU,CAAC,CAAA;CACzB,iBAAI,GAAG;AAAE,CAAA,kBAAG,KAAK,EAAE,CAAA;CAAA,YAEnB,CAAA,CAAA;AACD,CAAA,aAAE,QAAQ,IAAG,SAAA,CAAC,CAAI;AACjB,CAAA,oBAAO,KAAK,EAAE,CAAA;AACd,CAAA,oBAAO,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;AACb,CAAA,oBAAO,EAAG,KAAI,CAAA;AACd,CAAA,kBAAK,QAAQ,CAAC,GAAG,MAAM,CAAC,CAAA;CACxB,iBAAI,CAAC,GAAG;AAAE,CAAA,qBAAO,cAAY,OAAO,CAAA;;AAC/B,CAAA,qBAAO,cAAY,WAAW,CAAA;AACnC,CADmC,eACjC,OAAO,EAAE,CAAA;aACX,CAAA,CAAA;AACD,CAAA,aAAE,OAAO,CAAC,EAAE,CAAC,CAAA;CACb,eAAI,CAAC,GAAG,SAAS;AAAM,CAAJ,gBAAI,CAAA,KAAK,EAAG,CAAA,GAAG,KAAK,CAAC,EAAE,CAAC,CAAA,CAAG,EAAC,CAAA;CAAA,UAC/C,CAAE,KAAI,CAAC,CAAA;AAER,CAAA,aAAI,GAAG,CAAC,IAAI,GAAE,SAAA,MAAM;kBAAI,CAAA,SAAS,CAAC,MAAM,CAAE,EAAC,CAAC,CAAC;WAAA,EAAE,CAAA;AAC/C,CAAA,aAAI,GAAG,CAAC,MAAM,GAAE,SAAA,MAAM;kBAAI,CAAA,SAAS,CAAC,MAAM,CAAE,EAAC,CAAC,CAAC;WAAA,EAAE,CAAA;AACjD,CAAA,aAAI,GAAG,CAAC,MAAM,GAAE,SAAA,MAAM;kBAAI,CAAA,SAAS,CAAC,MAAM,CAAE,EAAC,EAAE,CAAC;WAAA,EAAE,CAAA;AAClD,CAAA,aAAI,GAAG,CAAC,OAAO,GAAE,SAAA,MAAM;kBAAI,CAAA,SAAS,CAAC,MAAM,CAAE,EAAC,EAAE,CAAC;WAAA,EAAE,CAAA;AACnD,CAAA,aAAI,GAAG,CAAC,OAAO,CAAE,WAAU,CAAC,CAAA;CAE5B,iBAAS,UAAS,CAAC,MAAM,CAAE,CAAA,CAAC,CAAE;CAC7B,eAAI,OAAO;CAAE,oBAAM;AACf,CADe,cACf,CAAA,EAAE,EAAG,WAAU,CAAA;AACf,CAAJ,cAAI,CAAA,EAAE,EAAG,CAAA,EAAE,EAAG,EAAC,CAAA;AACX,CAAJ,cAAI,CAAA,IAAI,EAAG,CAAA,GAAG,OAAO,EAAG,EAAC,CAAA;CAEzB,eAAI,EAAE,EAAG,EAAC;AAAE,CAAA,eAAE,EAAG,CAAA,CAAC,EAAG,EAAC,CAAA,CAAG,EAAC,EAAG,KAAI,CAAA;gBAC5B,KAAI,EAAE,EAAG,EAAC;AAAE,CAAA,eAAE,EAAG,CAAA,EAAE,GAAI,EAAC,CAAA,CAAG,KAAI,EAAG,EAAC,CAAA;gBACnC,KAAI,EAAE,EAAG,KAAI;AAAE,CAAA,eAAE,EAAG,CAAA,EAAE,GAAI,KAAI,CAAA,CAAG,EAAC,EAAG,KAAI,CAAA;AAC9C,CAD8C,cAC3C,CAAC,EAAE,CAAC,MAAM,EAAE,CAAA;AACf,CAAA,kBAAO,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;WAC/B;AACD,CADC,iBACQ,WAAU,CAAC,MAAM,CAAE;CAC3B,eAAI,OAAO;CAAE,oBAAM;AACnB,CADmB,eACf,UAAU,GAAI,EAAC;CAAE,mBAAO,CAAA,GAAG,CAAC,UAAU,CAAC,MAAM,EAAE,CAAA;AACnD,CADmD,kBAC5C,MAAM,CAAC,GAAG,CAAC,KAAK,CAAC,MAAM,CAAC,CAAA;WAC/B;AAED,CAFC,mBAES,OAAO,CAAC,EAAE,CAAC,CAAA;CAGrB,eAAO,CAAA,KAAK,QAAQ,CAAA;SAEpB;AAGD,CAAA,iBAAU,CAAE,UAAU,GAAG,CAAE;AACtB,CAAJ,YAAI,CAAA,GAAG,EAAG,CAAA,GAAG,IAAI,IAAG,MAAO,EAAA,CAAA,GAAG,IAAI,EAAA,IAAG,GAAG,OAAM,CAAA;AAC9C,CAAA,mBAAU,MAAM,gBAAgB,EAAG,IAAG,CAAA;AACtC,CAAA,mBAAU,MAAM,eAAe,EAAG,QAAO,CAAA;SACzC;AAED,CAAA,kBAAW,CAAE,UAAU,IAAI;AACtB,CAAJ,YAAI,CAAA,EAAE,EAAG,CAAA,IAAI,WAAW,CAAA;AACxB,CAAA,WAAE,eAAe,EAAE,CAAA;AACnB,CAAA,aAAI,QAAQ,EAAE,SAAA,GAAG,CAAI;AACpB,CAAA,eAAI,YAAY,CAAC,GAAG,CAAE;AACrB,CAAA,iBAAI,CAAG,KAAI;AACX,CAAA,kBAAK,CAAG,KAAI;AACZ,CAAA,gBAAG,CAAI,KAAI;AACX,CAAA,mBAAM,CAAG,KAAI;CAAA,YACb,CAAC,CAAA;AACE,CAAJ,cAAI,CAAA,GAAG,EAAG,CAAA,QAAQ,CAAC,GAAG,IAAI,CAAC,CAAA,EAAI,CAAA,QAAQ,CAAC,GAAG,OAAO,CAAC,CAAA,EAAI,EAAC,CAAA;AACpD,CAAJ,cAAI,CAAA,MAAM,EAAG,CAAA,GAAG,OAAO,EAAG,CAAA,GAAG,OAAO,KAAM,GAAG,EAAC,IAAG,GAAA,IAAG,CAAA,CAAA;AAChD,CAAJ,cAAI,CAAA,GAAG,EAAG,IAAI,IAAG,CAAC,KAAK,CAAE;AACxB,CAAA,qBAAQ,CAAI,WAAU;AACtB,CAAA,iBAAI,CAAK,CAAA,GAAG,KAAK;AACjB,CAAA,kBAAK,CAAK,CAAA,GAAG,MAAM;AACnB,CAAA,gBAAG,CAAM,CAAA,GAAG,IAAI;AAChB,CAAA,mBAAM,CAAK,CAAA,GAAG,OAAO;AAErB,CAAA,mBAAM,CAAK,OAAM;CAAA,YACjB,CAAC,CAAA;AACF,CAAA,cAAG,IAAI,EAAG,CAAA,GAAG,IAAI,CAAA;AACjB,CAAA,aAAE,OAAO,CAAC,GAAG,CAAC,CAAA;WACd,EAAC,CAAA;SACF;AAED,CAAA,eAAQ,CAAE,UAAU,IAAI,CAAE,CAAA,GAAG,CAAE;AAC9B,CAAA,aAAI,kBAAkB,SAAS,CAAC,IAAI,CAAE,IAAG,CAAC,CAAA;SAC1C;AAED,CAAA,kBAAW,CAAE,UAAU,IAAI,CAAE,CAAA,GAAG,CAAE;CACjC,eAAO,CAAA,IAAI,kBAAkB,YAAY,CAAC,IAAI,CAAE,IAAG,CAAC,CAAA;SACpD;AAED,CAAA,eAAQ,CAAE,UAAU;;CACnB,aAAI,MAAM,KAAK,MAAM,GAAI,OAAM,CAAA,EAAI,CAAA,IAAI,UAAU,EAAG,EAAC;CAAE,iBAAO,CAAA,IAAI,GAAG,CAAC,QAAQ,CAAC,KAAK,EAAC,SAAA,CAAC;oBAAI,CAAA,IAAI,SAAS,EAAE;aAAA,EAAC,CAAA;AAE1G,CAF0G,aAEtG,UAAU,EAAG,CAAA,CAAC,IAAI,UAAU,GAAE,EAAC,CAAC,EAAC,EAAC,CAAA;AACtC,CAAA,mBAAU,EAAE,CAAA;AACZ,CAAA,aAAI,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,SAAA,CAAC,CAAI;CAC1B,eAAI,aAAY,WAAW;AAAE,CAAA,0BAAY,WAAW,OAAO,EAAE,CAAA;AAC7D,CAD6D,eACzD,SAAS,EAAE,CAAA;WACf,EAAE,MAAM,EAAE,CAAA;AACX,CAAA,eAAM,KAAK,CAAC,IAAI,QAAQ,CAAC,QAAQ,EAAE,SAAA,GAAG,CAAI;AACrC,CAAJ,cAAI,CAAA,EAAE,EAAG,CAAA,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAA;AAC1B,CAAA,aAAE,OAAO,EAAG,EAAC,EAAE,OAAO,CAAA;WACtB,EAAE,CAAA;AACH,CAAA,aAAI,gBAAgB,CAAC,CACpB,CAAC,IAAI,CAAE,MAAK,CAAC,CAAE,EAAC,IAAI,CAAE,MAAK,CAAC,CAC5B,CAAE,EAAC,GAAG,CAAE,KAAI,CAAC,CAAC,KAAK,EAAE,SAAA,IAAI;CAEzB,mBAAQ,IAAI;CACX,iBAAK,MAAK;AACT,CAAA,qBAAM,aAAa,EAAE,MAAM,EAAE,QAAQ,CAAC,IAAI,SAAS,CAAC,KAAK,EAAE,SAAA,CAAC;wBAAI,CAAA,IAAI,WAAW,CAAC,UAAU,CAAC;iBAAA,IAC1F,SAAA,GAAG;wBAAI,CAAA,IAAI,WAAW,CAAC,aAAa,CAAC;iBAAA,EAAE,CAAA;CAEzC,qBAAK;AACL,CADK,iBACA,MAAK;AACT,CAAA,mBAAI,aAAa,EAAE,CAAA;CAEpB,qBAAK;AACL,CADK;CACI,oBAAM,sBAAqB,CAAA;CAA5B,YACR;WACD,EAAC,CAAA;SAEF;AAED,CAAA,eAAQ,CAAE,UAAU;CAEnB,aAAI,CAAC,IAAI,UAAU;CAAE,kBAAM;AAC3B,CAD2B,WACzB,IAAI,UAAU,CAAA;AAChB,CAAA,mBAAU,EAAE,CAAA;AACZ,CAAA,aAAI,GAAG,CAAC,MAAM,CAAC,KAAK,EAAC,SAAA,CAAC;kBAAI,CAAA,IAAI,SAAS,EAAE;WAAA,EAAC,CAAA;AAC1C,CAAA,eAAM,KAAK,CAAC,IAAI,QAAQ,CAAC,QAAQ,EAAE,SAAA,GAAG,CAAI;AACrC,CAAJ,cAAI,CAAA,EAAE,EAAG,CAAA,IAAI,QAAQ,CAAC,GAAG,CAAC,CAAA;AAC1B,CAAA,aAAE,OAAO,EAAG,EAAC,EAAE,OAAO,CAAA;WACtB,EAAE,CAAA;SACH;CAAA,MAED;CAAA,IAED,CAAA;CAID,chB9sBD,CAAA,eAAe,aAAa,CgB8sBqC,EAAC,SAAA,CAAC;AAE7D,CAAJ,QAAI,CAAA,aAAa,EAAG;AAClB,CAAA,QAAC,CAAE,YAAW;AACf,CAAA,SAAE,CAAE,QAAO;AACX,CAAA,SAAE,CAAE,QAAO;AACX,CAAA,SAAE,CAAE,OAAM;AACV,CAAA,SAAE,CAAE,KAAI;AACR,CAAA,SAAE,CAAE,QAAO;AACX,CAAA,SAAE,CAAE,OAAM;CAAA,MACV,CAAA;AAEG,CAAJ,QAAI,CAAA,KAAK,EAAG,GAAE,CAAA;AAGd,CAAA,aAAQ,iBAAiB,CAAC,SAAS,GAAE,SAAA,GAAG,CAAI;AACvC,CAAJ,UAAI,CAAA,IAAI,EAAG,CAAA,aAAa,CAAC,GAAG,QAAQ,CAAC,CAAA;CACrC,WAAI,IAAI;AAAE,CAAA,gBAAO,CAAC,IAAI,CAAE,IAAG,CAAC,CAAA;CAAA,MAC5B,EAAE,KAAI,CAAC,CAAA;AAER,CAAA,eAAU,iBAAiB,CAAC,WAAW,GAAE,SAAA,GAAG,CAAI;AAC3C,CAAJ,UAAI,CAAA,IAAI,EAAG,CAAA,KAAK,CAAC,GAAG,OAAO,CAAC,CAAA;CAC5B,WAAI,IAAI;AAAE,CAAA,gBAAO,CAAC,IAAI,EAAG,QAAO,CAAE,IAAG,CAAC,CAAA;CAAA,MACtC,EAAE,KAAI,CAAC,CAAA;AAER,CAAA,eAAU,iBAAiB,CAAC,aAAa,GAAE,SAAA,GAAG,CAAI;AACjD,CAAA,cAAO,CAAC,aAAa,CAAE,IAAG,CAAC,CAAA;OAC3B,EAAE,KAAI,CAAC,CAAA;CAER,aAAS,QAAO,CAAC,IAAI,CAAE,CAAA,GAAG;CACzB,WAAI,GAAG,CAAE;AACR,CAAA,YAAG,eAAe,EAAE,CAAA;AACpB,CAAA,YAAG,yBAAyB,EAAE,CAAA;SAC9B;AACD,CADC,YACI,EAAG,CAAA,KAAK,OAAO,EAAE,SAAA,AAAC,GAAG,CAAE,CAAA,IAAI,AAAC,CAAI;CACpC,aAAI,IAAI,QAAQ,CAAC,IAAI,CAAC,CAAA,GAAK,EAAC,CAAC,CAAA,EAAI,CAAA,IAAI,QAAQ,EAAG,EAAC;AAAE,CAAA,cAAG,KAAK,CAAC,IAAI,CAAC,CAAA;;AAC5D,CAAA,eAAI,QAAQ,EAAE,CAAA;AACnB,CADmB,eACZ,IAAG,CAAA;SACV,EAAE,GAAE,CAAC,CAAA;OACN;CAED,aAAS,OAAM,CAAC,IAAI,CAAE;CACrB,eAAQ,IAAI;CACX,aAAK,KAAI;CACR,iBAAO,EAAC,QAAQ,CAAE,QAAO,CAAE,QAAO,CAAC,CAAA;AACpC,CADoC,aAC/B,OAAM;CACV,iBAAO,EAAC,QAAQ,CAAE,YAAW,CAAC,CAAA;AAC/B,CAD+B,aAC1B,SAAQ,CAAC;CAAC,aAAK,OAAM,CAAC;CAAC,aAAK,KAAI,CAAC;CAAC,aAAK,QAAO,CAAC;CAAC,aAAK,OAAM,CAAC;CAAC,aAAK,QAAO;CAC7E,iBAAO,EAAC,IAAI,CAAC,CAAA;AACd,CADc;CACL,gBAAM,0BAAyB,CAAA;CAAhC,QACR;OACD;AAED,CAFC,WAEM,EAAC,QAAS,UAAS,CAAC,IAAI,CAAE,CAAA,OAAO,CAAE;AACrC,CAAJ,UAAI,CAAA,IAAI,EAAG,CAAA,MAAM,CAAC,IAAI,CAAC,CAAA;AACvB,CAAA,WAAI,QAAQ,EAAG,QAAO,CAAA;AACtB,CAAA,WAAI,QAAQ,EAAG,EAAC,CAAA;AAChB,CAAA,YAAK,KAAK,CAAC,IAAI,CAAC,CAAA;OAChB,CAAE,SAAS,UAAS,CAAC,CAAE;AACvB,CAAA,YAAK,OAAO,EAAG,EAAC,CAAA;OAChB,CAAE,SAAS,WAAU,CAAC;AACtB,CAAA,YAAK,QAAQ,EAAE,SAAA,IAAI;gBAAI,GAAE,IAAI,QAAQ;SAAA,EAAE,CAAA;OACvC,CAAE,SAAS,WAAU,CAAC;AACtB,CAAA,YAAK,QAAQ,EAAE,SAAA,IAAI;gBAAI,GAAE,IAAI,QAAQ;SAAA,EAAE,CAAA;OACvC,CAAE,SAAS,UAAS,CAAC,IAAI,CAAE;AAC3B,CAAA,cAAO,CAAC,IAAI,CAAC,CAAA;OACb,CACA,CAAA;KACD,EAAC,EAAE,ChBlxB0C;CgB8sBzC,gBAAS;CAAE,gBAAS;CAAE,iBAAU;CAAE,iBAAU;CAAE,gBAAS,YAoExD;CAGJ,WAAS,QAAO,CAAC,AAAO;;CfpxBb,UAAS,GAAA,OAAoB,GAAE;CAAE,gBAAoB,EAAC,CACjD,QAAoB,CAAA,SAAS,OAAO,CAAE,QAAmB;AAC5D,CAAA,kBAAoC,EAAG,CAAA,SAAS,OAAmB,CAAC;AemxBhF,CfnxBgF,SemxB5E,MAAO,UAAS,QAAQ,CAAA,EAAI,WAAU;CAAE,eAAA,UAAS,sBTtxBvD,CAAA,eAAe,SAAS,CSsxB2C,IAAI,CTtxB5B,ESsxB6B;CAAA,IACtE;AAEG,CAAJ,MAAI,CAAA,KAAK,EAAG,MAAK,CAAA;AACb,CAAJ,MAAI,CAAA,MAAM,EAAG,CAAA,EAAE,EAAG,EAAC,CAAA;AACf,CAAJ,MAAI,CAAA,KAAK,EAAG,GAAE,CAAA;AACV,CAAJ,MAAI,CAAA,KAAK,EAAG,CAAA,QAAQ,KAAK,YAAY,EAAG,iBAAgB,CAAA;AACpD,CAAJ,MAAI,CAAA,MAAM,EAAG,CAAA,CAAC,KAAK,EAAG,OAAM,CAAA,EAAI,IAAG,CAAA,CAAG,IAAG,EAAG,CAAA,KAAK,EAAG,OAAM,CAAC,EAAG,iBAAgB,CAAA;AAG9E,CAAA,UAAO,KAAK,WAAW,CAAC,MAAM,CAAC,CAAA;AAC3B,CAAJ,MAAI,CAAA,CAAC,EAAG,CAAA,WAAW,CAAC,MAAM,CAAE,OAAM,CAAC,CAAA;AAEnC,CAAA,IAAC,KAAK,EAAE,SAAA,CAAC;YAAI,CAAA,KAAK,KAAK,MAAM,CAAC,IAAI,CAAC;KAAA,EAAE,CAAA;GAErC,EAAC,MAAM,EAAE,CAAA;CdryBV,WAAwB;CLEnB,CDFoD,CAAC;AOA1D,CAAA,KAAM,IAAI,CAAC,WAAmB,GAAE,CAAC,CAAA;APAjC,CAAA,KAAM,SAAS,YAAoB,GAAE,CCArC,UAAS;;ACAL,CAAJ,IAAI,CAAA,YAAY,aAAoB,CAAC;AoBCrC,CAAA,MAAK,CAAC,SAAS,CAAE,SAAQ,CAAC,KAAK,CAAC,IAAI,GAAG,CVDvC,eAAe,sBAAsB,CUCG,eAAW;;CTDnD,SAAO,CCAP,eAAe,wBDAS,ACAe,CCAvC,SAAS,IAAI,CAAE;CACT,YAAO,IAAI;;;;CCDjB,iBMG0B,CAAA,OAAO,WAAW,CAAC,cAAc,CAAE,MAAK,CAAC,CNH3C;;0BCAxB,CAAA,IAAI,KAAK;;;;ACAT,CAAA,eAAI,YAAY,EIKR,EAAC,YAAY,CAAZ,aAAY,CJLe,AIKd,CJLc;;;;CCApC,iBAAO,CAAA,IAAI,IAAI,EAAE,CAAA;;CJCmB,IAC/B,QFA4B,KAAI,CAAC,CAAC;GSKtC,CVPuD,CUOtD,CAAC,KAAK,EAAE,SAAA,MAAM;CAEf,qBlBTD,CAAA,eAAe,aAAa,CkBSN,MAAM,ClBTmB,ckBSnB;AAEvB,CAAJ,MAAI,CAAA,SAAS,EAAG,IAAI,IAAG,CAAA;AAGnB,CAAJ,MAAI,CAAA,iBAAiB,EAAG,EAAC,CAAC,MAAM,aAAa,CAAA;CAE7C,OAAI,iBAAiB,CAAE;AAElB,CAAJ,QAAI,CAAA,GAAG,EAAG,IAAI,aAAY,EAAE,CAAA;AAExB,CAAJ,QAAI,CAAA,IAAI,EAAG,CAAA,GAAG,yBAAyB,EAAE,CAAA;AACrC,CAAJ,QAAI,CAAA,UAAU,EAAG,CAAA,GAAG,WAAW,EAAE,CAAA;AAC7B,CAAJ,QAAI,CAAA,SAAS,EAAG,CAAA,GAAG,WAAW,EAAE,CAAA;AAEhC,CAAA,SAAI,QAAQ,CAAC,GAAG,YAAY,CAAC,CAAA;AAC7B,CAAA,eAAU,QAAQ,CAAC,IAAI,CAAC,CAAA;AACxB,CAAA,cAAS,QAAQ,CAAC,UAAU,CAAC,CAAA;AAE7B,CAAA,eAAU,KAAK,MAAM,EAAG,IAAG,CAAA;KAE3B;AAED,CAFC,WAEQ,QAAO,CAAC,CAAE;CAClB,WAAO,CAAA,iBAAiB,GAAI,aAAY,CAAA;KACxC;AClCE,CDkCF,MClCE,QDsCH,SAAM,MAAK,CAEE,IAAI,CAAE,CAAA,IAAI,CAAE;CACvB,SAAI,CAAC,IAAI;CAAE,YAAM,UAAS,CAAA;AAC1B,CAD0B,SACtB,CAAC,IAAI;CAAE,YAAM,SAAQ,CAAA;AACzB,CADyB,SACrB,CAAC,iBAAiB;CAAE,cAAM;AAC9B,CAD8B,aACtB,IAAI;CACX,WAAK,QAAO;AACP,CAAJ,YAAI,CAAA,GAAG,IAAG,WAAY,EAAA,KAAI,EAAA,OAAM,CAAA,CAAA;AAC5B,CAAJ,YAAI,CAAA,GAAG,EAAG,UAAS,CAAA;CACpB,eAAK;AACL,CADK;CACI,gBAAM,UAAW,EAAA,KAAI,EAAA,IAAG,EAAA;CAAzB,MACR;AACG,CAAJ,QAAI,CAAA,IAAI,EAAG,CAAA,GAAG,WAAW,EAAE,CAAA;AAC3B,CAAA,SAAI,QAAQ,CAAC,GAAG,CAAC,CAAA;AACjB,CAAA,SAAI,WAAW,EAAG,EAAC,CAAA;AACnB,CAAA,SAAI,IAAI,EAAG,IAAG,CAAA;AACd,CAAA,SAAI,IAAI,EAAG,KAAI,CAAA;AACf,CAAA,SAAI,IAAI,EAAG,KAAI,CAAA;AACf,CAAA,SAAI,KAAK,EAAG,KAAI,CAAA;AAChB,CAAA,SAAI,QAAQ,EAAE,CAAA;KC1DwB,AD2DtC,CC3DsC;ACAzC,CAAA,IAAC,eAAe,YAAY,CAAC;CF6D3B,SAAI,CAAJ,UAAK;;CACJ,gBAAY,KAAI,KAAA;AACZ,CAAJ,UAAI,CAAA,GAAG,EAAG,CAAA,SAAS,IAAI,CAAC,GAAG,CAAC,CAAA;CAC5B,WAAI,GAAG;CAAE,eAAO,CAAA,OAAO,QAAQ,CAAC,GAAG,CAAC,CAAA;AACpC,CADoC,aAC7B,CAAA,MAAM,KAAK,CAAC,GAAG,CAAE,cAAa,CAAC,KAAK,EAAE,SAAA,GAAG,CAAI;AACnD,CAAA,kBAAS,IAAI,CAAC,GAAG,CAAE,IAAG,CAAC,CAAA;AACvB,CAAA,kBAAQ,EAAI,IAAG,CAAA;SACf,EAAC,CAAA;OACF;CAED,YAAO,CAAP,UAAQ;;CACP,gBAAY,KAAI,KAAA;CAChB,WAAI,CAAC,GAAG;CAAE,eAAO,CAAA,IAAI,KAAK,EAAE,KAAK,EAAE,SAAA,CAAC;kBAAI,CAAA,aAAY,EAAE;WAAA,EAAE,CAAA;AACxD,CADwD,aACjD,IAAI,QAAO,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AAC3B,CAAA,YAAG,gBAAgB,CAAC,GAAG,GAAE,SAAA,GAAG,CAAI;AAC3B,CAAJ,cAAI,CAAA,GAAG,EAAG,CAAA,GAAG,mBAAmB,EAAE,CAAA;AAClC,CAAA,cAAG,OAAO,EAAG,IAAG,CAAA;AAChB,CAAA,cAAG,QAAQ,CAAC,UAAS,CAAC,CAAA;AACtB,CAAA,oBAAQ,EAAG,IAAG,CAAA;AACd,CAAA,aAAE,EAAE,CAAA;WACJ,EAAE,GAAE,CAAC,CAAA;SACN,EAAC,CAAA;OACF;CAED,SAAI,CAAJ,UAAK;;CACJ,WAAI,CAAC,OAAO,EAAE;CAAE,eAAO,CAAA,OAAO,QAAQ,CAAC,IAAI,CAAC,CAAA;AAC5C,CAD4C,gBAChC,KAAI,KAAA;CAChB,WAAI,CAAC,GAAG;CAAE,eAAO,CAAA,IAAI,QAAQ,EAAE,KAAK,EAAE,SAAA,CAAC;kBAAI,CAAA,UAAS,EAAE;WAAA,EAAE,CAAA;AACxD,CADwD,UACrD,MAAM,CAAC,CAAC,CAAC,CAAA;AACZ,CAAA,WAAI,IAAI,EAAG,KAAI,CAAA;AACf,CAAA,WAAI,QAAQ,EAAE,CAAA;CACd,aAAO,IAAI,QAAO,EAAE,SAAA,EAAE,CAAI;AAAE,CAAA,YAAG,QAAQ,EAAG,GAAE,CAAA;SAAE,EAAE,CAAA;OAChD;CAED,YAAO,CAAP,UAAQ,AAAc,CAAE;WAAhB,SAAQ,6CAAG,IAAG;AACjB,CAAJ,UAAI,CAAA,EAAE,EAAG,CAAA,GAAG,YAAY;AAAE,CAAA,eAAI,EAAG,CAAA,IAAI,KAAK,KAAK,CAAA;AAC/C,CAAA,WAAI,eAAe,CAAC,IAAI,MAAM,CAAE,GAAE,CAAC,CAAA;AACnC,CAAA,WAAI,wBAAwB,CAAC,CAAC,CAAE,CAAA,EAAE,EAAG,SAAQ,CAAC,CAAA;OAC9C;CAAA,SEnGmF;AFuGrF,CAAA,SAAM,OAAO,CAAC,KAAK,CAAE;AACpB,CAAA,iBAAY,CAAZ,aAAY;AAAE,CAAA,sBAAiB,CAAjB,kBAAiB;CAAA,IAC/B,CAAC,CAAA;AAEF,CAAA,QAAK,MAAM,MAAM,CAAC,KAAK,CAAC,CAAA;GAExB,EAAC,MAAM,EAAE,CAAA;ChB7GV,WAAwB;CLEnB,CDFoD,CAAC;AOA1D,CAAA,KAAM,IAAI,CAAC,YAAmB,GAAE,CAAC,CAAA;APAjC,CAAA,KAAM,SAAS,WAAoB,GAAE,CCArC,UAAS;;ACAL,CAAJ,IAAI,CAAA,YAAY,YAAoB,CAAC;AuBCrC,CAAA,MAAK,CAAC,QAAQ,CAAE,OAAM,CAAE,QAAO,CAAC,KAAK,EAAE,SAAA,CAAC;AACvC,CAAA,eAAY,CAAA;AAIR,CAAJ,MAAI,CAAA,OAAO,EAAG,CAAA,EAAC,SAAA,CAAC;AACX,CAAJ,QAAI,CAAA,KAAK,EAAG,CAAA,IAAI,IAAI,CAAA;CACpB,aAAO,SAAA,IAAI,CAAI;AACd,CAAA,YAAK,EAAE,CAAA;AACP,CAAA,WAAI,mBAAmB,CAAC,OAAO,CAAC,CAAA;AAChC,CAAA,WAAI,SAAS,CAAC,MAAM,CAAE,EAAC,GAAG,CAAE,KAAI,CAAC,CAAC,CAAA;AAC9B,CAAJ,UAAI,CAAA,CAAC,EAAG,CAAA,IAAI,YAAY,CAAC,IAAI,CAAE,EAAE,MAAM,CAAE,GAAE,CAAE,CAAC,CAAA;AAC9C,CAAA,YAAK,EAAG,CAAA,CAAC,MAAM,CAAA;CACf,aAAO,EAAC,CAAA;OACR,EAAA;KACD,EAAC,EAAE,CAAA;AAIA,CAAJ,MAAI,CAAA,KAAK,EAAG,CAAA,IAAI,GAAG,CbpBpB,eAAe,sBAAsB,CaoBhB,eAAW;;;;CZpBhC,WAAO,CCAP,eAAe,wBDAS,ACAe,CCAvC,SAAS,IAAI,CAAE;CACT,cAAO,IAAI;;;AUqBf,CAAA,mBAAM,KAAK,EAAE,CAAA;AAEb,CAAA,qBAAQ,EAAE,CAAA;;;;;CTxBZ,mBS2BsB,CAAA,MAAM,iBAAiB,CAAC,IAAI,IAAI,gBAAgB,CAAC,CT3B/C;;uBCAxB,CAAA,IAAI,KAAK;;;;AQ6BP,CAAA,iBAAI,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;AAE3B,CAAA,oBAAO,CAAC,gBAAgB,CAAC,CAAA;;;;;CT/B3B,mBSgCuB,IAAI,QAAO,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AAErC,CAAJ,kBAAI,CAAA,MAAM,EAAG,CAAA,OAAO,CAAC,IAAI,CAAC,CAAA;CAE1B,mBAAI,CAAC,MAAM,CAAA,EAAI,EAAC,MAAM,OAAO;CAAE,uBAAO,CAAA,OAAO,CAAC,wCAAwC,CAAC,CAAA;AACvF,CADuF,mBACnF,MAAM,OAAO,IAAK,EAAC;CAAE,uBAAO,CAAA,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAA;AAEzC,CAFyC,kBAEzC,CAAA,IAAI,EAAG,CAAA,MAAM,OAAO,EAAE,SAAA,AAAC,IAAI,CAAE,CAAA,IAAI,AAAC,CAAI;AACzC,CAAA,qBAAI,KAAK,CAAC,CAAE,IAAI,CAAJ,KAAI,CAAE,CAAC,CAAA;CACnB,uBAAO,KAAI,CAAA;iBACX,EAAE,GAAE,CAAC,CAAA;AAEN,CAAA,mBAAI,gBAAgB,CAAC,IAAI,CAAE,EAAC,GAAG,CAAE,KAAI,CAAC,CAAC,KAAK,CAAC,EAAE,CAAE,GAAE,CAAC,CAAA;eACpD,EAAC,CT7CoB;;wBCAxB,CAAA,IAAI,KAAK;;;;AQ+CP,CAAA,mBAAM,YAAY,CAAC,QAAQ,CAAC,CAAA;;;;;CT/C9B,mBSmDsB,CAAA,MAAM,iBAAiB,EAAC,MAAO,EAAA,SAAQ,EAAA,UAAS,EAAC,CTnD/C;;uBCAxB,CAAA,IAAI,KAAK;;;;AQqDP,CAAA,oBAAO,CAAC,GAAG,EAAC,SAAQ,CAAA,CAAC,uBAAsB,CAAC,CAAA;;;;;CTrD9C,mBSsDqB,IAAI,QAAO,EAAE,SAAA,AAAC,EAAE,CAAE,CAAA,EAAE,AAAC;AAEnC,CAAJ,kBAAI,CAAA,IAAI,EAAG,CAAA,CAAC,MAAM,CAAE,OAAM,CAAE,UAAS,CAAC,OAAO,EAAE,SAAA,AAAC,IAAI,CAAE,CAAA,IAAI,AAAC,CAAI;AAC9D,CAAA,qBAAI,KAAK,CAAC,CAAE,IAAI,CAAJ,KAAI,CAAC,CAAC,CAAA;CAClB,uBAAO,KAAI,CAAA;iBACX,EAAE,GAAE,CAAC,CAAA;CAEN,qBAAO,CAAA,IAAI,gBAAgB,CAAC,IAAI,CAAE,EAAC,GAAG,CAAE,KAAI,CAAC,CAAC,KAAK,EAAE,SAAA,IAAI;AAGpD,CAAJ,oBAAI,CAAA,IAAI,EAAG,CAAA,OAAO,CAAC,QAAQ,CAAC,CAAA;CAC5B,qBAAI,CAAC,IAAI,CAAA,EAAI,EAAC,CAAC,IAAI,EAAG,CAAA,IAAI,CAAC,CAAC,CAAC,CAAC;CAAE,yBAAO,CAAA,EAAE,CAAC,kCAAkC,CAAC,CAAA;AAE7E,CAF6E,yBAErE,IAAI;CACX,uBAAK,OAAM;AACV,CAAA,2BAAM,gBAAgB,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAE,GAAE,CAAC,CAAA;CAE1C,2BAAK;AACL,CADK,uBACA,OAAM;AACV,CAAA,2BAAM,aAAa,EAAE,KAAK,CAAC,EAAE,CAAE,GAAE,CAAC,CAAA;CAEnC,2BAAK;AACL,CADK,uBACA,UAAS;AACT,CAAJ,wBAAI,CAAA,IAAI,EAAG,CAAA,MAAM,CAAC,4EAA4E,CAAC,CAAA;CAC/F,yBAAI,CAAC,IAAI;CAAE,6BAAO,CAAA,OAAO,CAAC,gBAAgB,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;AACnE,CADmE,2BAC7D,gBAAgB,CAAC,IAAI,CAAE,KAAI,CAAC,KAAK,CAAC,EAAE,GAAE,SAAA,GAAG,CAAI;AAClD,CAAA,8BAAO,CAAC,oBAAoB,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAA;uBACrD,EAAC,CAAA;CAEH,2BAAK;AACL,CADK;CACI,0BAAM,qBAAoB,CAAA;CAA3B,kBAGR;iBAED,EAAC,CAAA;eAEF,EAAC,CT3FoB;;sBCAxB,CAAA,IAAI,KAAK;;;;ACAT,CAAA,iBAAI,YAAY,EO6FP,CAAA,IAAI,CAAC,MAAM,CP7FgB,AO6Ff,CP7Fe;;;;CCApC,mBAAO,CAAA,IAAI,IAAI,EAAE,CAAA;;CJCmB,MAC/B,QFA4B,KAAI,CAAC,CAAC;KY4FrC,Cb9FsD,Ca8FrD,CAAA;AAGE,CAAJ,MAAI,CAAA,IAAI,EAAG,CAAA,IAAI,GAAG,CbjGnB,eAAe,sBAAsB,CaiGjB,eAAW,MAAM;CZjGrC,WAAO,CCAP,eAAe,wBDAS,ACAe,CCAvC,SAAS,IAAI,CAAE;CACT,cAAO,IAAI;;;AUkGf,CAAA,oBAAO,CAAC,SAAS,CAAC,CAAA;;;;;CTnGpB,mBSoGQ,CAAA,MAAM,YAAY,CAAC,MAAM,CAAC,CTpGV;;AUAxB,CAAA,iBAAI,WAAW,EAAE,CAAA;;;;;CVAjB,mBS6GQ,CAAA,OAAO,CAAC,EAAE,CAAC,KAAK,EAAE,SAAA,CAAC,CAAI;AAE5B,CAAA,mBAAI,MAAM,EAAE,CAAA;CACZ,qBAAO,CAAA,MAAM,UAAU,CAAC,MAAM,CAAC,CAAA;eAC/B,EAAC,CTjHoB;;AUAxB,CAAA,iBAAI,WAAW,EAAE,CAAA;;;;ADmHf,CAAA,iBAAI,MAAM,EAAE,CAAA;AAGZ,CAAA,mBAAM,YAAY,CAAC,IAAI,CAAC,CAAA;;;;;CTtH1B,mBSwHQ,CAAA,OAAO,CAAC,4BAA4B,CAAC,MAAM,CAAC,IAAI,CAAC,CTxHjC;;AUAxB,CAAA,iBAAI,WAAW,EAAE,CAAA;;;;ARAjB,CAAA,iBAAI,YAAY,EO0HP,CAAA,KAAK,EAAE,MAAM,CAAC,OAAO,CP1HM,AO0HL,CP1HK;;;;CCApC,mBAAO,CAAA,IAAI,IAAI,EAAE,CAAA;;CJCmB,MAC/B,QFA4B,KAAI,CAAC,CAAC;KY0HrC,Cb5HsD,Ca4HrD,CAAA;AAKE,CAAJ,MAAI,CAAA,OAAO,EAAG,CAAA,IAAI,GAAG,CbjItB,eAAe,sBAAsB,CaiId,eAAW,GAAG;CZjIrC,WAAO,CCAP,eAAe,wBDAS,ACAe,CCAvC,SAAS,IAAI,CAAE;CACT,cAAO,IAAI;;;AUkIf,CAAA,gBAAG,CAAC,GAAG,CAAC,CAAA;CACR,iBAAI,MAAO,IAAG,CAAA,GAAK,SAAQ;AAAE,CAAA,kBAAG,EAAG,4BAA2B,CAAA;AAC9D,CAD8D,iBAC1D,MAAM,EAAE,CAAA;AACZ,CAAA,mBAAM,YAAY,CAAC,OAAO,CAAC,CAAA;;;;;CTtI7B,mBSwIQ,CAAA,OAAO,CAAC,GAAG,EAAG,mBAAkB,CAAC,MAAM,CAAC,IAAI,CAAC,CTxI7B;;AUAxB,CAAA,iBAAI,WAAW,EAAE,CAAA;;;;ARAjB,CAAA,iBAAI,YAAY,EOyIP,CAAA,KAAK,EAAE,MAAM,CAAC,OAAO,CPzIM,AOyIL,CPzIK;;;;CCApC,mBAAO,CAAA,IAAI,IAAI,EAAE,CAAA;;CJCmB,MAC/B,QFA4B,KAAI,CAAC,CAAC;KYyIrC,Cb3IsD,Ca2IrD,CAAA;AAKE,CAAJ,MAAI,CAAA,KAAK,EAAG,CAAA,IAAI,GAAG,CbhJpB,eAAe,sBAAsB,CagJhB,eAAW;;;CZhJhC,WAAO,CCAP,eAAe,wBDAS,ACAe,CCAvC,SAAS,IAAI,CAAE;CACT,cAAO,IAAI;;;AUiJf,CAAA,mBAAM,YAAY,CAAC,IAAI,CAAC,CAAA;;;;;CTlJ1B,mBSoJsB,CAAA,MAAM,iBAAiB,CAAC,IAAI,IAAI,cAAc,CAAC,CTpJ7C;;uBCAxB,CAAA,IAAI,KAAK;;;;AQsJP,CAAA,iBAAI,cAAc,EAAG,CAAA,OAAO,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAA;uBAC9B,IAAI,MAAK,CAAC,OAAO,CAAE,KAAI,CAAC;AAEtC,CAAA,iBAAI,WAAW,CAAC,OAAO,CAAC,CAAA;;;;;CTzJ1B,mBS2JQ,CAAA,OAAO,IAAI,CAAC,CACjB,QAAQ,CAAC,KAAK,CAAC,CACf,CAAA,OAAO,KAAK,CAAC,CACZ,OAAO,IAAI,CAAC,CACX,OAAO,KAAK,EAAE,CACd,CAAA,IAAI,YAAY,CAAC,yCAAyC,EAAG,CAAA,IAAI,cAAc,CAAE,EAAE,MAAM,CAAE,EAAC,CAAE,CAAC,MAAM,CAAC,IAAI,CAAC,CAC3G,CAAC,CACF,CAAA,IAAI,GAAG,CAAC,IAAI,CAAC,CACb,CAAC,QAAQ,EAAE,SAAA,CAAC;sBAAI,CAAA,OAAO,QAAQ,EAAE;eAAA,EAAE,CACpC,CAAC,MAAM,EAAE,CTpKY;;AUAxB,CAAA,iBAAI,WAAW,EAAE,CAAA;;;;ARAjB,CAAA,iBAAI,YAAY,EOsKP,CAAA,KAAK,EAAE,MAAM,CAAC,OAAO,CPtKM,AOsKL,CPtKK;;;;CCApC,mBAAO,CAAA,IAAI,IAAI,EAAE,CAAA;;CJCmB,MAC/B,QFA4B,KAAI,CAAC,CAAC;KYqKrC,CbvKsD,CauKrD,CAAA;CAIF,WAAS,SAAQ,CAAC,AAAW;SAAX,KAAI,6CAAG,KAAI;AACxB,CAAJ,QAAI,CAAA,CAAC,EAAG,CAAA,MAAM,UAAU,CAAC,IAAI,CAAE,KAAI,CAAE,MAAK,CAAE,KAAI,CAAC,CAAA;CACjD,WAAO,CAAA,IAAI,EAAG,CAAA,CAAC,KAAK,EAAE,SAAA,GAAG;cAAI,CAAA,IAAI,WAAW,CAAC,CAAE,GAAG,CAAH,IAAG,CAAE,CAAC;OAAA,EAAE,CAAA,CAAG,EAAC,CAAA;KAC3D;AAED,CAAA,QAAK,EAAE,CAAA;AAEP,CAAA,QAAK,KAAK,MAAM,CAAC;CAEhB,UAAK,CAAL,UAAM,CAAE;AACP,CAAA,YAAK,EAAE,CAAA;OACP;CAED,iBAAY,CAAZ,UAAa;AACZ,CAAA,aAAM,aAAa,EAAE,KAAK,EAAE,SAAA,MAAM,CAAI;AACrC,CAAA,eAAM,KAAK,EAAE,CAAA;AACb,CAAA,eAAM,YAAY,CAAC,MAAM,SAAS,CAAC,CAAA;AACnC,CAAA,aAAI,CAAC,MAAM,CAAC,CAAA;SACZ,EAAE,MAAM,EAAE,CAAA;OACX;KAED,CAAC,CAAA;GAEF,EAAC,MAAM,EAAE,CAAA;CnBlMV,WAAwB;CLEnB,CDFoD,CAAC;AOA1D,CAAA,KAAM,IAAI,CAAC,WAAmB,GAAE,CAAC,CAAA","sourcesContent":["System.register($__placeholder__0, [], $__placeholder__1);","function() {\n      $__placeholder__0\n    }","var __moduleName = $__placeholder__0;",";( _ => {\r\n\t'use strict'\r\n\r\n\tvar global = (1,eval)('this')\r\n\tvar Promise = global.Promise\r\n\tvar LOG = console.log.bind(console)\r\n\r\n\tvar Data = {\r\n\t\tdebug :true,\r\n\t\tURL: {\r\n\t\t\tContentsSetting: 'データ/作品.txt',\r\n\t\t\tEngineSetting: 'エンジン/エンジン定義.txt',\r\n\t\t},\r\n\t}\r\n\r\n\tvar Util = {\r\n\r\n\t\t/*\r\n\t\tsetDefault(obj, name, value) {\r\n\t\t\tif (arguments.length !== 3) throw 'illegal arguments length'\r\n\t\t\tif (!(name in obj)) obj[name] = value\r\n\t\t\treturn obj\r\n\t\t},\r\n\t\t*/\r\n\r\n\t\tsetDefaults(obj = {}, props) {\r\n\t\t\tif (arguments.length !== 2) throw 'illegal arguments length'\r\n\t\t\tObject.keys(props).forEach(key => { if (!(key in obj)) obj[key] = props[key] })\r\n\t\t\treturn obj\r\n\t\t},\r\n\r\n\t\tsetProperties(obj = {}, props) {\r\n\t\t\tObject.keys(props).forEach(key => obj[key] = props[key] )\r\n\t\t\treturn obj\r\n\t\t},\r\n\r\n\t\tisNoneType(str) {\r\n\t\t\treturn (typeof str === 'string') && (str == '' || /^(無し|なし)$/.test(str))\r\n\t\t},\r\n\r\n\t/*\r\n\t\tforceImageURL(url, type = 'png', kind) {\r\n\t\t\treturn Util.isNoneType(url) ? null :  Util.forceURL(url, type, kind)\r\n\t\t},\r\n\r\n\t\tforceFDImageURL(url, type = 'png', kind = '立ち絵') {\r\n\t\t\treturn Util.isNoneType(url) ? null :  Util.forceURL(url, type, kind)\r\n\t\t},\r\n\r\n\t\tforceBGImageURL(url, type = 'png', kind = '背景') {\r\n\t\t\treturn Util.isNoneType(url) ? null :  Util.forceURL(url, type, kind)\r\n\t\t},\r\n\r\n\t\tforceScriptURL(url, type = 'txt', kind = 'シナリオ') {\r\n\t\t\treturn Util.forceURL(url, type, kind)\r\n\t\t},\r\n\r\n\t\tforceURL(url, type, kind) {\r\n\t\t\tif (!url || arguments.length != 3) throw 'URL特定不能エラー'\r\n\t\t\tif (!url.match(/\\.[^\\.]+$/)) url = `${url}.${type}`\r\n\t\t\tvar base = Player.baseURL || ''\r\n\t\t\tif (kind && (!url.match(kind))) url = `データ/${base}/${kind}/${url}`\r\n\t\t\turl = url.replace(/\\/+/g, '/')\r\n\t\t\treturn url\r\n\t\t},\r\n\t*/\r\n\r\n\t\tforceName(kind, name, type) {\r\n\t\t\tif (!name || !type) throw 'name特定不能エラー'\r\n\t\t\tif (!name.match(/\\.[^\\.]+$/)) name = `${name}.${type}`\r\n\t\t\treturn `${kind}/${name}`\r\n\t\t},\r\n\r\n\t\ttoHalfWidth(str) {\r\n\r\n\t\t\tvar table = {\r\n\t\t\t\t'。': '.',\r\n\t\t\t//\t'ー': '-',\r\n\t\t\t\t'―': '-',\r\n\t\t\t\t'！': '!', \r\n\t\t\t\t'≧': '>=',\r\n\t\t\t\t'≦': '<=',\r\n\t\t\t\t'≠': '!=',\r\n\t\t\t\t'×': '*',\r\n\t\t\t\t'✕': '*',\r\n\t\t\t\t'✖': '*',\r\n\t\t\t\t'☓': '*',\r\n\t\t\t\t'＊': '*', \r\n\t\t\t\t'％': '%',\r\n\t\t\t\t'／': '/',\r\n\t\t\t\t'｜': '|',\r\n\t\t\t\t'”': '\"',\r\n\t\t\t\t'’': \"'\",\r\n\t\t\t}\r\n\r\n\t\t\treturn str.replace(/./g, char => (char in table ? table[char] : char) )\r\n\t\t\t.replace(/[\\uff0b-\\uff5a]/g, char => String.fromCharCode(char.charCodeAt(0)-65248) )\r\n\t\t},\r\n\r\n\t\tNOP() {},\r\n\r\n\t\terror(message) { alert(message) },\r\n\r\n\t\tDefault: undefined,\r\n\r\n\t\tco(func) {\r\n\t\t\treturn function () {\r\n\t\t\t\tvar defer = Promise.defer()\r\n\t\t\t\tvar iter = func.apply(this, arguments)\r\n\t\t\t\tvar loop = val => {\r\n\t\t\t\t\tvar {value, done} = iter.next(val)\r\n\t\t\t\t\t//LOG(value, done)\r\n\t\t\t\t\tvalue = Promise.resolve(value)\r\n\t\t\t\t\tif (done) value.then(defer.resolve, defer.reject)\r\n\t\t\t\t\telse value.then(loop, defer.reject)\r\n\t\t\t\t}\r\n\t\t\t\tloop()\r\n\t\t\t\treturn defer.promise\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t}\r\n\r\n\r\n\r\n\tUtil.setDefaults(String.prototype, {\r\n\t\trepeat: function repeat(num) {\r\n\t\t\treturn new Array(num + 1).join(this)\r\n\t\t},\r\n\t})\r\n\r\n\r\n\tUtil.setDefaults(Promise, {\r\n\r\n\t\tdefer() {\r\n\t\t\tvar resolve, reject\r\n\t\t\tvar promise = new Promise((ok, ng) => {\r\n\t\t  \t\tresolve = ok, reject = ng\r\n\t\t\t})\r\n\t\t\treturn {promise, resolve, reject}\r\n\t\t},\r\n\r\n\t\tdelay(time) {\r\n\t\t\treturn Promise.resolve().delay(time)\r\n\t\t},\r\n\r\n\t})\r\n\r\n\r\n\r\n\tUtil.setProperties(Promise.prototype, {\r\n\r\n\t\t/*\r\n\t\tnext: function next(kind, onFulfilled, onRejected) {\r\n\t\t\treturn this.then( result => {\r\n\t\t\t\tPlayer.setRunPhase(kind)\r\n\t\t\t\treturn onFulfilled(result)\r\n\t\t\t}, onRejected).catch(err => {\r\n\t\t\t\tLOG(kind + 'エラー', err)\r\n\t\t\t\tPlayer.setErrorPhase(kind)\r\n\t\t\t\treturn Promise.reject(err)\r\n\t\t\t})\r\n\t\t},\r\n\t\t*/\r\n\r\n\t\ton: function on(type, onFulfilled = result => result, onRejected) {\r\n\t\t\treturn this.then( result => View.on(type).then( _ => onFulfilled(result) ).catch(onRejected) )\r\n\t\t},\r\n\r\n\t\tand: function and(func, arg) {\r\n\t\t\treturn this.then( _ => func(arg) )\r\n\t\t},\r\n\r\n\t\tdelay: function delay(time) {\r\n\t\t\tif (!+time) throw 'illegal time number'\r\n\t\t\treturn this.then( _ => new Promise( resolve => setTimeout(resolve, time) ) )\r\n\t\t},\r\n\r\n\t\tthrough: function through(onFulfilled, onRejected) {\r\n\t\t\treturn this.then( val => {\r\n\t\t\t\tif (onFulfilled) onFulfilled(val)\r\n\t\t\t\treturn Promise.resolve(val)\r\n\t\t\t}, err => {\r\n\t\t\t\tif (onRejected) onRejected(err)\r\n\t\t\t\treturn Promise.reject(err)\r\n\t\t\t} )\r\n\t\t},\r\n\t\tcheck: function check() {\r\n\t\t\treturn this.catch( err => {\r\n\t\t\t\tLOG(err)\r\n\t\t\t\treturn Promise.reject(err)\r\n\t\t\t} )\r\n\t\t},\r\n\t\t'throw': function (err) {\r\n\t\t\treturn this.then( _ => Promise.reject(err) )\r\n\t\t},\r\n\t})\r\n\r\n\tObject.defineProperty(Promise.prototype, '$', {\r\n\t\tenumerable: true, configurable: true, \r\n\t\tget: function () {\r\n\t\t\tvar _p = this\r\n\t\t\tvar $p = function (...args) {\r\n\t \t\t\tvar len = args.length\r\n\t \t\t\tif (len === 0) return $p\r\n\t \t\t\tvar [arg0, arg1, arg2] = args\r\n\r\n\t \t\t\tif (typeof arg0 == 'function') {\r\n\t\t \t\t\tswitch (args.length) {\r\n\t\t\t\t\t\tcase 1: \r\n\t\t\t\t\t\tcase 2: return _p.then(arg0).$\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t \t\t\tswitch (args.length) {\r\n\t\t\t\t\t\tcase 1: return _p.on(arg0).$\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tcase 3: return _p.next(arg0, arg1, arg2).$\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tthrow 'illegal arguments length'\r\n\t\t\t}\r\n\t\t\tUtil.setProperties($p, {\r\n\t\t\t\tthen: (res, rej) => _p.then(res, rej).$ ,\r\n\t\t\t\tcatch: rej => _p.catch(rej).$ ,\r\n\t\t\t})\r\n\t\t\tObject.defineProperty($p, '_', {\r\n\t\t\t\tenumerable: true, configurable: true,\r\n\t\t\t\tget: _ => _p\r\n\t\t\t})\r\n\t\t\t$p.__proto__ = _p\r\n\t\t\treturn $p\r\n\t\t}\r\n\t})\r\n\r\n\tfunction $Promise(func) {\r\n\t\treturn new Promise(func).$\r\n\t}\r\n\r\n\tUtil.setProperties($Promise, {\r\n\t\tdefer: _ => {\r\n\t\t\tvar defer = Promise.defer()\r\n\t\t\tdefer.promise = defer.promise.$\r\n\t\t\treturn defer\r\n\t\t},\r\n\t\tresolve: val => Promise.resolve(val).$ ,\r\n\t\treject : val => Promise.reject(val).$ ,\r\n\t\tall    : ary => Promise.all(ary).$ ,\r\n\t\trace   : ary => Promise.race(ary).$ ,\r\n\t})\r\n\r\n\tUtil.overrides = { Promise: $Promise, R: Promise.resolve() }\r\n\r\n\tvar READY = ( _ => {\r\n\t\tfunction READY(type) {\r\n\t\t\tvar types = (arguments.length != 1) ? [].slice.call(arguments) : (Array.isArray(type)) ? type : [type]\r\n\t\t\treturn $Promise.all(types.map(type => {\r\n\t\t\t\tif (!(type in READY)) throw 'illegal READY type \"' +type+ '\"'\r\n\t\t\t\treturn READY[type]\r\n\t\t\t}))\r\n\t\t}\r\n\t\t;['DOM', 'Player', 'View', 'Storage', 'Sound', 'Game'].forEach(type => {\r\n\t\t\tglobal[type] = null\r\n\t\t\tvar defer = $Promise.defer()\r\n\t\t\tREADY[type] = defer.promise\r\n\t\t\tREADY[type].ready = obj => {\r\n\t\t\t\tif (obj) global[type] = obj\r\n\t\t\t\tdefer.resolve()\r\n\t\t\t} \r\n\t\t})\r\n\t\treturn READY\r\n\t})()\r\n\r\n\twindow.addEventListener('DOMContentLoaded', READY.DOM.ready)\r\n\r\n\r\n\tUtil.setDefaults(global, {\r\n\t\tglobal, READY, Util, LOG, Data,\r\n\t})\r\n\r\n})();","$traceurRuntime.assertObject($__placeholder__0)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = 0;\n                 $__placeholder__2 < arguments.length; $__placeholder__3++)\n              $__placeholder__4[$__placeholder__5] = arguments[$__placeholder__6];","return $__placeholder__0","System.get($__placeholder__0 +'')","READY().then( _ => {\r\n\t'use strict'\r\n\r\n\tvar db, scenario\r\n\r\n\tvar Storage = {\r\n\t\tadd(key, val) {\r\n\t\t\treturn new Promise ( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readwrite')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rq = os.add(val, key)\r\n\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の書込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tput(key, val) {\r\n\t\t\treturn new Promise ( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readwrite')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rq = os.put(val, key)\r\n\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の書込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tget(key) {\r\n\t\t\treturn new Promise ( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readonly')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rq = os.get(key)\r\n\t\t\t\tts.oncomplete = _ => ok(rq.result)\r\n\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の読込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tdelete(key) {\r\n\t\t\treturn new Promise ( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readwrite')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rq = os.delete(key)\r\n\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の削除に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetSaveDatas(from, to) {\r\n\t\t\tvar scenario = Player.data.scenarioName\r\n\t\t\treturn new Promise ( (ok, ng) => { \r\n\t\t\t\tvar saves = new Array(to - from + 1)\r\n\t\t\t\tvar ts = db.transaction('savedata', 'readonly')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\r\n\t\t\t\tfor (var no = from; no <= to; ++no) {\r\n\t\t\t\t\tvar rq = os.get(scenario+'/'+no)\r\n\t\t\t\t\trq.onsuccess = ((rq, no) => _ => {\r\n\t\t\t\t\t\tsaves[no - from] = rq.result\r\n\t\t\t\t\t})(rq, no)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tts.oncomplete = _ => ok(saves)\r\n\t\t\t\tts.onabort = _ => ng(`ストレージの読込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tsetSaveData(no, data) {\r\n\t\t\tvar scenario = Player.data.scenarioName\r\n\t\t\treturn new Promise ( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readwrite')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rq = os.put(data, scenario+'/'+no)\r\n\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\tts.onabort = _ => ng(`ストレージの書込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetSetting(key, def) {\r\n\t\t\treturn new Promise ( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('setting', 'readonly')\r\n\t\t\t\tvar os = ts.objectStore('setting')\r\n\t\t\t\tvar rq = os.get(key)\r\n\t\t\t\tts.oncomplete = _ => ok(rq.result)\r\n\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の書込に失敗（${ts.error.message})`)\r\n\t\t\t}).then( val => {\r\n\t\t\t\treturn (val === undefined) ? Storage.setSetting(key, def) : val\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tsetSetting(key, val) {\r\n\t\t\treturn new Promise ( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('setting', 'readwrite')\r\n\t\t\t\tvar os = ts.objectStore('setting')\r\n\t\t\t\tvar rq = os.put(val, key)\r\n\t\t\t\tts.oncomplete = _ => ok(val)\r\n\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の書込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t}\r\n\r\n\r\n\tnew Promise( (ok, ng) => { \r\n\t\tvar rq = indexedDB.open(`open-novel`, 5)\r\n\t\trq.onupgradeneeded = evt => {\r\n\t\t\tvar db = rq.result\r\n\t\t\tvar ov = evt.oldVersion\r\n\t\t\tif (ov < 3) db.createObjectStore('savedata')\r\n\t\t\tif (ov < 5) db.createObjectStore('setting')\r\n\t\t} \r\n\t\trq.onsuccess = _ => ok(rq.result)\r\n\t\trq.onerror = err => ng(`ストレージが開けない（${err.message})`)\r\n\r\n\t}).then( val => {\r\n\t\tdb = val \r\n\t\tREADY.Storage.ready(Storage)\r\n\t})\r\n\r\n}).check()","\r\nREADY().then( _ => {\r\n\t'use strict'\r\n\r\n\tfunction setPhase(phase) { document.title = '【' +phase+ '】' }\r\n\tfunction setRunPhase(kind) { setPhase(`${kind}中...`) }\r\n\tfunction setErrorPhase(kind) { setPhase(`${kind}エラー`) }\r\n\r\n\r\n\tfunction parseScript(text) {\r\n\t\ttext = text.replace(/\\r\\n/g, '\\n').replace(/\\n+/g, '\\n').replace(/\\n/g, '\\r\\n') + '\\r\\n'\r\n\t\ttext = text.replace(/^\\/\\/.*/gm, '')\r\n\t\ttext = text.replace(/^\\#(.*)/gm, (_, str) => `・マーク\\r\\n\\t${str}`)\r\n\t\t//LOG(text)\r\n\t\t//global.text = text\r\n\t\tfunction parseOne(base, text) {\r\n\t\t\tvar chanks = text.match(/[^\\n]+?\\n(\\t+[\\s\\S]+?\\n)+/g) || []\r\n\t\t\tchanks.forEach(chank => {\r\n\t\t\t\r\n\t\t\t\tvar blocks = chank.replace(/^\\t/gm,'').replace(/\\n$/, '').match(/.+/g)\r\n\t\t\t\t//LOG(blocks)\r\n\t\t\t\tvar act = blocks.shift().trim()\r\n\t\t\t\tvar data = '\\n' +blocks.join('\\n')+ '\\n'\r\n\t\t\t\tvar ary = []\r\n\t\t\t\tif (act[0] !== '・') {\r\n\t\t\t\t\tbase.push(['会話', [[act, blocks]]])\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else act = act.slice(1)\r\n \r\n\t\t\t\tif (data.match(/\\t/)) {\r\n\t\t\t\t\tbase.push([act, ary])\r\n\t\t\t\t\t//LOG(data)\r\n\t\t\t\t\tparseOne(ary, data)\r\n\t\t\t\t} else base.push([act, blocks])\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tvar base = []\r\n\t\tcacheEmogi(text)\r\n\t\tparseOne(base, text)\r\n\t\treturn base\r\n\r\n\t}\r\n\r\n\r\n\r\n\tfunction copyObject(obj) {\r\n\t\treturn JSON.parse(JSON.stringify(obj))\r\n\t}\r\n\r\n\r\n\tfunction otherName(name) {\r\n\t\treturn function () { return this[name].apply(this, arguments) }\r\n\t}\r\n\r\n\r\n\r\n\tfunction cacheEmogi(text) {\r\n\t\t;(text.match(/\\\\\\[.+\\]/g) || []).forEach( eff => {\r\n\t\t\tvar name = eff.slice(2, -1)\r\n\t\t\ttoBlobEmogiURL(name)\r\n\t\t})\r\n\t}\r\n\r\n\r\n\r\n\tvar preloadAppend = (_ => {\r\n\r\n\t\tvar buffer = []\r\n\t\tvar max = 2\r\n\t\tvar n = 0\r\n\r\n\t\tfunction next() {\r\n\t\t\twhile (n < max) {\r\n\t\t\t\tvar func = buffer.shift()\r\n\t\t\t\tif (!func) return\r\n\t\t\t\t++n\r\n\t\t\t\tPromise.resolve(func()).through(_ => {\r\n\t\t\t\t\t--n\r\n\t\t\t\t\tnext()\r\n\t\t\t\t}).check()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction append(func) {\r\n\t\t\tbuffer.push(func)\r\n\t\t\tnext()\r\n\t\t}\r\n\r\n\t\treturn append\r\n\r\n\t})()\r\n\r\n\r\n\r\n\tfunction cacheScript(script, sname = script.sname) {\r\n\r\n\t\tif (!Array.isArray(script)) {\r\n\t\t\tLOG('不正なスクリプトのためキャッシュできない')\r\n\t\t\tLOG(script)\r\n\t\t\treturn Promise.reject('不正なスクリプトのためキャッシュできない')\r\n\t\t}\r\n\r\n\t\tvar {hashmark} = script\r\n\t\tif (!sname) LOG('!!!sname')\r\n\r\n\t\tscript = copyObject(script)\t\r\n\r\n\t\tvar cacheHandlers = {\r\n\t\t\t会話: otherName('何もしない'),\r\n\r\n\t\t\t背景(data) {\r\n\t\t\t\tvar name = data[0]\r\n\t\t\t\tappend(['背景', name, 'jpg'])\r\n\t\t\t},\r\n\r\n\t\t\t立絵: otherName('立ち絵'),\r\n\t\t\t立ち絵(data) {\r\n\t\t\t\t//LOG(data)\r\n\t\t\t\tdata.forEach( ary => {\r\n\r\n\t\t\t\t\tif (Util.isNoneType(ary)) return\r\n\t\t\t\t\tvar [position, names] = ary\r\n\t\t\t\t\tif (!position) return\r\n\t\t\t\t\tif(!names) return\r\n\r\n\t\t\t\t\tvar name = names[0]\r\n\r\n\t\t\t\t\tappend(['立ち絵', name, 'png'])\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t分岐系(data) {\r\n\r\n\t\t\t\tdata.forEach(ary => {\r\n\t\t\t\t\tvar value = ary[1]\r\n\t\t\t\t\tif (typeof value[0] == 'string') cacheHandlers['ジャンプ'](value)\r\n\t\t\t\t\telse cacheScript(value, sname)\r\n\t\t\t\t} )\r\n\t\t\t\t\t\r\n\t\t\t},\r\n\r\n\t\t\t選択: otherName('選択肢'),\r\n\t\t\t選択肢: otherName('分岐系'),\r\n\r\n\t\t\tジャンプ(data) {\r\n\r\n\t\t\t\tvar to = data[0]\r\n\t\t\t\tif (!to) return\r\n\t\t\t\tvar name = to, base = sname\r\n\t\t\t\tvar [name, mark = ''] = name.replace(/＃/g,'#').split('#')\r\n\t\t\t\tif (!name) name = base.replace(/＃/g,'#').split('#')[0]\r\n\t\t\t\tvar subkey = `${Player.data.scenarioName}/${Util.forceName('シナリオ', name, 'txt')}`\r\n\t\t\t\t//LOG(subkey)\r\n\t\t\t\tif (!cacheHas(subkey)) fetchScriptData(to, base).then( script => cacheScript(script) ).check()\r\n\t\t\t\t\r\n\t\t\t},\r\n\r\n\t\t\t変数: otherName('パラメータ'),\r\n\t\t\tパラメーター: otherName('パラメータ'),\r\n\t\t\tパラメータ: otherName('何もしない'),\r\n\r\n\t\t\t入力: otherName('何もしない'),\r\n\r\n\t\t\t繰返: otherName('繰り返し'),\r\n\t\t\t繰返し: otherName('繰り返し'),\r\n\t\t\t繰り返し: otherName('分岐系'),\r\n\r\n\t\t\t分岐: otherName('分岐系'),\r\n\r\n\t\t\tマーク: otherName('何もしない'),\r\n\r\n\t\t\tスクリプト: otherName('何もしない'),\r\n\r\n\t\t\tコメント: otherName('何もしない'),\r\n\r\n\t\t\t何もしない() {\r\n\t\t\t},\r\n\r\n\t\t}\r\n\r\n\r\n\t\tvar defer = Promise.defer()\r\n\t\tvar caching = 0\r\n\r\n\t\tfunction append(args, toURL = toBlobURL) {\r\n\t\t\t++caching\r\n\t\t\tpreloadAppend( _ => {\r\n\t\t\t\treturn toURL(...args).through( _ => {\r\n\t\t\t\t\tif (--caching <= 0) defer.resolve()\r\n\t\t\t\t}).check()\r\n\t\t\t})\r\n\t\t\t//.then( url => LOG(`キャッシュ：${url} ${toURL.name} ${args}`) ).\r\n\t\t}\r\n\r\n\r\n\t\tscript.forEach( prog => {\r\n\t\t\ttry {\r\n\r\n\t\t\t\tif (!prog) return\r\n\t\t\t\tvar act = prog[0].trim()\r\n\t\t\t\tvar data = prog[1]\r\n\r\n\t\t\t\tif (act in cacheHandlers) {\r\n\t\t\t\t\tcacheHandlers[act](data)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tLOG('キャッシュ中にサポートされていないコマンド『' +act+ '』に遭遇')\r\n\t\t\t\t}\r\n\r\n\t\t\t} catch (err) {\r\n\t\t\t\tLOG(`キャッシュ中にコマンド『${act}』で『${err}』が起きた`)\r\n\t\t\t}\r\n\r\n\t\t})\r\n\r\n\t\t//LOG(caching)\r\n\t\tif (caching == 0) defer.resolve()\r\n\r\n\t\treturn defer.promise\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n\tfunction runScript(script, sname = script.sname, parentComp, masterComp) {\r\n\r\n\t\tif (!sname) LOG('!!!sname')\r\n\t\tsname = sname.split('#')[0]\r\n\r\n\t\tView.changeModeIfNeeded('NOVEL')\r\n\t\tPlayer.data.phase = 'play'\r\n\t\tdocument.title = `【${Player.data.scenarioName}】`\r\n\r\n\t\tvar run = Promise.defer()\r\n\t\tif (!parentComp) parentComp = run.resolve\r\n\t\tif (!masterComp) masterComp = run.resolve\r\n\r\n\t\tvar {mark: hashmark, params, scenario} = script\r\n\r\n\t\tvar searching = !!hashmark\r\n\t\tif (params) Object.keys(params).forEach(name => Player.paramSet(name, params[name]))\r\n\t\tif (scenario) Player.setScenario(scenario)\r\n\t\t\r\n\t\tscript = copyObject(script)\t\r\n\r\n\t\tfunction runSubScript(script) { return runScript(script, sname, parentComp, masterComp) }\r\n\t\tfunction runChildScript(script) { return runScript(script, undefined, undefined, masterComp) }\r\n\t\t\r\n\t\tvar actHandlers = {\r\n\t\t\t会話(data, done, failed) {\r\n\r\n\t\t\t\tfunction nextPage() {\r\n\r\n\t\t\t\t\tvar ary = data.shift()\r\n\t\t\t\t\tif (!ary) return done()\r\n\r\n\t\t\t\t\tvar name = ary[0], texts = ary[1]\r\n\t\t\t\t\tif (Util.isNoneType(name)) name = ''\r\n\t\t\t\t\tname = replaceEffect(name)\r\n\t\t\t\t\tView.nextPage(name)\r\n\t\t\t\t\t//Player.data.currentSpeakerName = name\r\n\r\n\t\t\t\t\tfunction nextSentence() {\r\n\t\t\t\t\t\tvar text = texts.shift()\r\n\t\t\t\t\t\tif (!text) return nextPage()\r\n\t\t\t\t\t\ttext = text.replace(/\\\\w(\\d+)/g, (_, num) => {\r\n\t\t\t\t\t\t\treturn '\\u200B'.repeat(num)\r\n\t\t\t\t\t\t}).replace(/\\\\n/g, '\\n')\r\n\t\t\t\t\t\ttext = replaceEffect(text)\r\n\t\t\t\t\t\t//Player.data.currentSentence = text\r\n\t\t\t\t\t\tView.addSentence(text).on('go', nextSentence, failed)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnextSentence()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnextPage()\r\n\t\t\t},\r\n\r\n\t\t\t背景(data, done, failed) {\r\n\t\t\t\tvar name = replaceEffect(data[0])\r\n\t\t\t\ttoBlobURL('背景', name, 'jpg').then( url => View.setBGImage({ url }) ).then(done, failed)\r\n\t\t\t},\r\n\r\n\t\t\t立絵: otherName('立ち絵'),\r\n\t\t\t立ち絵(data, done, failed) {\r\n\t\t\t\t//LOG(data)\r\n\t\t\t\tPromise.all(data.reduce((base, ary) => {\r\n\r\n\t\t\t\t\tif (!base) return\r\n\r\n\t\t\t\t\tif (Util.isNoneType(ary)) return base\r\n\r\n\t\t\t\t\tvar [position, names] = ary\r\n\r\n\t\t\t\t\tif (!position) return failed('不正な位置検出')\r\n\t\t\t\t\tif(!names) return failed('不正な画像名検出') \r\n\r\n\t\t\t\t\tposition = replaceEffect(position)\r\n\t\t\t\t\tvar name = replaceEffect(names[0])\r\n\r\n\t\t\t\t\tvar a_type = ['left','right']['左右'.indexOf(position)]\r\n\t\t\t\t\tvar v_type = 'top'\r\n\t\t\t\t\tvar [a_per, v_per] = [0, 0]\r\n\t\t\t\t\tvar height = null\r\n\r\n\t\t\t\t\tif (!a_type) {\r\n\t\t\t\t\t\tvar pos = Util.toHalfWidth(position).match(/[+\\-0-9.]+/g)\r\n\t\t\t\t\t\tif (!pos) return failed('不正な位置検出')\r\n\t\t\t\t\t\tvar [a_pos, v_pos='0', height = null] = pos\r\n\t\t\t\t\t\ta_per = Math.abs(+a_pos)\r\n\t\t\t\t\t\tv_per = Math.abs(+v_pos)\r\n\t\t\t\t\t\ta_type = a_pos.match('-') ? 'right' : 'left'\r\n\t\t\t\t\t\tv_type = v_pos.match('-') ? 'bottom' : 'top'\r\n\t\t\t\t\t\theight = height != null ? `${+height}%` : null\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbase.push(toBlobURL('立ち絵', name, 'png').then( url => ({ url, height, [a_type]: `${a_per}%`, [v_type]: `${v_per}%` }) ))\r\n\t\t\t\t\treturn base\r\n\t\t\t\t}, [])).then(View.setFDImages.bind(View)).then(done, failed)\r\n\t\t\t},\r\n\r\n\t\t\t選択: otherName('選択肢'),\r\n\t\t\t選択肢(data, done, failed) {\r\n\r\n\t\t\t\tView.setChoiceWindow(data.map(ary => {\r\n\t\t\t\t\treturn { name: replaceEffect(ary[0]), value: ary[1] }\r\n\t\t\t\t})).then( value => {\r\n\t\t\t\t\tif (typeof value[0] == 'string') actHandlers['ジャンプ'](value, done, failed)\r\n\t\t\t\t\telse runSubScript(value).then(done, failed)\r\n\t\t\t\t} )\r\n\t\t\t\t\t\r\n\t\t\t},\r\n\r\n\t\t\tジャンプ(data, done, failed) {\r\n\t\t\t\tvar to = replaceEffect(data[0])\r\n\t\t\t\tfetchScriptData(to, sname).then( script => runChildScript(script) ).then(done, failed)\r\n\t\t\t},\r\n\r\n\t\t\t変数: otherName('パラメータ'),\r\n\t\t\tパラメーター: otherName('パラメータ'),\r\n\t\t\tパラメータ(data, done, failed) {\r\n\t\t\t\t//LOG(data)\r\n\t\t\t\tdata.forEach(str => {\r\n\t\t\t\t\tstr = Util.toHalfWidth(str)\r\n\t\t\t\t\tstr = str.match(/(.+)\\:(.+)/)\r\n\t\t\t\t\tif (!str) return failed('不正なパラメータ指定検出') \r\n\t\t\t\t\tvar name = replaceEffect(str[1])\r\n\t\t\t\t\tvar effect = str[2]\r\n\t\t\t\t//\tif (isNoneType(effect)) effect = '\"\"'\r\n\t\t\t\t\tif (!name) return failed('不正なパラメータ指定検出') \r\n\t\t\t\t\tvar eff = evalEffect(effect, failed)\r\n\t\t\t\t\t//LOG(name, effect, eff)\r\n\t\t\t\t\tparamSet(name, eff)\r\n\r\n\t\t\t\t})\r\n\t\t\t\tdone()\r\n\t\t\t},\r\n\r\n\t\t\t入力(data, done, failed) {\r\n\t\t\t\t//LOG(data)\r\n\t\t\t\tstr = Util.toHalfWidth(data[0])\r\n\t\t\t\tif (!str) return failed('不正なパラメータ指定検出') \r\n\t\t\t\tvar str = /.+\\:/.test(str) ? str.match(/(.+)\\:(.*)/) : [, str, '\"\"']\r\n\r\n\t\t\t\tvar name = replaceEffect(str[1])\r\n\t\t\t\tvar effect = str[2]\r\n\t\t\t\tvar eff = evalEffect(effect, failed)\r\n\t\t\t\t//LOG(name, effect, eff)\r\n\t\t\t\tvar rv = prompt('', eff) || eff\r\n\t\t\t\tparamSet(name, rv)\r\n\r\n\t\t\t\tdone()\r\n\t\t\t},\r\n\r\n\t\t\t繰返: otherName('繰り返し'),\r\n\t\t\t繰返し: otherName('繰り返し'),\r\n\t\t\t繰り返し(data, done, failed, i = 0) {\r\n\t\t\t\ti++\r\n\t\t\t\tif (i > 10000) return failed('繰り返し回数が多すぎる(10000回超え)')\r\n\t\t\t\tnew Promise( (ok, ng) => {\r\n\t \t\t\t\tif (!data.some(([effect, acts]) => {\r\n\t \t\t\t\t\tif (!effect) return failed('不正なパラメータ指定検出') \r\n\t\t\t\t\t\tvar flag = !!evalEffect(effect, ng)\r\n\t\t\t\t\t\tif (flag) runSubScript(acts).then(ok, ng)\r\n\t\t\t\t\t\treturn flag\r\n\t\t\t\t\t}) ) done()\r\n\t\t\t\t}).then( _ => actHandlers['繰り返し'](data, done, failed, i) ).catch(failed)\r\n\t\t\t},\r\n\r\n\t\t\t分岐(data, done, failed) {\r\n \t\t\t\tif (!data.some(([effect, acts]) => {\r\n \t\t\t\t\tif (!effect) return failed('不正なパラメータ指定検出') \r\n\t\t\t\t\tvar flag = !!evalEffect(effect, failed)\r\n\t\t\t\t\tif (flag) runSubScript(acts).then(done, failed)\r\n\t\t\t\t\treturn flag\r\n\t\t\t\t}) ) done()\r\n\t\t\t},\r\n\r\n\t\t\tマーク(data, done, failed) {\r\n\r\n\t\t\t\tif (parentComp != run.resolve) return failed('このコマンドはトップレベルにおいてください')\r\n\t\t\t\tvar params = {}\r\n\t\t\t\tparamForEach( (value, key) => params[key] = value )\r\n\t\t\t\tvar cp = {\r\n\t\t\t\t\tscript: sname, \r\n\t\t\t\t\tmark: data[0],\r\n\t\t\t\t\tparams,\r\n\t\t\t\t}\r\n\t\t\t\t//LOG(cp)\r\n\t\t\t\tPlayer.data.currentPoint = cp\r\n\t\t\t\tdone()\r\n\t\t\t\tupdateDebugWindow()\r\n\t\t\t},\r\n\r\n\t\t\tスクリプト(data, done, failed) {\r\n\t\t\t\tvar act = data[0]\r\n\t\t\t\tif (Util.isNoneType(act)) return done()\r\n\t\t\t\tswitch (act) {\r\n\t\t\t\t\tcase '抜ける':\r\n\t\t\t\t\tcase 'ぬける':\r\n\t\t\t\t\t\trun.resolve()\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tcase '戻る':\r\n\t\t\t\t\tcase 'もどる':\r\n\t\t\t\t\tcase '帰る':\r\n\t\t\t\t\tcase 'かえる':\r\n\t\t\t\t\t\tparentComp()\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tcase '終わる':\r\n\t\t\t\t\tcase '終る':\r\n\t\t\t\t\tcase 'おわる':\r\n\t\t\t\t\t\tmasterComp()\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\tfailed(`制御コマンド『${act}』`)\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tコメント(data, done, failed) {\r\n\t\t\t\tdone()\r\n\t\t\t},\r\n\r\n\t\t}\r\n\r\n\t\tfunction main_loop() {\r\n\r\n\t\t\t//updateDebugWindow()\r\n\r\n\t\t\tvar act, loop = new Promise( (resolve, reject) => {\r\n\r\n\t\t\t\tvar prog = script.shift()\r\n\t\t\t\tif (!prog) {\r\n\t\t\t\t\treturn searching ? run.reject(`マーク『${hashmark}』が見つかりません。`) : run.resolve() \r\n\t\t\t\t}\r\n\t\t\t\tact = prog[0].trim()\r\n\t\t\t\tvar data = prog[1]\r\n\r\n\t\t\t\tif (searching) {\r\n\t\t\t\t\tif (act == 'マーク') {\r\n\t\t\t\t\t\tvar mark = data[0]\r\n\t\t\t\t\t\tif (mark == hashmark) {\r\n\t\t\t\t\t\t\tsearching = false\r\n\t\t\t\t\t\t\treturn actHandlers['マーク']([mark], resolve, reject)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tresolve()\r\n\t\t\t\t} else if (act in actHandlers) {\r\n\t\t\t\t\tactHandlers[act](data, resolve, reject)\r\n\t\t\t\t} else {\r\n\t\t\t\t\tUtil.error('サポートされていないコマンド『' +act+ '』を検出しました。\\n\\nこのコマンドを飛ばして再生が継続されます。')\r\n\t\t\t\t\tresolve()\r\n\t\t\t\t}\r\n\r\n\t\t\t}).then(main_loop, err => {\r\n\t\t\t\tvar message = err ? `コマンド『${act}』で『${err}』が起こりました。` : `コマンド『${act}』が原因かもしれません。`\r\n\t\t\t\tUtil.error('スクリプトを解析中にエラーが発生しました。\\n\\n' +message+ '\\n\\nこのコマンドを保証せず再生が継続されます。')\r\n\t\t\t\treturn main_loop()\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t//cacheScript(script, sname, 1)\r\n\t\tmain_loop()\r\n\t\treturn run.promise\r\n\r\n\t}\r\n\r\n\r\n\r\n\tfunction replaceEffect(str) {\r\n\t\treturn str.replace(/\\\\{(.+?)}/g, (_, efect) => evalEffect(efect) )\r\n\t}\r\n\r\n\r\n\tfunction evalEffect(effect, failed) {\r\n\t\teffect = effect.trim()\r\n\t\tif (Util.isNoneType(effect)) return true\r\n\t\teffect = Util.toHalfWidth(effect)\r\n\t\t.replace(/\\\\/g,'\\\\\\\\')\r\n\t\t.replace(/\\=\\=/g, '=').replace(/[^!><=]\\=/g, str => str.replace('=', '==') )\r\n\t\t.replace(/\\&\\&/g, '&').replace(/[^!><&]\\&/g, str => str.replace('&', '&&') )\r\n\t\t.replace(/\\|\\|/g, '|').replace(/[^!><|]\\|/g, str => str.replace('|', '||') )\r\n\t\t.replace(/^ー/, '-').replace(/([\\u1-\\u1000\\s])(ー)/g, '$1-').replace(/(ー)([\\u1-\\u1000\\s])/g, '-$2')\r\n\t\tif (!effect) return failed('不正なパラメータ指定検出') \r\n\t\tif (/\\'/.test(effect)) return failed('危険な記号の検出') \r\n\t\teffect = effect.replace(/[^+\\-*/%><!=?:()&|\\s]+/g, str => {\r\n\t\t\tif (/^[0-9.]+$/.test(str)) return str\r\n\t\t\tif (/^\"[^\"]*\"$/.test(str)) return str\r\n\t\t\treturn `paramGet('${str}')`\r\n\t\t})\r\n\t\t//LOG(effect)\r\n\t\treturn eval(effect)\r\n\t}\r\n\r\n\r\n\tfunction updateDebugWindow() {\r\n\r\n\t\tif (!Data.debug) return\r\n\r\n\t\tvar params = {}\r\n\t\tparamForEach( (value, key) => params[key] = value )\r\n\r\n\t\tvar cacheSizeMB = ((cacheGet('$size') || 0) / 1024 / 1024).toFixed(1)\r\n\t\tvar mark = Player.data.currentPoint && Player.data.currentPoint.mark || '（無し）'\r\n\r\n\t\tvar obj = {\r\n\t\t\tキャッシュサイズ: cacheSizeMB + 'MB',\r\n\t\t\t現在のマーク: mark,\r\n\t\t\tパラメータ: params,\r\n\t\t}\r\n\r\n\t\tView.updateDebugWindow(obj)\r\n\t}\r\n\r\n\r\n\tfunction toBlobEmogiURL(name) {\r\n\t\treturn toBlobURL('絵文字', name, 'svg')\r\n\t}\r\n\r\n\tfunction toBlobScriptURL(name) {\r\n\t\treturn toBlobURL('シナリオ', name, 'txt')\r\n\t}\r\n\r\n\r\n\tfunction toBlobURL(kind, name, type, sys = false) {\r\n\t\tvar root = sys ? 'エンジン' : 'データ'\r\n\t\tvar sub = Util.forceName(kind, name, type)\r\n\t\tvar subkey = sys ? `${sub}` : `${Player.data.scenarioName}/${sub}`\r\n\t\tif (Util.isNoneType(name)) return Promise.resolve(null)\r\n\t\tif (cacheHas(subkey)) return Promise.resolve(cacheGet(subkey))\r\n\t\tvar defer = Promise.defer()\r\n\t\tcacheSet(subkey, defer.promise)\r\n\t\tvar hide = View.setLoadingMessage('Loading...')\r\n\t\treturn new Promise( (ok, ng) => {\t\t\r\n\t\t\tfind(`${root}/${subkey}`).catch( _ => `${root}/[[共通素材]]/${sub}` ).then( url => ok(url), ng)\r\n\t\t}).then(loadBlob).then( blob => {\r\n\t\t\tvar blobURL = URL.createObjectURL(blob)\r\n\t\t\tdefer.resolve(blobURL)\r\n\t\t\tcacheSizeUpdate(blob.size)\r\n\t\t\t//Storage.testPut(subkey, blob)\r\n\t\t\thide()\r\n\t\t\treturn blobURL\r\n\t\t}).through(hide)\r\n\t}\r\n\r\n\r\n\r\n\tfunction fetchSettingData(url) {\r\n\t\treturn loadText(url).then( text => {\r\n\t\t\tvar setting = parseScript(text)\r\n\t\t\tvar data = {}\r\n\t\t\tsetting.forEach( ary => {\r\n\t\t\t\tdata[ary[0]] = ary[1]\r\n\t\t\t})\r\n\t\t\treturn data\r\n\t\t} )\r\n\t}\r\n\r\n\r\n\tfunction fetchScriptData(name, base) {\r\n\t\tif (!name) return Promise.reject('子スクリプト名が不正')\r\n\t\tvar [name, mark = ''] = name.replace(/＃/g,'#').split('#')\r\n\t\tif (!name) {\r\n\t\t\tif (!base) return Promise.reject('親スクリプト名が必要')\r\n\t\t\tname = base.replace(/＃/g,'#').split('#')[0]\r\n\t\t}\r\n\t\treturn toBlobScriptURL(name).then(loadText).then( text => parseScript(text) ).then(script => {\r\n\t\t\tscript.unshift(['マーク',['']])\r\n\t\t\tscript.mark = mark\r\n\t\t\tscript.sname = name\r\n\t\t\treturn script\r\n\t\t})\r\n\t}\r\n\r\n\r\n\tfunction fetchSEData(name, sys) {\r\n\t\treturn toBlobURL('効果音', name, 'ogg', sys)\r\n\t}\r\n\r\n\r\n\tfunction loadText(url) {\r\n\t\treturn load(url, 'text')\r\n\t}\r\n\r\n\tfunction loadBlob(url) {\r\n\t\treturn load(url, 'blob')\r\n\t}\r\n\r\n\tfunction load(url, type) {\r\n\t\treturn new Promise(function (ok, ng) {\r\n\t\t\tvar xhr = new XMLHttpRequest()\r\n\t\t\txhr.onload = _ => ok(xhr.response)\r\n\t\t\txhr.onerror = _ => ng(new Error(`ファイルURL『${url}』のロードに失敗`))\r\n\t\t\txhr.open('GET', url)\r\n\t\t\tif (type) xhr.responseType = type\r\n\t\t\txhr.send()\r\n\t\t})\r\n\t}\r\n\r\n\tfunction find(url) {\r\n\t\treturn new Promise(function (ok, ng) {\r\n\t\t\tvar xhr = new XMLHttpRequest()\r\n\t\t\txhr.onload = _ => {\r\n\t\t\t\tif (xhr.status < 300) ok(url)\r\n\t\t\t\telse ng(new Error(`ファイルURL『${url}』が見つからない`)) \r\n\t\t\t}\r\n\t\t\txhr.onerror = _ => ng(new Error(`ファイルURL『${url}』のロードに失敗`))\r\n\t\t\txhr.open('HEAD', url)\r\n\t\t\txhr.send()\r\n\t\t})\r\n\r\n\t}\r\n\r\n\r\n\tfunction print(message) {\r\n\t\tif (!View.print) View.changeMode('TEST')\r\n\t\tView.print(message)\r\n\t}\r\n\r\n\r\n\tfunction save(no) {\r\n\t\tvar cp = Player.data.currentPoint\r\n\t\tif (!cp) return Promise.reject('直近のセーブポイントが見つかりません。')\r\n\t\treturn Storage.setSaveData(no, cp)\r\n\r\n\t}\r\n\r\n\r\n\tfunction loadSaveData() {\r\n\t\treturn Util.co(function* () {\r\n\t\t\tvar saves = yield Storage.getSaveDatas(0, 100)\r\n\t\t\tvar opts = saves.map( (save, i) => {\r\n\t\t\t\tvar mark = save ? save.mark : '----------'\r\n\t\t\t\tvar name = i === 0 ? 'Q' : i\r\n\t\t\t\treturn {name: `${name}．${mark}`, value: save, disabled: !save }\r\n\t\t\t})\r\n\t\t\tvar save = yield View.setChoiceWindow(opts, {sys: true})\r\n\t\t\tvar {mark, params, script} = save\r\n\t\t\treturn Player.fetchScriptData(`${script}#${mark}`).then( script => {\r\n\t\t\t\tscript.params = params\r\n\t\t\t\tscript.scenario = Player.data.scenarioName\r\n\t\t\t\treturn script\r\n\t\t\t})\r\n\t\t})()\r\n\t}\r\n\r\n\tfunction saveSaveData() {\r\n\t\treturn Util.co(function* () {\r\n\t\t\tvar saves = yield Storage.getSaveDatas(0, 100)\r\n\t\t\tvar opts = saves.map( (save, i) => {\r\n\t\t\t\tvar mark = save ? save.mark : '----------'\r\n\t\t\t\tvar name = i === 0 ? 'Q' : i\r\n\t\t\t\treturn {name: `${name}．${mark}`, value: i}\r\n\t\t\t})\r\n\t\t\t// 注意\r\n\t\t\tvar no = (yield View.setChoiceWindow(opts, {sys: true})) + 0\r\n\r\n\t\t\tvar params = {}\r\n\t\t\tparamForEach( (value, key) => params[key] = value )\r\n\t\t\tvar save = Player.data.currentPoint\r\n\r\n\t\t\treturn yield Storage.setSaveData(no, save)\r\n\t\t\t\r\n\t\t})()\r\n\t}\r\n\r\n\r\n\tfunction init() {\r\n\t\tPlayer.data = {}\r\n\t\tPlayer.data.phase = 'pause'\r\n\t\tPlayer.setRunPhase('準備')\r\n\t\tPlayer.paramClear()\r\n\t\tView.clean()\r\n\t}\r\n\r\n\tfunction setScenario(scenario) {\r\n\t\tPlayer.data.scenarioName = scenario\r\n\t}\r\n\r\n\r\n\r\n\tvar {cacheClear, cacheHas, cacheGet, cacheSet, cacheSizeUpdate} = (_ => {\r\n\r\n\t\tvar cacheMap = new Map\r\n\t\tcacheInit()\r\n\r\n\t\tfunction cacheInit() {\r\n\t\t\tcacheMap.clear()\r\n\t\t\tcacheMap.set('$size', 0)\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tcacheClear() {\r\n\t\t\t\tcacheMap.forEach( (_, p) => { if (p.then) p.then(url => URL.revokeObjectURL(url)) } )\r\n\t\t\t\tcacheInit()\r\n\t\t\t\tupdateDebugWindow()\r\n\t\t\t},\r\n\t\t\tcacheHas(key) { return cacheMap.has(key) },\r\n\t\t\tcacheGet(key) { return cacheMap.get(key) },\r\n\t\t\tcacheSet(key, val) { cacheMap.set(key, val) },\r\n\t\t\tcacheSizeUpdate(n) { \r\n\t\t\t\tcacheMap.set('$size', cacheMap.get('$size') + n)\r\n\t\t\t\t//LOG(n, cacheGet('$size'))\r\n\t\t\t\tupdateDebugWindow()\r\n\t\t\t},\r\n\t\t}\r\n\t})()\r\n\r\n\tvar {paramSet, paramGet, paramClear, paramForEach} = (_ => {\r\n\t\tvar paramMap = new Map\r\n\r\n\t\treturn {\r\n\t\t\tparamSet(key, val) {\r\n\t\t\t\tparamMap.set(key, val)\r\n\t\t\t\tupdateDebugWindow()\r\n\t\t\t},\r\n\t\t\tparamGet(key) {\r\n\t\t\t\tif (!paramMap.has(key)) {\r\n\t\t\t\t\tparamMap.set(key, 0)\r\n\t\t\t\t\tupdateDebugWindow()\r\n\t\t\t\t}\r\n\t\t\t\treturn paramMap.get(key)\r\n\t\t\t},\r\n\t\t\tparamClear() {\r\n\t\t\t\tparamMap.clear()\r\n\t\t\t\tupdateDebugWindow()\r\n\t\t\t},\r\n\t\t\tparamForEach(func) {\r\n\t\t\t\tparamMap.forEach(func)\r\n\t\t\t}\r\n\t\t}\r\n\t})()\r\n\r\n\tREADY.Player.ready({\r\n\t\tsetRunPhase, setErrorPhase, fetchSettingData, fetchScriptData, fetchSEData, runScript, print, cacheClear, paramClear,\r\n\t\ttoBlobURL, toBlobEmogiURL, find, save, data: {}, loadSaveData, saveSaveData, paramSet, paramGet, evalEffect, init, setScenario,\r\n\t\tcacheScript, load,\r\n\t})\r\n\r\n}).check()","($__placeholder__0 = $__placeholder__1[$__placeholder__2]) === void 0 ?\n        $__placeholder__3 : $__placeholder__4","$traceurRuntime.toObject($__placeholder__0)","$traceurRuntime.initGeneratorFunction($__placeholder__0)","return $__placeholder__0(\n              $__placeholder__1,\n              $__placeholder__2, this);","$traceurRuntime.createGeneratorInstance","function($ctx) {\n      while (true) $__placeholder__0\n    }","return $__placeholder__0","$ctx.sent","$ctx.returnValue = $__placeholder__0","return $ctx.end()","\r\nREADY('Storage', 'Player', 'DOM', 'Sound').then( _ => {\r\n\t'use strict'\r\n\r\n\tvar View = null\r\n\r\n\tvar clickSE = new Sound('sysSE', '選択')\r\n\tvar focusSE = new Sound('sysSE', 'フォーカス')\r\n\r\n\tvar EP = Element.prototype\r\n\tUtil.setDefaults(EP, {\r\n\t\ton\t\t\t\t\t: EP.addEventListener,\r\n\t\trequestFullscreen\t: EP.webkitRequestFullscreen || EP.mozRequestFullScreen,\r\n\t\tappend\t\t\t\t: EP.appendChild,\r\n\t\tremoveChildren\t\t: function () { this.innerHTML = ''; return this },\r\n\t\tsetStyles\t\t\t: function (styles) {\r\n\t\t\tstyles = styles || {}\r\n\t\t\tObject.keys(styles).forEach( key => { if (styles[key] != null) this.style[key] = styles[key] }, this)\r\n\t\t\treturn this\r\n\t\t},\r\n\t})\r\n\t\r\n\tif (!document.onfullscreenchange) Object.defineProperty(document, 'onfullscreenchange', {\r\n\t\tset: val => {\r\n\t\t\tif ('onwebkitfullscreenchange' in document) document.onwebkitfullscreenchange = val\r\n\t\t\telse document.onmozfullscreenchange = val\r\n\t\t}\r\n\t})\r\n\tif (!document.fullscreenElement) Object.defineProperty(document, 'fullscreenElement', {\r\n\t\tget: _ => document.webkitFullscreenElement || document.mozFullScreenElement,\r\n\t})\r\n\r\n\tvar $isWebkit = !!EP.webkitRequestFullscreen\r\n\r\n\tfunction DOM(tagName, styles) {\r\n\t\tif (tagName == 'text') return document.createTextNode(styles)\r\n\t\tvar el = document.createElement(tagName)\r\n\t\treturn el.setStyles(styles)\r\n\t}\r\n\r\n\r\n\tvar query    = document.querySelector.bind(document),\r\n\t    queryAll = document.querySelectorAll.bind(document)\r\n\r\n\tvar el_root    = query('#ONPwrapper'),\r\n\t\tel_wrapper = new DOM('div'),\r\n\t    el_player  = new DOM('div'),\r\n\t    el_context = new DOM('div')\r\n\r\n\t\tel_root.removeChildren()\r\n\t\tel_root.append(el_wrapper).append(el_player).append(el_context)\r\n\r\n\t//var RAF = requestAnimationFrame\r\n\r\n\r\n\tfunction adjustScale(height, ratio, full) {\r\n\r\n\t\t//LOG(arguments)\r\n\t\tvar p = Promise.resolve()\r\n\r\n\t\tif (!full) {\r\n\t\t\tel_player.style.height = '100%'\r\n\t\t\tif (height * devicePixelRatio < 480) p = View.showNotice('表示領域が小さ過ぎるため\\n表示が崩れる場合があります')\r\n\t\t}\r\n\r\n\t\tvar ratio = ratio || 16 / 9\r\n\r\n\t\tvar width = height * ratio\r\n\r\n\r\n\t\tel_player.style.fontSize = height / 25 + 'px'\r\n\r\n\t\tel_wrapper.style.height = height + 'px'\r\n\t\tel_wrapper.style.width  = width  + 'px'\r\n\r\n\t\tel_debug.style.width = width - 10 + 'px'\r\n\r\n\t\tif (full) {\r\n\t\t\tel_player.style.height = height + 'px'\r\n\t\t\tif (el_fullscreen) el_fullscreen.style.height = height + 'px'\r\n\t\t} else fitScreen = Util.NOP \r\n\r\n\t\treturn p\r\n\r\n\t}\r\n\t\r\n\r\n\r\n\tvar el_debug = el_root.append(new DOM('div', {\r\n\t\twidth\t\t: '320px',\r\n\t\ttextAlign\t: 'center',\r\n\t\tfontSize\t: '1em',\r\n\t\tpadding\t\t: '5px',\r\n\t}))\r\n\r\n\r\n\tvar bs = {\r\n\t\theight: '2em',\r\n\t\tmargin: '5px',\r\n\t}\r\n\r\n\tvar createDdebugSub = _ => el_debug.append(new DOM('div', { display: 'inline-block' }))\r\n\tvar el_debugSub = createDdebugSub()\r\n\t;[360, 480, 720, 1080].forEach( size => {\r\n\t\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\t\tel.append(new DOM('text', size + 'p'))\r\n\t\tel.on('click', _ =>\tadjustScale(size / devicePixelRatio) )\r\n\t})\r\n\t\r\n\tvar el_debugSub = createDdebugSub()\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'フルウィンドウ(横)'))\r\n\tel.on('click', _ => {\r\n\t\tfitScreen = _ => {\r\n\t\t\tvar ratio = 16 / 9\r\n\t\t\tvar width = document.body.clientWidth\r\n\t\t\tvar height = width / ratio\r\n\t\t\tadjustScale(height, 0, true)\r\n\t\t}\r\n\t\tfitScreen()\r\n\t})\r\n\tvar el_fullscreen\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'フルスクリーン(横)'))\r\n\tel.on('click', _ => {\r\n\t\tel_fullscreen = new DOM('div', {width: '100%', height: '100%', fontSize: '100%'})\r\n\t\tel_player.remove()\r\n\t\tel_wrapper.append(el_fullscreen).append(el_player)\r\n\t\tel_fullscreen.requestFullscreen()\r\n\t\tfitScreen = _ => {\r\n\t\t\tvar ratio = 16 / 9\r\n\t\t\tvar width = screen.width, height = screen.height\r\n\t\t\tif (height * ratio > width) height = width / ratio\r\n\t\t\tadjustScale(height, 0, true)\r\n\t\t}\r\n\t\tfitScreen()\r\n\t\tView.showNotice('この機能はブラウザにより\\n表示の差があります')\r\n\t})\r\n\r\n\r\n\tvar el_debugSub = createDdebugSub()\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', '右クリック'))\r\n\tel.on('click', _ => {\r\n\t\tfireEvent('Rclick')\r\n\t})\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'サウンド有無'))\r\n\tel.on('click', _ => {\r\n\t\tvar e = !Sound.soundEnabled\r\n\t\tSound.soundEnabled = e\r\n\t\tStorage.setSetting('soundEnabled', e).check()\r\n\t\tif (Sound.soundAvailability)\r\n\t\t\tView.showNotice(`サウンドを${e?'有':'無'}効に設定しました`)\r\n\t\telse\r\n\t\t\tView.showNotice(`サウンドを${e?'有':'無'}効に設定しました`+'\\nただしお使いの環境では音が出せません')\r\n\t})\r\n\r\n\tvar el_debugSub = createDdebugSub()\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'キャシュ削除'))\r\n\tel.on('click', _ => {\r\n\t\tPlayer.cacheClear()\r\n\t\tView.showNotice('キャッシュを削除しました')\r\n\t})\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'リセット'))\r\n\tel.on('click', _ => {\r\n\t\tGame.reset()\r\n\t})\r\n\r\n\r\n\tvar el = new DOM('div')\r\n\tvar el_debugWindow = el_debug.append(el).append(new DOM('pre', { textAlign: 'left', whiteSpace: 'pre-wrap' }))\r\n\tel_debugWindow.textContent = 'デバッグ情報\\n（無し）'\r\n\r\n\r\n\r\n\tfunction setAnimate(func) {\r\n\t\tvar start = performance.now()\r\n\t\tvar cancelled = false\r\n\t\tvar paused = false\r\n\t\treturn new Promise(ok => {\r\n\t\t\tvar complete = _ => {\r\n\t\t\t\tcancelled = true\r\n\t\t\t\tok()\r\n\t\t\t}\r\n\t\t\tvar pause = _ => {\r\n\t\t\t\tpaused = true\r\n\t\t\t\treturn _ => requestAnimationFrame(loop)\r\n\t\t\t}\r\n\t\t\tvar loop = now => {\r\n\t\t\t\tif (cancelled) return\r\n\t\t\t\tvar delta = now - start\r\n\t\t\t\tif (delta < 0) delta = 0\r\n\t\t\t\tif (!paused) requestAnimationFrame(loop)\r\n\t\t\t\tfunc(delta, complete, pause)\r\n\t\t\t}\r\n\t\t\trequestAnimationFrame(loop)\r\n\t\t})\r\n\r\n\t}\r\n\r\n\r\n\r\n\r\n\tvar fitScreen = Util.NOP\r\n\twindow.onresize = _ => fitScreen()\r\n\r\n\tdocument.onfullscreenchange = _ => {\r\n\t\tvar full = document.fullscreenElement == el_fullscreen\r\n\t\t//LOG(full)\r\n\t\tif (!full) {\r\n\t\t\tel_fullscreen.remove()\r\n\t\t\tel_fullscreen.removeChildren()\r\n\t\t\tel_wrapper.append(el_player)\r\n\t\t\tadjustScale($scale, $ratio)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tvar METHODS = {}\r\n\r\n\tMETHODS = {\r\n\t\tCOMMON: {\r\n\r\n\t\t\tclean: function () {\r\n\t\t\t\tthis.changeMode($mode)\r\n\t\t\t},\r\n\r\n\t\t\tinit: function (opt) {\r\n\t\t\t\tthis.initDisplay(opt.style || {})\r\n\t\t\t},\r\n\r\n\t\t\tchangeMode: function (type, opt) {\r\n\t\t\t\tvar type = type.toUpperCase()\r\n\t\t\t\topt = opt || {}\r\n\r\n\t\t\t\tif (!(type in METHODS)) throw 'illegal ViewContext mode type'\r\n\r\n\t\t\t\t$mode = type\r\n\t\t\t\tglobal.View = View = { __proto__: METHODS[type] }\r\n\t\t\t\tView.init(opt)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tchangeModeIfNeeded: function (type, opt) {\r\n\t\t\t\tif ($mode != type) this.changeMode(type, opt)\r\n\t\t\t},\r\n\r\n\t\t\ton: function (kind, onFulfilled, onRejected) {\r\n\t\t\t\tvar rehook = _ => View.on(kind, onFulfilled, onRejected)\r\n\t\t\t\treturn new Promise( resolve => hookInput(kind, resolve) ).then( _ => rehook ).then(onFulfilled).check().catch(onRejected)\r\n\t\t\t},\r\n\r\n\t\t\tinitDisplay: function (opt) {\r\n\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\tbackground\t\t: 'black',\r\n\t\t\t\t\tmargin\t\t\t: 'auto',\r\n\t\t\t\t\tposition\t\t: 'relative',\r\n\t\t\t\t\thidth\t\t\t: '100%',\r\n\t\t\t\t\theight\t\t\t: '100%',\r\n\t\t\t\t\toverflow\t\t: 'hidden',\r\n\t\t\t\t//\t$height\t\t\t: 360,\r\n\t\t\t\t//\t$raito\t\t\t: 16 / 9,\r\n\t\t\t\t})\r\n\r\n\t\t\t\thookClear()\r\n\t\t\t\tthis.windows = {}\r\n\r\n\t\t\t\tvar height = opt.HEIGHT || 480\r\n\t\t\t\topt.height = opt.width = '100%'\r\n\r\n\t\t\t\tel_context = new DOM('div')\r\n\t\t\t\tel_player.removeChildren()\r\n\t\t\t\tel_player.append(el_context)\r\n\t\t\t\tel_wrapper.setStyles({ overflow\t: 'hidden', maxHeight: '100%', maxWidth: '100%' })\r\n\t\t\t\tif (!document.fullscreenElement) el_player.setStyles({ position: 'relative', overflow: 'hidden', height: '100%', width: '100%' })\r\n\t\t\t\tel_context.setStyles(opt)\r\n\t\t\t},\r\n\r\n\t\t\tshowNotice: function (message, show_time, delay_time = 250) {\r\n\t\t\t\tif (!message) throw 'illegal message string'\r\n\t\t\t\tif (!show_time) show_time = message.split('\\n').length * 500\r\n\t\t\t\tmessage = '【！】\\n' + message\r\n\t\t\t\tvar noticeWindow = new DOM('div', {\r\n\t\t\t\t\tfontSize\t\t: '2em',\r\n\t\t\t\t\tcolor\t\t\t: 'rgba(0,0,0,0.75)',\r\n\t\t\t\t\ttextShadow\t\t: 'rgba(0,0,0,0.75) 0.01em 0.01em 0.01em',\r\n\t\t\t\t\tbackgroundColor\t: 'rgba(255,255,0,0.75)',\r\n\t\t\t\t\tboxShadow\t\t: 'rgba(100,100,0,0.5) 0px 0px 5px 5px',\r\n\t\t\t\t\tborderRadius\t: '2% / 10%',\r\n\t\t\t\t\ttextAlign\t\t: 'center',\r\n\t\t\t\t\tlineHeight\t\t: '1.5em',\r\n\t\t\t\t\topacity\t\t\t: '0',\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tleft\t\t\t: 'calc((100% - 90%) / 2)',\r\n\t\t\t\t\ttop\t\t\t\t: '20%',\r\n\t\t\t\t\tzIndex\t\t\t: '100',\r\n\t\t\t\t\twidth\t\t\t: '90%',\r\n\t\t\t\t})\r\n\t\t\t\tel_player.append(noticeWindow).append(new DOM('pre', {margin: '5%'})).append(new DOM('text', message))\r\n\t\t\t\treturn new Promise(function (ok, ng) {\r\n\t\t\t\t\tvar opacity = 0\r\n\t\t\t\t\tsetAnimate(function (delta, complete) {\r\n\t\t\t\t\t\topacity = delta / delay_time\r\n\t\t\t\t\t\tif (opacity >= 1) {\r\n\t\t\t\t\t\t\topacity = 1\r\n\t\t\t\t\t\t\tvibrate([100,100,100])\r\n\t\t\t\t\t\t\tcomplete()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnoticeWindow.style.opacity = opacity\r\n\t\t\t\t\t}).delay(show_time).and(setAnimate, (delta, complete) => {\r\n\t\t\t\t\t\topacity = 1 - delta / delay_time\r\n\t\t\t\t\t\tif (opacity <= 0) {\r\n\t\t\t\t\t\t\topacity = 0\r\n\t\t\t\t\t\t\tcomplete()\r\n\t\t\t\t\t\t\tnoticeWindow.remove()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnoticeWindow.style.opacity = opacity\r\n\t\t\t\t\t}).then(ok, ng)\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tsetLoadingMessage: function (message) {\r\n\t\t\t\tvar loadingWindow = new DOM('div', {\r\n\t\t\t\t\tfontSize\t\t: '1em',\r\n\t\t\t\t\tcolor\t\t\t: 'rgba(255,255,255,0.25)',\r\n\t\t\t\t\ttextShadow\t\t: 'rgba(0,0,0,0.5) 0.1em 0.1em 0.1em',\r\n\t\t\t\t//\ttextAlign\t\t: 'center',\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tright\t\t\t: '0%',\r\n\t\t\t\t\tbottom\t\t\t: '0%',\r\n\t\t\t\t\tzIndex\t\t\t: '900',\r\n\t\t\t\t//\twidth\t\t\t: 'auto',\r\n\t\t\t\t})\r\n\r\n\t\t\t\tvar defer = Promise.defer()\r\n\t\t\t\tPromise.resolve().delay(100).then(defer.resolve)\r\n\t\t\t\tdefer.promise.then( _ => el_player.append(loadingWindow).append(new DOM('pre', {margin: '0%'})).append(new DOM('text', message)) )\r\n\t\t\t\tfunction hide() { defer.reject(); loadingWindow.remove() }\r\n\t\t\t\treturn hide\r\n\r\n\t\t\t},\r\n\r\n\t\t\tadjustScale, setAnimate,\r\n\r\n\t\t\tupdateDebugWindow: function (obj) {\r\n\t\t\t\tel_debugWindow.textContent = 'デバッグ情報\\n' + JSON.stringify(obj, null, 4)\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n\r\n\tMETHODS = {\r\n\t\tTEST: { __proto__: METHODS.COMMON,\r\n\t\t\tinitDisplay: function (opt) {\r\n\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\tfontSize\t\t: 'calc(100% * 2 / 3)',\r\n\t\t\t\t\tcolor\t\t\t: 'white',\r\n\t\t\t\t})\r\n\t\t\t\tthis.__proto__.__proto__.initDisplay(opt)\r\n\t\t\t\tvar el = new DOM('div', {\r\n\t\t\t\t\tpadding: '10px',\r\n\t\t\t\t})\r\n\t\t\t\tvar el_body = new DOM('pre')\r\n\t\t\t\tthis.el_test = el_body\r\n\t\t\t\tel_context.append(el).append(el_body)\r\n\t\t\t},\r\n\t\t\tprint: function (text, opt) {\r\n\t\t\t\tthis.el_test.textContent += text\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\tNOVEL: { __proto__: METHODS.COMMON,\r\n\t\t\tinitDisplay: function (opt) {\r\n\t\t\t\t//LOG('initDisplay')\r\n\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\tcolor\t\t\t: 'rgba(255,255,255,0.9)',\r\n\t\t\t\t//\tfontSize\t\t: 'calc(480px / 20)',\r\n\t\t\t\t\ttextShadow\t\t: 'rgba(0,0,0,0.9) 0.1em 0.1em 0.1em',\r\n\t\t\t\t\toverflow\t\t: 'hidden',\r\n\t\t\t\t})\r\n\t\t\t\tthis.__proto__.__proto__.initDisplay(opt)\r\n\r\n\t\t\t\tthis.mainMessageWindow = this.addMessageWindow({z:10})\r\n\t\t\t\tthis.imageFrame = this.addImageFrame({z:20})\r\n\r\n\t\t\t\tView.on('menu').then(_ => this.showMenu()).check()\r\n\t\t\t},\r\n\r\n\t\t\tmessageWindowProto: {\r\n\t\t\t\tnextPage: function (name, {sys = false} = {}) {\t\t\r\n\t\t\t\t\tView.windows.message.setStyles({\r\n\t\t\t\t\t\tbackground\t\t:  sys ? 'rgba(0,100,50,0.5)' : 'rgba(0,0,100,0.5)',\r\n\t\t\t\t\t\tboxShadow\t\t: (sys ? 'rgba(0,100,50,0.5)' : 'rgba(0,0,100,0.5)') + ' 0 0 0.5em 0.5em',\r\n\t\t\t\t\t})\r\n\t\t\t\t\tname = !name || name.match(/^\\s+$/) ? '' : '【' +name+ '】' \r\n\t\t\t\t\tthis.el_title.textContent = name\r\n\t\t\t\t\tthis.el_body.removeChildren()\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\taddSentence: function (text, opt) {\r\n\t\t\t\t\ttext += '\\n'\r\n\t\t\t\t\topt = Util.setDefaults(opt, {\r\n\t\t\t\t\t\tweight: 25\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar length = text.length\r\n\t\t\t\t\tvar at = 0, nl = 0\r\n\t\t\t\t\tvar el = this.el_body\r\n\t\t\t\t\tvar weight = opt.weight\r\n\t\t\t\t\tvar [aborted, cancelled] = [false, false]\r\n\t\t\t\t\tvar [abort, cancel] = [_ => aborted = true, _ => cancelled = true]\r\n\t\t\t\t\tView.on('go').then(cancel)\r\n\r\n\t\t\t\t\tvar p = setAnimate( (delay, complete, pause) => {\r\n\t\t\t\t\t\tif (aborted) return complete()\r\n\t\t\t\t\t\tif (cancelled) {\r\n\t\t\t\t\t\t\t//el.append(new DOM('text', text.slice(at).replace(/\\u200B/g, '') ))\r\n\t\t\t\t\t\t\t//return complete()\r\n\t\t\t\t\t\t\tnl = length\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twhile (delay / weight >= at - nl) {\r\n\t\t\t\t\t\t\tvar str = text[at]\r\n\t\t\t\t\t\t\tif (!str) return complete()\r\n\t\t\t\t\t\t\tif (str == '\\\\' && /\\[.+\\]/.test(text.slice(at))) {\r\n\t\t\t\t\t\t\t\tvar nat = text.indexOf(']', at)\r\n\t\t\t\t\t\t\t\tvar name = text.slice(at+2, nat).trim()\r\n\t\t\t\t\t\t\t\tif ($isWebkit) {\r\n\t\t\t\t\t\t\t\t\tvar img = el.append(new DOM('img', { height: '0.75em', width: '0.75em' }))\r\n\t\t\t\t\t\t\t\t\t;((img, name) => Player.toBlobEmogiURL(name).then( url => {img.src = url} ).catch(LOG))(img, name)\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tvar img = el.append(new DOM('object', { height: '0.75em', width: '0.75em' }))\r\n\t\t\t\t\t\t\t\t\timg.type = 'image/svg+xml'\r\n\t\t\t\t\t\t\t\t\t;((img, name) => Player.toBlobEmogiURL(name).then( url => {img.data = url} ).catch(LOG))(img, name)\r\n\t\t\t\t\t\t\t\t/*\r\n\t\t\t\t\t\t\t\t\t;((img, name) => {\r\n\t\t\t\t\t\t\t\t\t\tvar sub = Util.forceName('絵文字', name, 'svg')\r\n\t\t\t\t\t\t\t\t\t\tvar subkey = `${Player.scenarioName}/${sub}`\r\n\t\t\t\t\t\t\t\t\t\tPlayer.find(`データ/${subkey}`).catch( _ => `データ/[[共通素材]]/${sub}` ).then( url => {img.src = url} ).catch(LOG)\r\n\t\t\t\t\t\t\t\t\t})(img, name)\r\n\t\t\t\t\t\t\t\t*/\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tnl += nat - at\r\n\t\t\t\t\t\t\t\tat = nat\r\n\t\t\t\t\t\t\t} else if (str != '\\u200B') el.append(new DOM('text', str))\r\n\t\t\t\t\t\t\tif (++at >= length) return complete()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tp.abort = abort\r\n\t\t\t\t\tp.cancel = cancel\r\n\t\t\t\t\treturn p\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\taddMessageWindow: function (opt) {\r\n\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\tbackground\t\t: 'rgba(50,50,50,0.5)',\r\n\t\t\t\t\tboxShadow\t\t: 'rgba(50,50,50,0.5) 0 0 0.5em 0.5em',\r\n\t\t\t\t\tborderRadius\t: '1% / 1%',\r\n\t\t\t\t\twidth\t\t\t: 'calc(100% - 0.5em - (2% + 2%))',\r\n\t\t\t\t\theight\t\t\t: 'calc( 25% - 0.5em - (4% + 2%))',\r\n\t\t\t\t\tfontSize\t\t: '100%',\r\n\t\t\t\t\tlineHeight\t\t: '1.5em',\r\n\t\t\t\t\tfontWeight\t\t: 'bold',\r\n\t\t\t\t\tpadding\t\t\t: '4% 2% 2% 2%',\r\n\t\t\t\t\twhiteSpace\t\t: 'nowrap',\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tbottom\t\t\t: '0.25em',\r\n\t\t\t\t\tleft\t\t\t: '0.25em',\r\n\t\t\t\t\tzIndex\t\t\t: opt.z || 1400,\r\n\r\n\t\t\t\t})\r\n\t\t\t\tvar el = new DOM('div', opt)\r\n\t\t\t\tthis.windows.message = el\r\n\t\t\t\tel_context.append(el)\r\n\r\n\t\t\t\tvar el_title = el.append(new DOM('div', {\r\n\t\t\t\t\tdisplay\t\t\t: 'inline-block',\r\n\t\t\t\t\tmarginRight\t\t: '5%',\r\n\t\t\t\t//\tcolor\t\t\t: 'blue',\r\n\t\t\t\t\ttextAlign\t\t: 'right',\r\n\t\t\t\t\tverticalAlign\t: 'top',\r\n\t\t\t\t\twidth\t\t\t: '15%',\r\n\t\t\t\t\theight\t\t\t: '100%',\r\n\t\t\t\t//\tbackground\t\t: 'rgba(255,100,200,0.5)',\r\n\t\t\t\t//\tpadding\t\t\t: '5px',\r\n\t\t\t\t}))\r\n\t\t\t\tvar el_body = el.append(new DOM('div', {\r\n\t\t\t\t\tdisplay\t\t\t: 'inline-block',\r\n\t\t\t\t\twidth\t\t\t: 'auto',\r\n\t\t\t\t\theight\t\t\t: '100%',\r\n\t\t\t\t//\tpadding\t\t\t: '15px',\r\n\t\t\t\t})).append(new DOM('pre', {\r\n\t\t\t\t\tmargin\t\t\t: '0',\r\n\t\t\t\t}))\r\n\r\n\t\t\t\tvar mw = { __proto__: this.messageWindowProto,\r\n\t\t\t\t\tel\t\t\t\t: el,\r\n\t\t\t\t\tel_title\t\t: el_title,\r\n\t\t\t\t\tel_body\t\t\t: el_body,\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn mw\r\n\t\t\t},\r\n\r\n\t\t\taddImageFrame: function (opt) {\r\n\r\n\t\t\t\tvar fr = new DOM('div', {\r\n\t\t\t\t\theight\t\t\t: '100%',\r\n\t\t\t\t\twidth\t\t\t: '100%',\r\n\t\t\t\t\tzIndex\t\t\t: opt.z || 1500,\r\n\t\t\t\t})\r\n\r\n\t\t\t\tel_context.append(fr)\r\n\t\t\t\treturn fr\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetChoiceWindow: function (opts, {sys = false} = {}) {\r\n\r\n\t\t\t\tvar defer = Promise.defer()\r\n\t\t\t\tvar removed = false\r\n\t\t\t\tvar focusbt\r\n\t\t\t\tvar focusindex = -10000\r\n\t\t\t\tvar bts = []\r\n\r\n\r\n\t\t\t\tvar cw = new DOM('div', {\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tleft\t\t\t: 'calc((100% - 70%) / 2 - 5%)',\r\n\t\t\t\t\twidth\t\t\t: '70%',\r\n\t\t\t\t//\theight\t\t\t: '70%',\r\n\t\t\t\t\ttop\t\t\t\t: '5%', \r\n\t\t\t\t\tboxShadow\t\t: sys ? 'rgba(100, 255, 150, 0.5) 0 0 5em' : 'rgba(100, 100, 255, 0.3) 0 0 5em',\r\n\t\t\t\t\tborderRadius\t: '3% / 5%',\r\n\t\t\t\t\tbackground\t\t: sys ? 'rgba(100, 255, 150, 0.5)' : 'rgba(100, 100, 255, 0.3)',\r\n\t\t\t\t\tpadding\t\t\t: '0% 5%',\r\n\t\t\t\t\toverflowY\t\t: opts.length > 3 ? 'scroll' : 'hidden',\r\n\t\t\t\t\tmaxHeight\t\t: '70%',\r\n\t\t\t\t//\tverticalAlign\t: 'middle',\r\n\t\t\t\t})\r\n\t\t\t\tif (!sys) {\r\n\t\t\t\t\tif (this.windows.choice) this.windows.choice.remove()\r\n\t\t\t\t\tthis.windows.choice = cw\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (this.windows.choiceBack) this.windows.choiceBack.remove()\r\n\t\t\t\t\tthis.windows.choiceBack = cw\r\n\t\t\t\t}\r\n\r\n\t\t\t\topts.forEach(function (opt) {\r\n\t\t\t\t\tif (!('value' in opt)) opt.value = opt.name\r\n\t\t\t\t\tvar bt = new DOM('button', {\r\n\t\t\t\t\t\tdisplay\t\t\t: 'block',\r\n\t\t\t\t\t\tfontSize\t\t: '1.5em',\r\n\t\t\t\t\t\tboxShadow\t\t: 'inset 0 1px 3px #F1F1F1, inset 0 -15px ' + (sys ? 'rgba(0,116,116,0.2)' : 'rgba(0,0,223,0.2)') + ', 1px 1px 2px #E7E7E7',\r\n\t\t\t\t\t\tbackground\t\t: sys ? 'rgba(0,100,50,0.8)' : 'rgba(0,0,100,0.8)',\r\n\t\t\t\t\t\tcolor\t\t\t: 'white',\r\n\t\t\t\t\t\tborderRadius\t: '5% / 50%',\r\n\t\t\t\t\t\twidth\t\t\t: '100%',\r\n\t\t\t\t\t\theight\t\t\t: '2.5em',\r\n\t\t\t\t\t\tmargin\t\t\t: '5% 0%',\r\n\t\t\t\t\t\ttextShadow\t\t: 'rgba(0,0,0,0.9) 0em 0em 0.5em',\r\n\t\t\t\t\t})\r\n\t\t\t\t\tbt.disabled = !!opt.disabled\r\n\t\t\t\t\tbt.append(new DOM('text', opt.name))\r\n\t\t\t\t\tbt.onfocus = bt.onmouseover = _ => {\r\n\t\t\t\t\t\tfocusSE.play()\r\n\t\t\t\t\t\tbt.setStyles({ background: sys ? 'rgba(100,200,150,0.8)' : 'rgba(100,100,200,0.8)' })\r\n\t\t\t\t\t\tvar elm = bts[focusindex]\r\n\t\t\t\t\t\tif (elm) elm.blur()\r\n\t\t\t\t\t\tfocusindex = index\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbt.onblur = bt.onmouseout = _ => {\r\n\t\t\t\t\t\tbt.setStyles({ background: sys ? 'rgba(0,100,50,0.8)' : 'rgba(0,0,100,0.8)' })\r\n\t\t\t\t\t\tvar elm = bts[focusindex]\r\n\t\t\t\t\t\tif (elm) elm.blur()\r\n\t\t\t\t\t\t//focusindex = -10000\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbt.onclick = _ => {\r\n\t\t\t\t\t\tclickSE.play()\r\n\t\t\t\t\t\tvibrate([50])\r\n\t\t\t\t\t\tremoved = true\r\n\t\t\t\t\t\tdefer.resolve(opt.value)\r\n\t\t\t\t\t\tif (!sys) delete this.windows.choice\r\n\t\t\t\t\t\telse delete this.windows.choiceBack\r\n\t\t\t\t\t\tcw.remove()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcw.append(bt)\r\n\t\t\t\t\tif (!opt.disabled) var index = bts.push(bt) - 1\r\n\t\t\t\t}, this)\r\n\r\n\t\t\t\tView.on('up', rehook => focusmove(rehook, -1) )\r\n\t\t\t\tView.on('down', rehook => focusmove(rehook, +1) )\r\n\t\t\t\tView.on('left', rehook => focusmove(rehook, -10) )\r\n\t\t\t\tView.on('right', rehook => focusmove(rehook, +10) )\r\n\t\t\t\tView.on('enter', focusenter)\r\n\r\n\t\t\t\tfunction focusmove(rehook, n) {\r\n\t\t\t\t\tif (removed) return\r\n\t\t\t\t\tvar fi = focusindex\r\n\t\t\t\t\tvar si = fi + n\r\n\t\t\t\t\tvar last = bts.length - 1\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (fi < 0) si = n > 0 ? 0 : last\r\n\t\t\t\t\telse if (si < 0) si = fi == 0 ? last : 0\r\n\t\t\t\t\telse if (si > last) si = fi == last ? 0 : last\r\n\t\t\t\t\tbts[si].focus()\r\n\t\t\t\t\tPromise.delay(100).then(rehook)\r\n\t\t\t\t}\r\n\t\t\t\tfunction focusenter(rehook) {\r\n\t\t\t\t\tif (removed) return\r\n\t\t\t\t\tif (focusindex >= 0) return bts[focusindex].click()\r\n\t\t\t\t\tPromise.delay(100).then(rehook)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tel_context.append(cw)\r\n\r\n\r\n\t\t\t\treturn defer.promise\r\n\r\n\t\t\t},\r\n\r\n\r\n\t\t\tsetBGImage: function (opt) {\r\n\t\t\t\tvar url = opt.url ? `url(${opt.url})` : 'none'\r\n\t\t\t\tel_context.style.backgroundImage = url\r\n\t\t\t\tel_context.style.backgroundSize = 'cover'\r\n\t\t\t},\r\n\r\n\t\t\tsetFDImages: function (opts) {\r\n\t\t\t\tvar el = this.imageFrame\r\n\t\t\t\tel.removeChildren()\r\n\t\t\t\topts.forEach( opt => {\r\n\t\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\t\tleft\t: null,\r\n\t\t\t\t\t\tright\t: null,\r\n\t\t\t\t\t\ttop\t\t: null,\r\n\t\t\t\t\t\tbottom\t: null,\r\n\t\t\t\t\t})\r\n\t\t\t\t\tvar mar = parseInt(opt.top) || parseInt(opt.bottom) || 0\r\n\t\t\t\t\tvar height = opt.height ? opt.height : `${100-mar}%`\r\n\t\t\t\t\tvar img = new DOM('img', {\r\n\t\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\t\tleft\t\t\t: opt.left,\r\n\t\t\t\t\t\tright\t\t\t: opt.right,\r\n\t\t\t\t\t\ttop\t\t\t\t: opt.top,\r\n\t\t\t\t\t\tbottom\t\t\t: opt.bottom,\r\n\t\t\t\t\t//\tmaxWidth\t\t: '50%',\r\n\t\t\t\t\t\theight\t\t\t: height,\r\n\t\t\t\t\t})\r\n\t\t\t\t\timg.src = opt.url\r\n\t\t\t\t\tel.append(img)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tnextPage: function (name, opt) {\r\n\t\t\t\tthis.mainMessageWindow.nextPage(name, opt)\r\n\t\t\t},\r\n\r\n\t\t\taddSentence: function (text, opt) {\r\n\t\t\t\treturn this.mainMessageWindow.addSentence(text, opt)\r\n\t\t\t},\r\n\r\n\t\t\tshowMenu: function () {\r\n\t\t\t\tif (Player.data.phase != 'play' || View.menuIndex > 0) return View.on('Rclick').then(_ => View.showMenu())\r\n\t\t\t\t//LOG('show')\r\n\t\t\t\tView.menuIndex = (View.menuIndex||0)+1\r\n\t\t\t\tblockEvent()\r\n\t\t\t\tView.on('menu').then( _ => {\r\n\t\t\t\t\tif (this.windows.choiceBack) this.windows.choiceBack.remove()\r\n\t\t\t\t\tView.hideMenu()\r\n\t\t\t\t} ).check()\r\n\t\t\t\tObject.keys(View.windows).forEach( key => {\r\n\t\t\t\t\tvar el = View.windows[key]\r\n\t\t\t\t\tel.hidden = !el.hidden\r\n\t\t\t\t} )\r\n\t\t\t\tView.setChoiceWindow([\r\n\t\t\t\t\t{name: 'セーブ'}, {name: 'ロード'}\r\n\t\t\t\t], {sys: true}).then( kind => {\r\n\r\n\t\t\t\t\tswitch (kind) {\r\n\t\t\t\t\t\tcase 'セーブ':\r\n\t\t\t\t\t\t\tPlayer.saveSaveData().check().through(View.hideMenu).then( _ => View.showNotice('セーブしました。'),\r\n\t\t\t\t\t\t\t\terr => View.showNotice('セーブに失敗しました。') )\r\n\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase 'ロード':\r\n\t\t\t\t\t\t\tGame.loadSaveData()\r\n\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tdefault: throw 'illegal choice type'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\r\n\t\t\thideMenu: function () {\r\n\t\t\t\t//LOG('hide')\r\n\t\t\t\tif (!View.menuIndex) return\r\n\t\t\t\t--View.menuIndex\r\n\t\t\t\tallowEvent()\r\n\t\t\t\tView.on('menu').then(_ => View.showMenu())\r\n\t\t\t\tObject.keys(View.windows).forEach( key => {\r\n\t\t\t\t\tvar el = View.windows[key]\r\n\t\t\t\t\tel.hidden = !el.hidden\r\n\t\t\t\t} )\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t}\r\n\r\n\r\n\r\n\tvar [hookInput, hookClear, blockEvent, allowEvent, fireEvent] = (_ => {\r\n\r\n\t\tvar keyboardTable = {\r\n\t\t\t 8: 'backspace',\r\n\t\t\t13: 'enter',\r\n\t\t\t32: 'space',\r\n\t\t\t37: 'left',\r\n\t\t\t38: 'up',\r\n\t\t\t39: 'right',\r\n\t\t\t40: 'down',\r\n\t\t}\r\n\r\n\t\tvar hooks = []\r\n\t\t//var blocks = new Set\r\n\r\n\t\tdocument.addEventListener('keydown', evt => {\r\n\t\t\tvar type = keyboardTable[evt.keyCode]\r\n\t\t\tif (type) onEvent(type, evt)\r\n\t\t}, true)\r\n\r\n\t\tel_wrapper.addEventListener('mousedown', evt => {\r\n\t\t\tvar type = 'LMR'[evt.button]\r\n\t\t\tif (type) onEvent(type + 'click', evt)\r\n\t\t}, true)\r\n\r\n\t\tel_wrapper.addEventListener('contextmenu', evt => {\r\n\t\t\tonEvent('contextmenu', evt)\r\n\t\t}, true)\r\n\r\n\t\tfunction onEvent(type, evt) {\r\n\t\t\tif (evt) {\r\n\t\t\t\tevt.preventDefault()\r\n\t\t\t\tevt.stopImmediatePropagation()\r\n\t\t\t}\r\n\t\t\thooks = hooks.reduce( (ary, hook) => {\r\n\t\t\t\tif (hook.indexOf(type) === -1 || hook.blocked > 0) ary.push(hook)\r\n\t\t\t\telse hook.resolve()\r\n\t\t\t\treturn ary\r\n\t\t\t}, [])\r\n\t\t}\r\n\r\n\t\tfunction toHook(kind) {\r\n\t\t\tswitch (kind) {\r\n\t\t\t\tcase 'go':\r\n\t\t\t\t\treturn ['Lclick', 'enter', 'space']\r\n\t\t\t\tcase 'menu':\r\n\t\t\t\t\treturn ['Rclick', 'backspace']\r\n\t\t\t\tcase 'Rclick': case 'left': case 'up': case 'right': case 'down': case 'enter':\r\n\t\t\t\t\treturn [kind]\r\n\t\t\t\tdefault: throw 'illegal hook event type'\t\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn [function hookInput(kind, resolve) {\r\n\t\t\tvar hook = toHook(kind)\r\n\t\t\thook.resolve = resolve\r\n\t\t\thook.blocked = 0\r\n\t\t\thooks.push(hook)\r\n\t\t}, function hookClear() {\r\n\t\t\thooks.length = 0\r\n\t\t}, function blockEvent() {\r\n\t\t\thooks.forEach( hook => ++hook.blocked )\r\n\t\t}, function allowEvent() {\r\n\t\t\thooks.forEach( hook => --hook.blocked )\r\n\t\t}, function fireEvent(type) {\r\n\t\t\tonEvent(type)\r\n\t\t}\r\n\t\t]\r\n\t})()\r\n\r\n\r\n\tfunction vibrate(...args) {\r\n\t\tif (typeof navigator.vibrate == 'function') navigator.vibrate(...args)\r\n\t}\r\n\r\n\tvar $full = false\r\n\tvar $ratio = 16 / 9\r\n\tvar $mode = ''\r\n\tvar width = document.body.clientWidth * devicePixelRatio\r\n\tvar $scale = (width / $ratio >= 480 ? 480 : width / $ratio) / devicePixelRatio\r\n\t//document.body.style.width = '100%'\r\n\r\n\tMETHODS.TEST.changeMode('TEST')\r\n\tvar p = adjustScale($scale, $ratio)\r\n\r\n\tp.then( _ => READY.View.ready(null) )\r\n\r\n}).check()","($__placeholder__0 = $__placeholder__1.$__placeholder__2) === void 0 ?\n        $__placeholder__3 : $__placeholder__4","\r\nREADY('Storage', 'Player').then(Util.co(function* () {\r\n\r\n\tvar soundEnabled = yield Storage.getSetting('soundEnabled', false)\r\n\r\n\treturn {soundEnabled}\r\n\r\n})).then( config => {\r\n\r\n\tvar {soundEnabled} = config\r\n\r\n\tvar bufferMap = new Map\r\n\t//var {R} = Util.overrides\r\n\r\n\tvar soundAvailability = !!global.AudioContext\r\n\r\n\tif (soundAvailability) {\r\n\r\n\t\tvar ctx = new AudioContext()\r\n\r\n\t\tvar comp = ctx.createDynamicsCompressor()\r\n\t\tvar gainMaster = ctx.createGain()\r\n\t\tvar gainSysSE = ctx.createGain()\r\n\r\n\t\tcomp.connect(ctx.destination)\r\n\t\tgainMaster.connect(comp)\r\n\t\tgainSysSE.connect(gainMaster)\r\n\r\n\t\tgainMaster.gain.value = 0.5\r\n\r\n\t}\r\n\r\n\tfunction canplay() {\r\n\t\treturn soundAvailability && soundEnabled\r\n\t}\r\n\r\n\r\n\r\n\tclass Sound {\r\n\r\n\t\tconstructor(kind, name) {\r\n\t\t\tif (!kind) throw 'タイプが未指定'\r\n\t\t\tif (!name) throw '名前が未指定'\r\n\t\t\tif (!soundAvailability) return\r\n\t\t\tswitch (kind) {\r\n\t\t\t\tcase 'sysSE':\r\n\t\t\t\t\tvar url = `エンジン/効果音/${name}.ogg`\r\n\t\t\t\t\tvar des = gainSysSE\r\n\t\t\t\tbreak\r\n\t\t\t\tdefault: throw `想定外のタイプ『${kind}』`\r\n\t\t\t}\r\n\t\t\tvar gain = ctx.createGain()\r\n\t\t\tgain.connect(des)\r\n\t\t\tthis.readyState = 0\r\n\t\t\tthis.url = url\r\n\t\t\tthis.buf = null\r\n\t\t\tthis.src = null\r\n\t\t\tthis.gain = gain\r\n\t\t\tthis.prepare()\r\n\t\t}\r\n\r\n\t\tload() {\r\n\t\t\tvar {url} = this\r\n\t\t\tvar buf = bufferMap.get(url)\r\n\t\t\tif (buf) return Promise.resolve(buf)\r\n\t\t\treturn Player.load(url, 'arraybuffer').then( buf => {\r\n\t\t\t\tbufferMap.set(url, buf)\r\n\t\t\t\tthis.buf  = buf\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tprepare() {\r\n\t\t\tvar {buf} = this\r\n\t\t\tif (!buf) return this.load().then( _ => this.prepare() )\r\n\t\t\treturn new Promise( (ok, ng) => {\r\n\t\t\t\tctx.decodeAudioData(buf, buf => {\r\n\t\t\t\t\tvar src = ctx.createBufferSource()\r\n\t\t\t\t\tsrc.buffer = buf\r\n\t\t\t\t\tsrc.connect(this.gain)\r\n\t\t\t\t\tthis.src = src\r\n\t\t\t\t\tok()\r\n\t\t\t\t}, ng)\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tplay() {\r\n\t\t\tif (!canplay()) return Promise.resolve(null)\r\n\t\t\tvar {src} = this\r\n\t\t\tif (!src) return this.prepare().then( _ => this.play() )\r\n\t\t\tsrc.start(0)\r\n\t\t\tthis.src = null\r\n\t\t\tthis.prepare()\r\n\t\t\treturn new Promise( ok => { src.onended = ok } )\r\n\t\t}\r\n\r\n\t\tfadeout(duration = 0.5) {\r\n\t\t\tvar t0 = ctx.currentTime, gain = this.gain.gain\r\n\t\t\tgain.setValueAtTime(gain.value, t0)\r\n\t\t\tgain.linearRampToValueAtTime(0, t0 + duration)\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tObject.assign(Sound, {\r\n\t\tsoundEnabled, soundAvailability,\r\n\t})\r\n\r\n\tREADY.Sound.ready(Sound)\r\n\r\n}).check()\r\n\r\n","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","\r\nREADY('Player', 'View', 'Sound').then( _ => {\r\n\t'use strict'\r\n\r\n\t//var {R} = Util.overrides\r\n\r\n\tvar message = (_ => {\r\n\t\tvar abort = Util.NOP\r\n\t\treturn text => {\r\n\t\t\tabort()\r\n\t\t\tView.changeModeIfNeeded('NOVEL')\r\n\t\t\tView.nextPage('システム', {sys: true})\r\n\t\t\tvar p = View.addSentence(text, { weight: 10 })\r\n\t\t\tabort = p.abort\r\n\t\t\treturn p\r\n\t\t}\r\n\t})()\r\n\r\n\r\n\r\n\tvar setup = Util.co(function* () {\r\n\r\n\t\tPlayer.init()\r\n\r\n\t\tsetSysBG()\r\n\r\n\t\t//message('作品一覧を読み込んでいます...')\r\n\t\tvar setting = yield Player.fetchSettingData(Data.URL.ContentsSetting)\r\n\r\n\t\tView.on('menu').then(setup)\r\n\r\n\t\tmessage('再生する作品を選んでください')\r\n\t\tvar scenario = yield new Promise( (ok, ng) => {\r\n\r\n\t\t\tvar novels = setting['作品']\r\n\r\n\t\t\tif (!novels || !novels.length) return message('再生できる作品がありません。\\n『データ/作品.txt』を見なおしてください')\r\n\t\t\tif (novels.length === 1) return ok(novels[0])\r\n\r\n\t\t\tvar opts = novels.reduce( (opts, name) => {\r\n\t\t\t\topts.push({ name })\r\n\t\t\t\treturn opts\r\n\t\t\t}, [])\r\n\r\n\t\t\tView.setChoiceWindow(opts, {sys: true}).then(ok, ng)\r\n\t\t})\r\n\r\n\t\tPlayer.setScenario(scenario)\r\n\r\n\r\n\t\t//message('作品情報を読み込んでいます...')\r\n\t\tvar setting = yield Player.fetchSettingData(`データ/${scenario}/設定.txt`)\r\n\r\n\t\tmessage('『'+scenario+'』の\\nどこから開始するか選んでください')\r\n\t\tvar script = yield new Promise( (ok, ng) => {\r\n\r\n\t\t\tvar opts = ['初めから', '続きから', '任意の場所から'].reduce( (opts, name) => {\r\n\t\t\t\topts.push({ name})\r\n\t\t\t\treturn opts\r\n\t\t\t}, [])\r\n\r\n\t\t\treturn View.setChoiceWindow(opts, {sys: true}).then( kind => {\r\n\r\n\t\t\t\t//message('シナリオを読み込んでいます...')\r\n\t\t\t\tvar base = setting['開始シナリオ']\r\n\t\t\t\tif (!base || !(base = base[0])) return ng('開始シナリオが見つかりません。\\n開始シナリオの設定は必須です。')\r\n\r\n\t\t\t\tswitch (kind) {\r\n\t\t\t\t\tcase '初めから': \r\n\t\t\t\t\t\tPlayer.fetchScriptData(base).then(ok, ng)\r\n\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tcase '続きから':\r\n\t\t\t\t\t\tPlayer.loadSaveData().then(ok, ng)\r\n\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tcase '任意の場所から':\r\n\t\t\t\t\t\tvar name = prompt('『<スクリプト名>』または『<スクリプト名>#<マーク名>』の形式で指定します。\\n開始シナリオから始める場合は『#<マーク名>』の形式も使えます。')\r\n\t\t\t\t\t\tif (!name) return message('作品選択メニューに戻ります。').delay(1000).then(setup)\r\n\t\t\t\t\t\tPlayer.fetchScriptData(name, base).then(ok, err => {\r\n\t\t\t\t\t\t\tmessage('指定されたファイルを読み込めません。').delay(1000).then(setup)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tdefault: throw 'illegal start type'\r\n\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t})\r\n\r\n\t\t})\r\n\r\n\t\treturn load(script)\r\n\t})\r\n\r\n\r\n\tvar load = Util.co(function* (script) {\r\n\r\n\t\tmessage('キャッシュ中…')\r\n\t\tyield Player.cacheScript(script)\r\n\r\n\t/*\r\n\t\tyield message('再生準備が完了しました。\\nクリック、タップ、エンターキー、スペースキーで進みます。').on('go').then( _ => {\r\n\t\t\t//Player.setRunPhase('再生')\r\n\t\t\treturn Player.runScript(script, scenario)\r\n\t\t})\r\n\t*/\r\n\r\n\t\tyield message('').then( _ => {\r\n\t\t\t//View.nextPage('')\r\n\t\t\tView.clean()\r\n\t\t\treturn Player.runScript(script)\r\n\t\t})\r\n\r\n\t\tView.clean()\r\n\t\t//Player.cacheClear()\r\n\r\n\t\tPlayer.setRunPhase('準備')\r\n\r\n\t\tyield message('再生が終了しました。\\n作品選択メニューに戻ります。').delay(1000)\r\n\r\n\t\treturn setup().catch(restart)\r\n\r\n\t})\r\n\r\n\r\n\r\n\r\n\tvar restart = Util.co(function* (err) {\r\n\r\n\t\tLOG(err)\r\n\t\tif (typeof err !== 'string') err = '致命的なエラーが発生したため再生を継続できません。' \r\n\t\tView.clean()\r\n\t\tPlayer.setRunPhase('エラー解決')\r\n\r\n\t\tyield message(err + '\\n作品選択メニューに戻ります。').delay(3000)\r\n\t\treturn setup().catch(restart)\r\n\r\n\t})\r\n\r\n\r\n\r\n\r\n\tvar start = Util.co(function* () {\r\n\r\n\t\tPlayer.setRunPhase('起動')\r\n\r\n\t\tvar setting = yield Player.fetchSettingData(Data.URL.EngineSetting)\r\n\r\n\t\tData.SystemVersion = setting['システムバージョン'][0]\r\n\t\tvar startSE = new Sound('sysSE', '起動')\r\n\r\n\t\tView.changeMode('NOVEL')\r\n\r\n\t\tyield Promise.all([\r\n\t\t\tsetSysBG(false),\r\n\t\t\tPromise.race([\r\n\t\t\t\tPromise.all([\r\n\t\t\t\t\tstartSE.play(),\r\n\t\t\t\t\tView.addSentence('openノベルプレイヤー by Hikaru02\\n\\nシステムバージョン：　' + Data.SystemVersion, { weight: 0 }).delay(3000)\r\n\t\t\t\t]),\r\n\t\t\t\tView.on('go')\r\n\t\t\t]).through( _ => startSE.fadeout() )\r\n\t\t]).check()\r\n\r\n\t\treturn setup().catch(restart)\r\n\t})\r\n\r\n\r\n\r\n\tfunction setSysBG(view = true) {\r\n\t\tvar p = Player.toBlobURL('画像', '背景', 'png', true)\r\n\t\treturn view ? p.then( url => View.setBGImage({ url }) ) : p\t\r\n\t}\r\n\r\n\tstart()\r\n\r\n\tREADY.Game.ready({\r\n\r\n\t\treset() {\r\n\t\t\tsetup()\r\n\t\t},\r\n\r\n\t\tloadSaveData() {\r\n\t\t\tPlayer.loadSaveData().then( script => {\r\n\t\t\t\tPlayer.init()\r\n\t\t\t\tPlayer.setScenario(script.scenario)\r\n\t\t\t\tload(script)\r\n\t\t\t} ).check()\r\n\t\t},\r\n\r\n\t})\r\n\r\n}).check()\r\n\r\n\r\n\r\n\r\n/* TODO\r\n\t・事前キャッシュ、効率化\r\n\t・Worker分離\r\n\t・エフェクト\r\n\t・画像面のCanvas化\r\n\t・選択肢ウィンドウ調整\r\n\t・音声\r\n\r\n*/","$ctx.maybeThrow()"]}