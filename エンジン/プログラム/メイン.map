{"version":3,"file":"メイン.js","sources":["@traceur/generated/TemplateParser/3","@traceur/generated/TemplateParser/2","@traceur/generated/TemplateParser/1","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/ヘルパー.js","@traceur/generated/TemplateParser/7","@traceur/generated/TemplateParser/4","@traceur/generated/TemplateParser/5","@traceur/generated/TemplateParser/6","@traceur/generated/TemplateParser/0","@traceur/generated/TemplateParser/8","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/ストレージ.js","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/ビュー.js","@traceur/generated/TemplateParser/9","@traceur/generated/TemplateParser/10","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/サウンド.js","@traceur/generated/TemplateParser/18","@traceur/generated/TemplateParser/17","@traceur/generated/TemplateParser/11","@traceur/generated/TemplateParser/16","@traceur/generated/TemplateParser/13","@traceur/generated/TemplateParser/12","@traceur/generated/TemplateParser/14","@traceur/generated/TemplateParser/15","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/プレーヤー.js","@traceur/generated/TemplateParser/19","@traceur/generated/TemplateParser/20","@traceur/generated/TemplateParser/21","H:/DataBOX/myFiles/GitHub/open-novel/エンジン/プログラム/ES6/ゲーム.js"],"names":[],"mappings":"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","sourcesContent":["System.register($__placeholder__0, [], $__placeholder__1);","function() {\n      $__placeholder__0\n    }","var __moduleName = $__placeholder__0;",";( _ => {\r\n\t'use strict'\r\n\r\n\tvar global = (1,eval)('this')\r\n\tvar Promise = global.Promise\r\n\tvar LOG = console.log.bind(console)\r\n\r\n\tvar Data = {\r\n\t\tdebug :true,\r\n\t\tURL: {\r\n\t\t\tContentsSetting: 'データ/作品.txt',\r\n\t\t\tEngineSetting: 'エンジン/エンジン定義.txt',\r\n\t\t},\r\n\t\tcurrent: {}\r\n\t}\r\n\r\n\tvar Util = {\r\n\r\n\t\t/*\r\n\t\tsetDefault(obj, name, value) {\r\n\t\t\tif (arguments.length !== 3) throw 'illegal arguments length'\r\n\t\t\tif (!(name in obj)) obj[name] = value\r\n\t\t\treturn obj\r\n\t\t},\r\n\t\t*/\r\n\r\n\t\tsetDefaults(obj = {}, props) {\r\n\t\t\tif (arguments.length !== 2) throw 'illegal arguments length'\r\n\t\t\tObject.keys(props).forEach(key => { if (!(key in obj)) obj[key] = props[key] })\r\n\t\t\treturn obj\r\n\t\t},\r\n\r\n\t\tsetProperties(obj = {}, props) {\r\n\t\t\tObject.keys(props).forEach(key => obj[key] = props[key] )\r\n\t\t\treturn obj\r\n\t\t},\r\n\r\n\t\tisNoneType(str) {\r\n\t\t\treturn (typeof str === 'string') && (str == '' || /^(無し|なし)$/.test(str))\r\n\t\t},\r\n\r\n\r\n\t\tforceName(kind, name, type) {\r\n\t\t\tif (!name || !type) throw 'name特定不能エラー'\r\n\t\t\tif (!name.match(/\\.[^\\.]+$/)) name = `${name}.${type}`\r\n\t\t\treturn `${kind}/${name}`\r\n\t\t},\r\n\r\n\t\ttoHalfWidth(str = '') {\r\n\r\n\t\t\tvar table = {\r\n\t\t\t\t'。': '.',\r\n\t\t\t//\t'ー': '-',\r\n\t\t\t\t'―': '-',\r\n\t\t\t\t'！': '!', \r\n\t\t\t\t'≧': '>=',\r\n\t\t\t\t'≦': '<=',\r\n\t\t\t\t'≠': '!=',\r\n\t\t\t\t'×': '*',\r\n\t\t\t\t'✕': '*',\r\n\t\t\t\t'✖': '*',\r\n\t\t\t\t'☓': '*',\r\n\t\t\t\t'＊': '*', \r\n\t\t\t\t'％': '%',\r\n\t\t\t\t'／': '/',\r\n\t\t\t\t'｜': '|',\r\n\t\t\t\t'”': '\"',\r\n\t\t\t\t'’': \"'\",\r\n\t\t\t}\r\n\r\n\t\t\treturn str.replace(/./g, char => (char in table ? table[char] : char) )\r\n\t\t\t.replace(/[\\uff0b-\\uff5a]/g, char => String.fromCharCode(char.charCodeAt(0)-65248) )\r\n\t\t},\r\n\r\n\t\ttoSize(str) {\r\n\t\t\tif (!str) return null\r\n\t\t\tstr = Util.toHalfWidth(str)\r\n\t\t\tvar n = +(str.match(/[\\d.]+/) || [0])[0]\r\n\t\t\treturn ((!(/[\\d.]+%/.test(str)) && n < 10) ? n*100 : n) + '%'\r\n\t\t},\r\n\r\n\t\tNOP() {},\r\n\r\n\t\terror(message) { alert(message) },\r\n\r\n\t\tDefault: undefined,\r\n\r\n\t\tco(func) {\r\n\t\t\treturn function () {\r\n\t\t\t\tvar defer = Promise.defer()\r\n\t\t\t\tvar iter = func.apply(this, arguments)\r\n\t\t\t\tvar loop = val => {\r\n\t\t\t\t\ttry {\r\n\t\t\t\t\t\tvar {value, done} = iter.next(val)\r\n\t\t\t\t\t\tvalue = Promise.resolve(value)\r\n\t\t\t\t\t\tif (done) value.then(defer.resolve, defer.reject)\r\n\t\t\t\t\t\telse value.then(loop, defer.reject)\r\n\t\t\t\t\t} catch(err) {\r\n\t\t\t\t\t\tLOG(err)\r\n\t\t\t\t\t\tdefer.reject(err)\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tloop()\r\n\t\t\t\treturn defer.promise\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\tupdateDebugWindow() {\r\n\r\n\t\t\tif (!Data.debug) return\r\n\r\n\t\t\tvar params = {}\r\n\t\t\tUtil.paramForEach( (value, key) => { params[key] = value }, false )\r\n\t\t\tUtil.paramForEach( (value, key) => { params[key] = value }, true )\r\n\r\n\t\t\tvar cacheSizeMB = ((Util.cacheGet('$size') || 0) / 1024 / 1024).toFixed(1)\r\n\t\t\tvar mark = Data.current.mark || '（無し）'\r\n\r\n\t\t\tvar obj = {\r\n\t\t\t\tキャッシュサイズ: cacheSizeMB + 'MB',\r\n\t\t\t\t現在のマーク: mark,\r\n\t\t\t\tパラメータ: params,\r\n\t\t\t}\r\n\r\n\t\t\tView.updateDebugWindow(obj)\r\n\t\t},\r\n\r\n\r\n\t\ttoBlobEmogiURL(name) {\r\n\t\t\treturn Util.toBlobURL('絵文字', name, 'svg')\r\n\t\t},\r\n\r\n\t\ttoBlobSysPartsURL(name) {\r\n\t\t\treturn Util.toBlobURL('画像', name, 'svg', true)\r\n\t\t},\r\n\r\n\t\ttoBlobScriptURL(name) {\r\n\t\t\treturn Util.toBlobURL('シナリオ', name, 'txt')\r\n\t\t},\r\n\r\n\r\n\t\ttoBlobURL(kind, name, type, sys = false) {\r\n\t\t\tvar root = sys ? 'エンジン' : 'データ'\r\n\t\t\tvar sub = Util.forceName(kind, name, type)\r\n\t\t\tvar subkey = sys ? `${sub}` : `${Data.scenarioName}/${sub}`\r\n\t\t\tif (Util.isNoneType(name)) return Promise.resolve(null)\r\n\t\t\tif (Util.cacheHas(subkey)) return Promise.resolve(Util.cacheGet(subkey))\r\n\t\t\tvar defer = Promise.defer()\r\n\t\t\tUtil.cacheSet(subkey, defer.promise)\r\n\t\t\tvar hide = View.setLoadingMessage('Loading...')\r\n\t\t\treturn new Promise( (ok, ng) => {\t\t\r\n\t\t\t\tUtil.find(`${root}/${subkey}`).catch( _ => `${root}/[[共通素材]]/${sub}` ).then( url => ok(url), ng)\r\n\t\t\t}).then(Util.loadBlob).then( blob => {\r\n\t\t\t\tvar blobURL = URL.createObjectURL(blob)\r\n\t\t\t\tdefer.resolve(blobURL)\r\n\t\t\t\tUtil.cacheSizeUpdate(blob.size)\r\n\t\t\t\t//Storage.testPut(subkey, blob)\r\n\t\t\t\thide()\r\n\t\t\t\treturn blobURL\r\n\t\t\t}).through(hide)\r\n\t\t},\r\n\r\n\r\n\t\tloadText(url) {\r\n\t\t\treturn Util.load(url, 'text')\r\n\t\t},\r\n\r\n\t\tloadBlob(url) {\r\n\t\t\treturn Util.load(url, 'blob')\r\n\t\t},\r\n\r\n\t\tload(url, type) {\r\n\t\t\treturn new Promise(function (ok, ng) {\r\n\t\t\t\tvar xhr = new XMLHttpRequest()\r\n\t\t\t\txhr.onload = _ => ok(xhr.response)\r\n\t\t\t\txhr.onerror = _ => ng(new Error(`ファイルURL『${url}』のロードに失敗`))\r\n\t\t\t\txhr.open('GET', url)\r\n\t\t\t\tif (type) xhr.responseType = type\r\n\t\t\t\txhr.send()\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tfind(url) {\r\n\t\t\treturn new Promise(function (ok, ng) {\r\n\t\t\t\tvar xhr = new XMLHttpRequest()\r\n\t\t\t\txhr.onload = _ => {\r\n\t\t\t\t\tif (xhr.status < 300) ok(url)\r\n\t\t\t\t\telse ng(new Error(`ファイルURL『${url}』が見つからない`)) \r\n\t\t\t\t}\r\n\t\t\t\txhr.onerror = _ => ng(new Error(`ファイルURL『${url}』のロードに失敗`))\r\n\t\t\t\txhr.open('HEAD', url)\r\n\t\t\t\txhr.send()\r\n\t\t\t})\r\n\r\n\t\t},\r\n\r\n\t}\r\n\r\n\r\n\tclass BitArray {\r\n\t\tstatic create(len) {\r\n\t\t\treturn new Uint32Array(Math.ceil(len/32))\r\n\t\t}\r\n\r\n\t\tstatic get(ba, no) {\r\n\t\t\tvar i = no/32|0, n = ba[i], p = no%32\r\n\t\t\treturn (n & 1 << p) >>> p\r\n\t\t}\r\n\r\n\t\tstatic set(ba, no) {\r\n\t\t\tvar i = no/32|0, n = ba[i], p = no%32\r\n\t\t\tba[i] = n | 1 << p\r\n\t\t}\r\n\t}\r\n\r\n\r\n\tUtil.setProperties(Util, (_ => {\r\n\r\n\t\tvar cacheMap = new Map\r\n\t\tcacheInit()\r\n\r\n\t\tfunction cacheInit() {\r\n\t\t\tcacheMap.clear()\r\n\t\t\tcacheMap.set('$size', 0)\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\tcacheClear() {\r\n\t\t\t\tcacheMap.forEach( (_, p) => { if (p.then) p.then(url => URL.revokeObjectURL(url)) } )\r\n\t\t\t\tcacheInit()\r\n\t\t\t\tUtil.updateDebugWindow()\r\n\t\t\t},\r\n\t\t\tcacheHas(key) { return cacheMap.has(key) },\r\n\t\t\tcacheGet(key) { return cacheMap.get(key) },\r\n\t\t\tcacheSet(key, val) { cacheMap.set(key, val) },\r\n\t\t\tcacheSizeUpdate(n) { \r\n\t\t\t\tcacheMap.set('$size', cacheMap.get('$size') + n)\r\n\t\t\t\tUtil.updateDebugWindow()\r\n\t\t\t},\r\n\t\t}\r\n\t})())\r\n\r\n\tUtil.setProperties(Util, (_ => {\r\n\r\n\t\tvar paramMap = new Map\r\n\t\tvar configMap = new Map\r\n\r\n\t\tfunction normalizeKey(key) {\r\n\t\t\tkey = key.replace(/＄/g, '$')\r\n\t\t\treturn key\r\n\t\t}\r\n\r\n\t\tvar my = {\r\n\t\t\tparamSet(key, val, sFlag = true) {\r\n\t\t\t\tkey = normalizeKey(key)\r\n\t\t\t\tif (key[0] == '$') {\r\n\t\t\t\t\tconfigMap.set(key, val)\r\n\t\t\t\t\tif (!sFlag) return\r\n\t\t\t\t\tvar globalParams = {}\r\n\t\t\t\t\tmy.paramForEach( (value, key) => { globalParams[key] = value }, true)\r\n\t\t\t\t\tData.current.setting.params = globalParams\r\n\t\t\t\t\tStorage.setGlobalData(Data.current.setting).check()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparamMap.set(key, val)\r\n\t\t\t\t}\r\n\t\t\t\tUtil.updateDebugWindow()\r\n\t\t\t},\r\n\t\t\tparamGet(key) {\r\n\t\t\t\tkey = normalizeKey(key)\r\n\t\t\t\tvar map = (key[0] == '$') ? configMap : paramMap\r\n\t\t\t\tif (!map.has(key)) {\r\n\t\t\t\t\tmy.paramSet(key, 0)\r\n\t\t\t\t\tUtil.updateDebugWindow()\r\n\t\t\t\t}\r\n\t\t\t\treturn map.get(key)\r\n\t\t\t},\r\n\t\t\tparamClear(gFlag) {\r\n\t\t\t\tparamMap.clear()\r\n\t\t\t\tif (gFlag) configMap.clear()\r\n\t\t\t\tUtil.updateDebugWindow()\r\n\t\t\t},\r\n\t\t\tparamForEach(func, gFlag) {\r\n\t\t\t\tif (gFlag) configMap.forEach(func)\r\n\t\t\t\telse paramMap.forEach(func)\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn my\r\n\t})())\r\n\r\n\r\n\r\n\tUtil.setDefaults(String.prototype, {\r\n\t\trepeat: function repeat(num) {\r\n\t\t\treturn new Array(num + 1).join(this)\r\n\t\t},\r\n\t})\r\n\r\n\r\n\tUtil.setDefaults(Promise, {\r\n\r\n\t\tdefer() {\r\n\t\t\tvar resolve, reject\r\n\t\t\tvar promise = new Promise((ok, ng) => {\r\n\t\t  \t\tresolve = ok, reject = ng\r\n\t\t\t})\r\n\t\t\treturn {promise, resolve, reject}\r\n\t\t},\r\n\r\n\t\tdelay(time) {\r\n\t\t\treturn Promise.resolve().delay(time)\r\n\t\t},\r\n\r\n\t})\r\n\r\n\r\n\r\n\tUtil.setProperties(Promise.prototype, {\r\n\r\n\t\t/*\r\n\t\tnext: function next(kind, onFulfilled, onRejected) {\r\n\t\t\treturn this.then( result => {\r\n\t\t\t\tPlayer.setRunPhase(kind)\r\n\t\t\t\treturn onFulfilled(result)\r\n\t\t\t}, onRejected).catch(err => {\r\n\t\t\t\tLOG(kind + 'エラー', err)\r\n\t\t\t\tPlayer.setErrorPhase(kind)\r\n\t\t\t\treturn Promise.reject(err)\r\n\t\t\t})\r\n\t\t},\r\n\t\t*/\r\n\r\n\t\ton: function on(type, onFulfilled = result => result, onRejected) {\r\n\t\t\treturn this.then( result => View.on(type).then( _ => onFulfilled(result) ).catch(onRejected) )\r\n\t\t},\r\n\r\n\t\tand: function and(func, arg) {\r\n\t\t\treturn this.then( _ => func(arg) )\r\n\t\t},\r\n\r\n\t\tdelay: function delay(time) {\r\n\t\t\tif (!+time) throw 'illegal time number'\r\n\t\t\treturn this.then( _ => new Promise( resolve => setTimeout(resolve, time) ) )\r\n\t\t},\r\n\r\n\t\tthrough: function through(onFulfilled, onRejected) {\r\n\t\t\treturn this.then( val => {\r\n\t\t\t\tif (onFulfilled) onFulfilled(val)\r\n\t\t\t\treturn Promise.resolve(val)\r\n\t\t\t}, err => {\r\n\t\t\t\tif (onRejected) onRejected(err)\r\n\t\t\t\treturn Promise.reject(err)\r\n\t\t\t} )\r\n\t\t},\r\n\t\tcheck: function check() {\r\n\t\t\treturn this.catch( err => {\r\n\t\t\t\tLOG(err)\r\n\t\t\t\treturn Promise.reject(err)\r\n\t\t\t} )\r\n\t\t},\r\n\t\t'throw': function (err) {\r\n\t\t\treturn this.then( _ => Promise.reject(err) )\r\n\t\t},\r\n\t})\r\n\r\n\tObject.defineProperty(Promise.prototype, '$', {\r\n\t\tenumerable: true, configurable: true, \r\n\t\tget: function () {\r\n\t\t\tvar _p = this\r\n\t\t\tvar $p = function (...args) {\r\n\t \t\t\tvar len = args.length\r\n\t \t\t\tif (len === 0) return $p\r\n\t \t\t\tvar [arg0, arg1, arg2] = args\r\n\r\n\t \t\t\tif (typeof arg0 == 'function') {\r\n\t\t \t\t\tswitch (args.length) {\r\n\t\t\t\t\t\tcase 1: \r\n\t\t\t\t\t\tcase 2: return _p.then(arg0).$\r\n\t\t\t\t\t}\r\n\t\t\t\t} else {\r\n\t\t \t\t\tswitch (args.length) {\r\n\t\t\t\t\t\tcase 1: return _p.on(arg0).$\r\n\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\tcase 3: return _p.next(arg0, arg1, arg2).$\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t\tthrow 'illegal arguments length'\r\n\t\t\t}\r\n\t\t\tUtil.setProperties($p, {\r\n\t\t\t\tthen: (res, rej) => _p.then(res, rej).$ ,\r\n\t\t\t\tcatch: rej => _p.catch(rej).$ ,\r\n\t\t\t})\r\n\t\t\tObject.defineProperty($p, '_', {\r\n\t\t\t\tenumerable: true, configurable: true,\r\n\t\t\t\tget: _ => _p\r\n\t\t\t})\r\n\t\t\t$p.__proto__ = _p\r\n\t\t\treturn $p\r\n\t\t}\r\n\t})\r\n\r\n\tfunction $Promise(func) {\r\n\t\treturn new Promise(func).$\r\n\t}\r\n\r\n\tUtil.setProperties($Promise, {\r\n\t\tdefer: _ => {\r\n\t\t\tvar defer = Promise.defer()\r\n\t\t\tdefer.promise = defer.promise.$\r\n\t\t\treturn defer\r\n\t\t},\r\n\t\tresolve: val => Promise.resolve(val).$ ,\r\n\t\treject : val => Promise.reject(val).$ ,\r\n\t\tall    : ary => Promise.all(ary).$ ,\r\n\t\trace   : ary => Promise.race(ary).$ ,\r\n\t})\r\n\r\n\tUtil.overrides = { Util, $Promise: $Promise, Res: Promise.resolve() }\r\n\r\n\tvar READY = ( _ => {\r\n\t\tfunction READY(type) {\r\n\t\t\tvar types = (arguments.length != 1) ? [].slice.call(arguments) : (Array.isArray(type)) ? type : [type]\r\n\t\t\treturn $Promise.all(types.map(type => {\r\n\t\t\t\tif (!(type in READY)) throw 'illegal READY type \"' +type+ '\"'\r\n\t\t\t\treturn READY[type]\r\n\t\t\t})).then( _ => Util.overrides )\r\n\t\t}\r\n\t\t;['DOM', 'Player', 'View', 'Storage', 'Sound', 'Game'].forEach(type => {\r\n\t\t\tglobal[type] = null\r\n\t\t\tvar defer = $Promise.defer()\r\n\t\t\tREADY[type] = defer.promise\r\n\t\t\tREADY[type].ready = obj => {\r\n\t\t\t\tif (obj) global[type] = obj\r\n\t\t\t\tdefer.resolve()\r\n\t\t\t} \r\n\t\t})\r\n\t\treturn READY\r\n\t})()\r\n\r\n\twindow.addEventListener('DOMContentLoaded', READY.DOM.ready)\r\n\r\n\r\n\tUtil.setDefaults(global, {\r\n\t\tglobal, READY, Util, LOG, Data, BitArray,\r\n\t})\r\n\r\n})();","$traceurRuntime.assertObject($__placeholder__0)","var $__placeholder__0 = $__placeholder__1","($traceurRuntime.createClass)($__placeholder__0, $__placeholder__1, $__placeholder__2)","\n            for (var $__placeholder__0 = [], $__placeholder__1 = 0;\n                 $__placeholder__2 < arguments.length; $__placeholder__3++)\n              $__placeholder__4[$__placeholder__5] = arguments[$__placeholder__6];","return $__placeholder__0","System.get($__placeholder__0 +'')","READY().then( _ => {\r\n\t'use strict'\r\n\r\n\tvar db, scenario, VERSION = 5\r\n\r\n\tvar Storage = {\r\n\t\tadd(key, val) {\r\n\t\t\treturn new Promise( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readwrite')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rq = os.add(val, key)\r\n\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の書込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tput(key, val) {\r\n\t\t\treturn new Promise( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readwrite')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rq = os.put(val, key)\r\n\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の書込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tget(key) {\r\n\t\t\treturn new Promise( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readonly')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rq = os.get(key)\r\n\t\t\t\tts.oncomplete = _ => ok(rq.result)\r\n\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の読込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tdelete(key) {\r\n\t\t\treturn new Promise( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readwrite')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rq = os.delete(key)\r\n\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の削除に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetSaveDatas(from, to) {\r\n\t\t\tif (typeof from != 'number' || from < 0) throw 'ロード用番号が不正'\r\n\t\t\tif (typeof to != 'number' || to < 0) throw 'ロード用番号が不正'\r\n\t\t\tvar name = getSaveName()\r\n\t\t\treturn new Promise( (ok, ng) => { \r\n\t\t\t\tvar saves = new Array(to + 1)\r\n\t\t\t\tvar ts = db.transaction('savedata', 'readonly')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\r\n\t\t\t\tfor (var no = from; no <= to; ++no) {\r\n\t\t\t\t\tvar rq = os.get(name+'/'+no)\r\n\t\t\t\t\trq.onsuccess = ((rq, no) => _ => {\r\n\t\t\t\t\t\tsaves[no] = rq.result\r\n\t\t\t\t\t})(rq, no)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tts.oncomplete = _ => ok(saves)\r\n\t\t\t\tts.onabort = _ => ng(`ストレージの読込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tsetSaveData(no, data) {\r\n\t\t\tif (typeof no != 'number' || no < 0) throw 'セーブ用番号が不正'\r\n\t\t\tif (!data) throw 'セーブ用データが不正'\r\n\t\t\tvar name = getSaveName()\r\n\t\t\treturn new Promise( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readwrite')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rq = os.put(data, name+'/'+no)\r\n\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\tts.onabort = _ => ng(`ストレージの書込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetGlobalData() {\r\n\t\t\tvar name = getSaveName()\r\n\t\t\treturn new Promise( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readonly')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rq = os.get(name+'/global')\r\n\t\t\t\tts.oncomplete = _ => ok(rq.result)\r\n\t\t\t\tts.onabort = _ => ng(`ストレージの読込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tsetGlobalData(data) {\r\n\t\t\tif (!data) throw 'セーブ用データが不正'\r\n\t\t\tvar name = getSaveName()\r\n\t\t\tdata.version = VERSION\r\n\t\t\treturn new Promise( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readwrite')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rq = os.put(data, name+'/global')\r\n\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\tts.onabort = _ => ng(`ストレージの書込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tdeleteSaveDatas(con) {\r\n\t\t\tif (!(con === true)) throw '誤消去防止セーフティ'\r\n\t\t\tvar name = getSaveName()\r\n\t\t\treturn new Promise( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('savedata', 'readwrite')\r\n\t\t\t\tvar os = ts.objectStore('savedata')\r\n\t\t\t\tvar rg = IDBKeyRange.bound(`${name}/`, `${name}/{`)\r\n\t\t\t\tvar rq = os.openCursor(rg)\r\n\t\t\t\trq.onsuccess = _ => {\r\n\t\t\t\t\tvar cs = rq.result\r\n\t\t\t\t\tif (!cs) return\r\n\t\t\t\t\tcs.delete()\r\n\t\t\t\t\tcs.continue()\r\n\t\t\t\t}\r\n\t\t\t\tts.oncomplete = _ => ok()\r\n\t\t\t\tts.onabort = _ => ng(`ストレージの消去に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tgetSetting(key, def) {\r\n\t\t\treturn new Promise( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('setting', 'readonly')\r\n\t\t\t\tvar os = ts.objectStore('setting')\r\n\t\t\t\tvar rq = os.get(key)\r\n\t\t\t\tts.oncomplete = _ => ok(rq.result)\r\n\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の書込に失敗（${ts.error.message})`)\r\n\t\t\t}).then( val => {\r\n\t\t\t\treturn (val === undefined) ? Storage.setSetting(key, def) : val\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tsetSetting(key, val) {\r\n\t\t\treturn new Promise( (ok, ng) => { \r\n\t\t\t\tvar ts = db.transaction('setting', 'readwrite')\r\n\t\t\t\tvar os = ts.objectStore('setting')\r\n\t\t\t\tvar rq = os.put(val, key)\r\n\t\t\t\tts.oncomplete = _ => ok(val)\r\n\t\t\t\tts.onabort = _ => ng(`ストレージのkey『${key}』の書込に失敗（${ts.error.message})`)\r\n\t\t\t})\r\n\t\t},\r\n\r\n\t\tVERSION\r\n\r\n\t}\r\n\r\n\r\n\tfunction getSaveName() {\r\n\t\treturn Data.dataSaveName || Data.scenarioName\r\n\t}\r\n\r\n\r\n\tnew Promise( (ok, ng) => { \r\n\t\tvar rq = indexedDB.open(`open-novel`, 5)\r\n\t\trq.onupgradeneeded = evt => {\r\n\t\t\tvar db = rq.result\r\n\t\t\tvar ov = evt.oldVersion\r\n\t\t\tif (ov < 3) db.createObjectStore('savedata')\r\n\t\t\tif (ov < 5) db.createObjectStore('setting')\r\n\t\t} \r\n\t\trq.onsuccess = _ => ok(rq.result)\r\n\t\trq.onerror = err => ng(`ストレージが開けない（${err.message})`)\r\n\r\n\t}).then( val => {\r\n\t\tStorage.DB = db = val\r\n\t\tREADY.Storage.ready(Storage)\r\n\t})\r\n\r\n}).check()","\r\nREADY('Storage', 'Player', 'DOM', 'Sound').then( ({Util}) => {\r\n\t'use strict'\r\n\r\n\tvar View = null\r\n\r\n\tvar clickSE = new Sound('sysSE', '選択')\r\n\tvar focusSE = new Sound('sysSE', 'フォーカス')\r\n\r\n\tvar EP = Element.prototype\r\n\tUtil.setDefaults(EP, {\r\n\t\ton\t\t\t\t\t: EP.addEventListener,\r\n\t\trequestFullscreen\t: EP.webkitRequestFullscreen || EP.mozRequestFullScreen,\r\n\t\tappend\t\t\t\t: EP.appendChild,\r\n\t\tremoveChildren\t\t: function () {\r\n\t\t\tvar ch = this.childNodes, len = ch.length\r\n\t\t\tfor (var i = len - 1; i >= 0; --i) ch[i].remove()\r\n\t\t\treturn this\r\n\t\t},\r\n\t\tsetStyles\t\t\t: function (styles) {\r\n\t\t\tstyles = styles || {}\r\n\t\t\tObject.keys(styles).forEach( key => { if (styles[key] != null) this.style[key] = styles[key] }, this)\r\n\t\t\treturn this\r\n\t\t},\r\n\t})\r\n\t\r\n\tif (!document.onfullscreenchange) Object.defineProperty(document, 'onfullscreenchange', {\r\n\t\tset: val => {\r\n\t\t\tif ('onwebkitfullscreenchange' in document) document.onwebkitfullscreenchange = val\r\n\t\t\telse document.onmozfullscreenchange = val\r\n\t\t}\r\n\t})\r\n\tif (!document.fullscreenElement) Object.defineProperty(document, 'fullscreenElement', {\r\n\t\tget: _ => document.webkitFullscreenElement || document.mozFullScreenElement,\r\n\t})\r\n\r\n\tvar $isWebkit = !!EP.webkitRequestFullscreen\r\n\r\n\tfunction DOM(tagName, styles) {\r\n\t\tif (tagName == 'text') return document.createTextNode(styles)\r\n\t\tvar el = document.createElement(tagName)\r\n\t\treturn el.setStyles(styles)\r\n\t}\r\n\r\n\r\n\tvar query    = document.querySelector.bind(document),\r\n\t    queryAll = document.querySelectorAll.bind(document)\r\n\r\n\tvar el_root    = query('#ONPwrapper'),\r\n\t\tel_wrapper = new DOM('div'),\r\n\t    el_player  = new DOM('div'),\r\n\t    el_context = new DOM('div')\r\n\r\n\t\tel_root.removeChildren()\r\n\t\tel_root.append(el_wrapper).append(el_player).append(el_context)\r\n\r\n\t//var RAF = requestAnimationFrame\r\n\r\n\r\n\tfunction adjustScale(height, ratio, full) {\r\n\r\n\t\t//LOG(arguments)\r\n\t\tvar p = Promise.resolve()\r\n\r\n\t\tif (!full) {\r\n\t\t\tel_player.style.height = '100%'\r\n\t\t\tif (height * devicePixelRatio < 480) p = View.showNotice('表示領域が小さ過ぎるため\\n表示が崩れる場合があります')\r\n\t\t}\r\n\r\n\t\tvar ratio = ratio || 16 / 9\r\n\r\n\t\tvar width = height * ratio\r\n\r\n\r\n\t\tel_player.style.fontSize = height / 25 + 'px'\r\n\r\n\t\tel_wrapper.style.height = height + 'px'\r\n\t\tel_wrapper.style.width  = width  + 'px'\r\n\r\n\t\tel_debug.style.width = width - 10 + 'px'\r\n\r\n\t\tif (full) {\r\n\t\t\tel_player.style.height = height + 'px'\r\n\t\t\tif (el_fullscreen) el_fullscreen.style.height = height + 'px'\r\n\t\t} else fitScreen = Util.NOP \r\n\r\n\t\treturn p\r\n\r\n\t}\r\n\t\r\n\r\n\r\n\tvar el_debug = el_root.append(new DOM('div', {\r\n\t\twidth\t\t: '320px',\r\n\t\ttextAlign\t: 'center',\r\n\t\tfontSize\t: '1em',\r\n\t\tpadding\t\t: '5px',\r\n\t}))\r\n\r\n\r\n\tvar bs = {\r\n\t\theight: '2em',\r\n\t\tmargin: '5px',\r\n\t}\r\n\r\n\tvar createDdebugSub = _ => el_debug.append(new DOM('div', { display: 'inline-block' }))\r\n\tvar el_debugSub = createDdebugSub()\r\n\t;[360, 540, 720, 1080].forEach( size => {\r\n\t\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\t\tel.append(new DOM('text', size + 'p'))\r\n\t\tel.on('click', _ =>\tadjustScale(size / devicePixelRatio) )\r\n\t})\r\n\t\r\n\tvar el_debugSub = createDdebugSub()\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'フルウィンドウ(横)'))\r\n\tel.on('click', _ => {\r\n\t\tfitScreen = _ => {\r\n\t\t\tvar ratio = 16 / 9\r\n\t\t\tvar width = document.body.clientWidth\r\n\t\t\tvar height = width / ratio\r\n\t\t\tadjustScale(height, 0, true)\r\n\t\t}\r\n\t\tfitScreen()\r\n\t})\r\n\tvar el_fullscreen\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'フルスクリーン(横)'))\r\n\tel.on('click', _ => {\r\n\t\tel_fullscreen = new DOM('div', {width: '100%', height: '100%', fontSize: '100%'})\r\n\t\tel_player.remove()\r\n\t\tel_wrapper.append(el_fullscreen).append(el_player)\r\n\t\tel_fullscreen.requestFullscreen()\r\n\t\tfitScreen = _ => {\r\n\t\t\tvar ratio = 16 / 9\r\n\t\t\tvar width = screen.width, height = screen.height\r\n\t\t\tif (height * ratio > width) height = width / ratio\r\n\t\t\tadjustScale(height, 0, true)\r\n\t\t}\r\n\t\tfitScreen()\r\n\t\tView.showNotice('この機能はブラウザにより\\n表示の差があります')\r\n\t})\r\n\r\n\r\n\tvar el_debugSub = createDdebugSub()\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'サウンド有無'))\r\n\tel.on('click', _ => {\r\n\t\tvar e = !Sound.soundEnabled\r\n\t\tSound.soundEnabled = e\r\n\t\tStorage.setSetting('soundEnabled', e).check()\r\n\t\tif (Sound.soundAvailability)\r\n\t\t\tView.showNotice(`サウンドを${e?'有':'無'}効に設定しました`)\r\n\t\telse\r\n\t\t\tView.showNotice(`サウンドを${e?'有':'無'}効に設定しました`+'\\nただしお使いの環境では音が出せません')\r\n\t})\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'キャシュ削除'))\r\n\tel.on('click', _ => {\r\n\t\tUtil.cacheClear()\r\n\t\tView.showNotice('キャッシュを削除しました')\r\n\t})\r\n\tvar el = el_debugSub.append(new DOM('button', bs))\r\n\tel.append(new DOM('text', 'リセット'))\r\n\tel.on('click', _ => {\r\n\t\tGame.reset()\r\n\t})\r\n\r\n\r\n\tvar el = new DOM('div')\r\n\tvar el_debugWindow = el_debug.append(el).append(new DOM('pre', { textAlign: 'left', whiteSpace: 'pre-wrap' }))\r\n\tel_debugWindow.textContent = 'デバッグ情報\\n（無し）'\r\n\r\n\r\n\r\n\tfunction setAnimate(func) {\r\n\t\tvar start = performance.now()\r\n\t\tvar cancelled = false\r\n\t\tvar paused = false\r\n\t\treturn new Promise(ok => {\r\n\t\t\tvar complete = _ => {\r\n\t\t\t\tcancelled = true\r\n\t\t\t\tok()\r\n\t\t\t}\r\n\t\t\tvar pause = _ => {\r\n\t\t\t\tpaused = true\r\n\t\t\t\treturn _ => requestAnimationFrame(loop)\r\n\t\t\t}\r\n\t\t\tvar loop = now => {\r\n\t\t\t\tif (cancelled) return\r\n\t\t\t\tvar delta = now - start\r\n\t\t\t\tif (delta < 0) delta = 0\r\n\t\t\t\tif (!paused) requestAnimationFrame(loop)\r\n\t\t\t\tfunc(delta, complete, pause)\r\n\t\t\t}\r\n\t\t\trequestAnimationFrame(loop)\r\n\t\t})\r\n\r\n\t}\r\n\r\n\r\n\tfunction cancelEvent(evt) {\r\n\t\tif (!evt) return\r\n\t\tevt.preventDefault()\r\n\t\tevt.stopImmediatePropagation()\r\n\t}\r\n\r\n\r\n\r\n\r\n\tvar fitScreen = Util.NOP\r\n\twindow.onresize = _ => fitScreen()\r\n\r\n\tdocument.onfullscreenchange = _ => {\r\n\t\tvar full = document.fullscreenElement == el_fullscreen\r\n\t\t//LOG(full)\r\n\t\tif (!full) {\r\n\t\t\tel_fullscreen.remove()\r\n\t\t\tel_fullscreen.removeChildren()\r\n\t\t\tel_wrapper.append(el_player)\r\n\t\t\tadjustScale($scale, $ratio)\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tvar METHODS = {}\r\n\r\n\tMETHODS = {\r\n\t\tCOMMON: {\r\n\r\n\t\t\tclean: function () {\r\n\t\t\t\tthis.changeMode($mode)\r\n\t\t\t},\r\n\r\n\t\t\tinit: function (opt) {\r\n\t\t\t\tthis.initDisplay(opt.style || {})\r\n\t\t\t},\r\n\r\n\t\t\tchangeMode: function (type, opt) {\r\n\t\t\t\tvar type = type.toUpperCase()\r\n\t\t\t\topt = opt || {}\r\n\r\n\t\t\t\tif (!(type in METHODS)) throw 'illegal ViewContext mode type'\r\n\r\n\t\t\t\t$mode = type\r\n\t\t\t\tglobal.View = View = { __proto__: METHODS[type] }\r\n\t\t\t\tView.init(opt)\r\n\r\n\t\t\t},\r\n\r\n\t\t\tchangeModeIfNeeded: function (type, opt) {\r\n\t\t\t\tif ($mode != type) this.changeMode(type, opt)\r\n\t\t\t},\r\n\r\n\t\t\ton: function (kind, onFulfilled, onRejected) {\r\n\t\t\t\t//setAuto(kind)\r\n\t\t\t\tvar rehook = _ => View.on(kind, onFulfilled, onRejected)\r\n\t\t\t\treturn new Promise( resolve => hookInput(kind, resolve) ).then( _ => rehook ).then(onFulfilled).check().catch(onRejected)\r\n\t\t\t},\r\n\r\n\t\t\tinitDisplay: function (opt) {\r\n\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\tbackground\t\t: 'black',\r\n\t\t\t\t\tmargin\t\t\t: 'auto',\r\n\t\t\t\t\tposition\t\t: 'relative',\r\n\t\t\t\t\thidth\t\t\t: '100%',\r\n\t\t\t\t\theight\t\t\t: '100%',\r\n\t\t\t\t\toverflow\t\t: 'hidden',\r\n\t\t\t\t//\t$height\t\t\t: 360,\r\n\t\t\t\t//\t$raito\t\t\t: 16 / 9,\r\n\t\t\t\t})\r\n\r\n\t\t\t\thookClear()\r\n\t\t\t\tstopAuto()\r\n\t\t\t\tthis.windows = {}\r\n\r\n\t\t\t\tvar height = opt.HEIGHT || 480\r\n\t\t\t\topt.height = opt.width = '100%'\r\n\r\n\t\t\t\tel_context = new DOM('div')\r\n\t\t\t\tel_player.removeChildren()\r\n\t\t\t\tel_player.append(el_context)\r\n\t\t\t\tel_wrapper.setStyles({ overflow\t: 'hidden', maxHeight: '100%', maxWidth: '100%' })\r\n\t\t\t\tif (!document.fullscreenElement) el_player.setStyles({ position: 'relative', overflow: 'hidden', height: '100%', width: '100%' })\r\n\t\t\t\tel_context.setStyles(opt)\r\n\t\t\t},\r\n\r\n\t\t\tshowNotice: function (message, show_time, delay_time = 250) {\r\n\t\t\t\tif (!message) throw 'illegal message string'\r\n\t\t\t\tif (!show_time) show_time = message.split('\\n').length * 500\r\n\t\t\t\tmessage = '【！】\\n' + message\r\n\t\t\t\tvar noticeWindow = new DOM('div', {\r\n\t\t\t\t\tfontSize\t\t: '2em',\r\n\t\t\t\t\tcolor\t\t\t: 'rgba(0,0,0,0.75)',\r\n\t\t\t\t\ttextShadow\t\t: 'rgba(0,0,0,0.75) 0.01em 0.01em 0.01em',\r\n\t\t\t\t\tbackgroundColor\t: 'rgba(255,255,0,0.75)',\r\n\t\t\t\t\tboxShadow\t\t: 'rgba(100,100,0,0.5) 0px 0px 5px 5px',\r\n\t\t\t\t\tborderRadius\t: '2% / 10%',\r\n\t\t\t\t\ttextAlign\t\t: 'center',\r\n\t\t\t\t\tlineHeight\t\t: '1.5',\r\n\t\t\t\t\topacity\t\t\t: '0',\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tleft\t\t\t: 'calc((100% - 90%) / 2)',\r\n\t\t\t\t\ttop\t\t\t\t: '20%',\r\n\t\t\t\t\tzIndex\t\t\t: '5000',\r\n\t\t\t\t\twidth\t\t\t: '90%',\r\n\t\t\t\t\tfontFamily\t\t: \"'Hiragino Kaku Gothic ProN', Meiryo, sans-serif\",\r\n\t\t\t\t\tletterSpacing\t: '0.1em',\r\n\t\t\t\t})\r\n\t\t\t\tel_player.append(noticeWindow).append(new DOM('pre', {margin: '5%'})).append(new DOM('text', message))\r\n\t\t\t\treturn new Promise(function (ok, ng) {\r\n\t\t\t\t\tvar opacity = 0\r\n\t\t\t\t\tsetAnimate(function (delta, complete) {\r\n\t\t\t\t\t\topacity = delta / delay_time\r\n\t\t\t\t\t\tif (opacity >= 1) {\r\n\t\t\t\t\t\t\topacity = 1\r\n\t\t\t\t\t\t\tvibrate([100,100,100])\r\n\t\t\t\t\t\t\tcomplete()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnoticeWindow.style.opacity = opacity\r\n\t\t\t\t\t}).delay(show_time).and(setAnimate, (delta, complete) => {\r\n\t\t\t\t\t\topacity = 1 - delta / delay_time\r\n\t\t\t\t\t\tif (opacity <= 0) {\r\n\t\t\t\t\t\t\topacity = 0\r\n\t\t\t\t\t\t\tcomplete()\r\n\t\t\t\t\t\t\tnoticeWindow.remove()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tnoticeWindow.style.opacity = opacity\r\n\t\t\t\t\t}).then(ok, ng)\r\n\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tsetLoadingMessage: function (message) {\r\n\t\t\t\tvar loadingWindow = new DOM('div', {\r\n\t\t\t\t\tfontSize\t\t: '1em',\r\n\t\t\t\t\tcolor\t\t\t: 'rgba(255,255,255,0.25)',\r\n\t\t\t\t\ttextShadow\t\t: 'rgba(0,0,0,0.5) 0.1em 0.1em 0.1em',\r\n\t\t\t\t//\ttextAlign\t\t: 'center',\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tright\t\t\t: '0%',\r\n\t\t\t\t\tbottom\t\t\t: '0%',\r\n\t\t\t\t\tzIndex\t\t\t: '4000',\r\n\t\t\t\t//\twidth\t\t\t: 'auto',\r\n\t\t\t\t\tfontFamily\t\t: \"'Hiragino Kaku Gothic ProN', Meiryo, sans-serif\",\r\n\t\t\t\t\tletterSpacing\t: '0.1em',\r\n\t\t\t\t})\r\n\r\n\t\t\t\tvar defer = Promise.defer()\r\n\t\t\t\tPromise.resolve().delay(100).then(defer.resolve)\r\n\t\t\t\tdefer.promise.then( _ => el_player.append(loadingWindow).append(new DOM('pre', {margin: '0%'})).append(new DOM('text', message)) )\r\n\t\t\t\tfunction hide() { defer.reject(); loadingWindow.remove() }\r\n\t\t\t\treturn hide\r\n\r\n\t\t\t},\r\n\r\n\t\t\tadjustScale, setAnimate,\r\n\r\n\t\t\tupdateDebugWindow: function (obj) {\r\n\t\t\t\tel_debugWindow.textContent = 'デバッグ情報\\n' + JSON.stringify(obj, null, 4)\r\n\t\t\t},\r\n\t\t},\r\n\t}\r\n\r\n\tMETHODS = {\r\n\t\tTEST: { __proto__: METHODS.COMMON,\r\n\t\t\tinitDisplay: function (opt) {\r\n\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\tfontSize\t\t: 'calc(100% * 2 / 3)',\r\n\t\t\t\t\tcolor\t\t\t: 'white',\r\n\t\t\t\t})\r\n\t\t\t\tthis.__proto__.__proto__.initDisplay(opt)\r\n\t\t\t\tvar el = new DOM('div', {\r\n\t\t\t\t\tpadding: '10px',\r\n\t\t\t\t})\r\n\t\t\t\tvar el_body = new DOM('pre')\r\n\t\t\t\tthis.el_test = el_body\r\n\t\t\t\tel_context.append(el).append(el_body)\r\n\t\t\t},\r\n\t\t\tprint: function (text, opt) {\r\n\t\t\t\tthis.el_test.textContent += text\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\tNOVEL: { __proto__: METHODS.COMMON,\r\n\t\t\tinitDisplay: function (opt) {\r\n\t\t\t\t//LOG('initDisplay')\r\n\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\tcolor\t\t\t: 'rgba(255,255,255,0.9)',\r\n\t\t\t\t//\tfontSize\t\t: 'calc(480px / 20)',\r\n\t\t\t\t\ttextShadow\t\t: 'rgba(0,0,0,0.9) 0.1em 0.1em 0.1em',\r\n\t\t\t\t\toverflow\t\t: 'hidden',\r\n\t\t\t\t})\r\n\t\t\t\tthis.__proto__.__proto__.initDisplay(opt)\r\n\r\n\t\t\t\tthis.mainMessageWindow = this.addMessageWindow()\r\n\t\t\t\tthis.imageFrame = this.addImageFrame()\r\n\t\t\t\tthis.logs = []\r\n\r\n\t\t\t\tView.on('menu').then(_ => this.showMenu()).check()\r\n\t\t\t\tView.on('Uwheel').then(_ => View.showLog())\r\n\t\t\t},\r\n\r\n\t\t\tmessageWindowProto: {\r\n\t\t\t\tnextPage: function (name, {sys = false, visited = false} = {}) {\r\n\t\t\t\t\tView.logs.push(View.windows.message.cloneNode(true))\r\n\t\t\t\t\tif (View.logs.length > 100) View.logs.shift()\t\r\n\t\t\t\t\tView.windows.message.setStyles({\r\n\t\t\t\t\t\tbackground\t\t:  sys ? 'rgba(0,100,50,0.5)' : 'rgba(0,0,100,0.5)',\r\n\t\t\t\t\t\tboxShadow\t\t: (sys ? 'rgba(0,100,50,0.5)' : 'rgba(0,0,100,0.5)') + ' 0 0 0.5em 0.5em',\r\n\t\t\t\t\t\tcolor\t\t\t: visited ? 'rgba(255,255,150,0.9)' : 'rgba(255,255,255,0.9)',\r\n\t\t\t\t\t})\r\n\t\t\t\t\tname = !name || name.match(/^\\s+$/) ? '' : '【' +name+ '】' \r\n\t\t\t\t\tthis.el_title.textContent = name\r\n\t\t\t\t\tthis.el_body.removeChildren()\r\n\r\n\t\t\t\t},\r\n\r\n\t\t\t\taddSentence: function (text, {weight = 25, visited = false} = {}) {\r\n\t\t\t\t\ttext += '\\n'\r\n\t\r\n\t\t\t\t\tvar length = text.length\r\n\t\t\t\t\tvar at = 0, nl = 0\r\n\t\t\t\t\tvar el = this.el_body\r\n\t\t\t\t\tvar [aborted, cancelled] = [false, false]\r\n\t\t\t\t\tvar [abort, cancel] = [_ => aborted = true, _ => cancelled = true]\r\n\t\t\t\t\tView.on('go').then(cancel)\r\n\r\n\t\t\t\t\tfunction mul(str, n) { return (str||'100%').match(/[\\d.]+/)[0]*n/100 + 'em' }\r\n\r\n\t\t\t\t\tvar css = {} \r\n\r\n\t\t\t\t\tvar p = setAnimate( (delay, complete, pause) => {\r\n\t\t\t\t\t\tif (aborted) return complete()\r\n\t\t\t\t\t\tif (cancelled) {\r\n\t\t\t\t\t\t\t//el.append(new DOM('text', text.slice(at).replace(/\\u200B/g, '') ))\r\n\t\t\t\t\t\t\t//return complete()\r\n\t\t\t\t\t\t\tnl = length\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twhile (delay / weight >= at - nl) {\r\n\t\t\t\t\t\t\tvar str = text[at]\r\n\t\t\t\t\t\t\tif (!str) return complete()\r\n\t\t\t\t\t\t\tif (str == '\\\\') {\r\n\t\t\t\t\t\t\t\tvar sub = text.slice(at+1)\r\n\t\t\t\t\t\t\t\tif (/^.\\[.*?\\]/.test(sub)) {\r\n\r\n\t\t\t\t\t\t\t\t\tvar nat = text.indexOf(']', at)\r\n\t\t\t\t\t\t\t\t\tvar name = text.slice(at+3, nat).trim()\r\n\t\t\t\t\t\t\t\t\tswitch (sub[0]) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tcase 'e':\r\n\t\t\t\t\t\t\t\t\t\t\tif ($isWebkit) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar img = el.append(new DOM('img', { height: mul(css.fontSize, 0.8), margin: '0 0.05em' }))\r\n\t\t\t\t\t\t\t\t\t\t\t\t;((img, name) => Util.toBlobEmogiURL(name).then( url => {img.src = url} ).check())(img, name)\r\n\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\tvar img = el.append(new DOM('object', { height: mul(css.fontSize, 0.8), margin: '0 0.05em' }))\r\n\t\t\t\t\t\t\t\t\t\t\t\timg.type = 'image/svg+xml'\r\n\t\t\t\t\t\t\t\t\t\t\t\t;((img, name) => Util.toBlobEmogiURL(name).then( url => {img.data = url} ).check())(img, name)\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\t\t\t\t\t\tcase 'c': css.color = name || '' ; break\r\n\t\t\t\t\t\t\t\t\t\tcase 's': css.fontSize = Util.toSize(name) || '100%' ; break\r\n\r\n\t\t\t\t\t\t\t\t\t\tdefault: LOG(`サポートされていないキーワードタイプ『${sub[0]}』`)\r\n\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\t\t\tvar nat = at + 1\r\n\t\t\t\t\t\t\t\t\tswitch (sub[0]) {\r\n\r\n\t\t\t\t\t\t\t\t\t\tcase 'n': el.append(new DOM('br')) ; break\r\n\t\t\t\t\t\t\t\t\t\tcase 'C': css.color = '' ; break\r\n\t\t\t\t\t\t\t\t\t\tcase 'S': css.fontSize = '100%' ; break\r\n\t\t\t\t\t\t\t\t\t\tcase 'b': css.fontWeight = 'bold' ; break\r\n\t\t\t\t\t\t\t\t\t\tcase 'B': css.fontWeight = '' ; break\r\n\t\t\t\t\t\t\t\t\t\t\r\n\r\n\t\t\t\t\t\t\t\t\t\tdefault: LOG(`サポートされていないキーワードタイプ『${sub[0]}』`)\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tnl += nat - at\r\n\t\t\t\t\t\t\t\tat = nat\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tif (str == '\\n') el.append(new DOM('br'))\r\n\t\t\t\t\t\t\t\telse if (str != '\\u200B') el.append(new DOM('span', css)).append(new DOM('text', str))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t \r\n\t\t\t\t\t\t\tif (++at >= length) return complete()\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\r\n\t\t\t\t\tsetAuto(p, {visited})\r\n\t\t\t\t\tp.abort = abort\r\n\t\t\t\t\tp.cancel = cancel\r\n\t\t\t\t\treturn p\r\n\t\t\t\t},\r\n\t\t\t},\r\n\r\n\t\t\taddMessageWindow: function (opt = {}) {\r\n\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\tbackground\t\t: 'rgba(50,50,50,0.5)',\r\n\t\t\t\t\tboxShadow\t\t: 'rgba(50,50,50,0.5) 0 0 0.5em 0.5em',\r\n\t\t\t\t\tborderRadius\t: '1% / 1%',\r\n\t\t\t\t\twidth\t\t\t: 'calc(100% - 0.5em - (2% + 2%))',\r\n\t\t\t\t\theight\t\t\t: 'calc( 25% - 0.5em - (4% + 2%))',\r\n\t\t\t\t\tfontSize\t\t: '100%',\r\n\t\t\t\t\tlineHeight\t\t: '1.5',\r\n\t\t\t\t\t//fontWeight\t\t: 'bold',\r\n\t\t\t\t\tpadding\t\t\t: '4% 2% 2% 2%',\r\n\t\t\t\t\twhiteSpace\t\t: 'nowrap',\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tbottom\t\t\t: '0.25em',\r\n\t\t\t\t\tleft\t\t\t: '0.25em',\r\n\t\t\t\t\tzIndex\t\t\t: '1500',\r\n\t\t\t\t\tfontFamily\t\t: \"'Hiragino Kaku Gothic ProN', Meiryo, sans-serif\",\r\n\t\t\t\t\tletterSpacing\t: '0.1em',\r\n\r\n\t\t\t\t})\r\n\t\t\t\tvar el = new DOM('div', opt)\r\n\t\t\t\tthis.windows.message = el\r\n\t\t\t\tel_context.append(el)\r\n\r\n\t\t\t\tvar el_title = el.append(new DOM('div', {\r\n\t\t\t\t\tdisplay\t\t\t: 'inline-block',\r\n\t\t\t\t\tmarginRight\t\t: '5%',\r\n\t\t\t\t//\tcolor\t\t\t: 'blue',\r\n\t\t\t\t\ttextAlign\t\t: 'right',\r\n\t\t\t\t\tverticalAlign\t: 'top',\r\n\t\t\t\t\twidth\t\t\t: '15%',\r\n\t\t\t\t\theight\t\t\t: '100%',\r\n\t\t\t\t//\tbackground\t\t: 'rgba(255,100,200,0.5)',\r\n\t\t\t\t//\tpadding\t\t\t: '5px',\r\n\t\t\t\t}))\r\n\r\n\t\t\t\tel_title.onmousedown = evt => {\r\n\t\t\t\t\tevt.preventDefault()\r\n\t\t\t\t\tevt.stopImmediatePropagation()\r\n\t\t\t\t\teventFire('menu', false)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar el_body = el.append(new DOM('div', {\r\n\t\t\t\t\tdisplay\t\t\t: 'inline-block',\r\n\t\t\t\t\twidth\t\t\t: 'auto',\r\n\t\t\t\t\theight\t\t\t: '100%',\r\n\t\t\t\t//\tpadding\t\t\t: '15px',\r\n\t\t\t\t})).append(new DOM('span', {\r\n\t\t\t\t\t//margin\t\t\t: '0',\r\n\t\t\t\t}))\r\n\r\n\t\t\t\tvar mw = { __proto__: this.messageWindowProto,\r\n\t\t\t\t\tel\t\t\t\t: el,\r\n\t\t\t\t\tel_title\t\t: el_title,\r\n\t\t\t\t\tel_body\t\t\t: el_body,\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn mw\r\n\t\t\t},\r\n\r\n\t\t\taddImageFrame: function (opt = {}) {\r\n\r\n\t\t\t\tvar fr = new DOM('div', {\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tleft\t\t\t: '0',\r\n\t\t\t\t\ttop\t\t\t\t: '0',\r\n\t\t\t\t\theight\t\t\t: '100%',\r\n\t\t\t\t\twidth\t\t\t: '100%',\r\n\t\t\t\t\tzIndex\t\t\t: '1000',\r\n\t\t\t\t})\r\n\r\n\t\t\t\tel_context.append(fr)\r\n\t\t\t\treturn fr\r\n\r\n\t\t\t},\r\n\r\n\t\t\tsetConfirmWindow: function (name, {sys = true} = {}) {\r\n\t\t\t\treturn View.setChoiceWindow([{name, value: true}, {name: 'キャンセル', value:false}], {sys})\r\n\t\t\t},\r\n\r\n\t\t\tsetChoiceWindow: function (opts, {sys = false, closeable = false} = {}) {\r\n\r\n\t\t\t\tvar defer = Promise.defer()\r\n\t\t\t\tvar removed = false\r\n\t\t\t\tvar focusbt\r\n\t\t\t\tvar focusindex = -10000\r\n\t\t\t\tvar bts = []\r\n\r\n\r\n\t\t\t\tvar cw = new DOM('div', {\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tleft\t\t\t: 'calc((100% - 70%) / 2 - 5%)',\r\n\t\t\t\t\twidth\t\t\t: '70%',\r\n\t\t\t\t//\theight\t\t\t: '70%',\r\n\t\t\t\t\ttop\t\t\t\t: '5%', \r\n\t\t\t\t\tboxShadow\t\t: sys ? 'rgba(100, 255, 150, 0.5) 0 0 5em' : 'rgba(100, 100, 255, 0.3) 0 0 5em',\r\n\t\t\t\t\tborderRadius\t: '3% / 5%',\r\n\t\t\t\t\tbackground\t\t: sys ? 'rgba(100, 255, 150, 0.5)' : 'rgba(100, 100, 255, 0.3)',\r\n\t\t\t\t\tpadding\t\t\t: '0% 5%',\r\n\t\t\t\t\toverflowY\t\t: opts.length > 3 ? 'scroll' : 'hidden',\r\n\t\t\t\t\tmaxHeight\t\t: '70%',\r\n\t\t\t\t\tzIndex\t\t\t: '2500',\r\n\t\t\t\t//\tverticalAlign\t: 'middle',\r\n\t\t\t\t})\r\n\t\t\t\tif (!sys) {\r\n\t\t\t\t\tif (View.windows.choice) View.windows.choice.remove()\r\n\t\t\t\t\tView.windows.choice = cw\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (View.windows.choiceBack) View.windows.choiceBack.remove()\r\n\t\t\t\t\tView.windows.choiceBack = cw\r\n\t\t\t\t}\r\n\r\n\t\t\t\topts.forEach(function (opt) {\r\n\t\t\t\t\tif (!('value' in opt)) opt.value = opt.name\r\n\t\t\t\t\tvar bt = new DOM('button', {\r\n\t\t\t\t\t\tdisplay\t\t\t: 'block',\r\n\t\t\t\t\t\tfontSize\t\t: '1.5em',\r\n\t\t\t\t\t\tboxShadow\t\t: 'inset 0 1px 3px #F1F1F1, inset 0 -15px ' + (sys ? 'rgba(0,116,116,0.2)' : 'rgba(0,0,223,0.2)') + ', 1px 1px 2px #E7E7E7',\r\n\t\t\t\t\t\tbackground\t\t: sys ? 'rgba(0,100,50,0.8)' : 'rgba(0,0,100,0.8)',\r\n\t\t\t\t\t\tcolor\t\t\t: 'white',\r\n\t\t\t\t\t\tborderRadius\t: '5% / 50%',\r\n\t\t\t\t\t\twidth\t\t\t: '100%',\r\n\t\t\t\t\t\theight\t\t\t: '2.5em',\r\n\t\t\t\t\t\tmargin\t\t\t: '5% 0%',\r\n\t\t\t\t\t\ttextShadow\t\t: 'rgba(0,0,0,0.9) 0em 0em 0.5em',\r\n\t\t\t\t\t\tfontFamily\t\t: \"'Hiragino Kaku Gothic ProN', Meiryo, sans-serif\",\r\n\t\t\t\t\t\tletterSpacing\t: '0.1em',\r\n\t\t\t\t\t})\r\n\t\t\t\t\tbt.disabled = !!opt.disabled\r\n\t\t\t\t\tbt.append(new DOM('text', opt.name))\r\n\t\t\t\t\tbt.onfocus = bt.onmouseover = _ => {\r\n\t\t\t\t\t\tfocusSE.play()\r\n\t\t\t\t\t\tbt.setStyles({ background: sys ? 'rgba(100,200,150,0.8)' : 'rgba(100,100,200,0.8)' })\r\n\t\t\t\t\t\tvar elm = bts[focusindex]\r\n\t\t\t\t\t\tif (elm) elm.blur()\r\n\t\t\t\t\t\tfocusindex = index\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbt.onblur = bt.onmouseout = _ => {\r\n\t\t\t\t\t\tbt.setStyles({ background: sys ? 'rgba(0,100,50,0.8)' : 'rgba(0,0,100,0.8)' })\r\n\t\t\t\t\t\tvar elm = bts[focusindex]\r\n\t\t\t\t\t\tif (elm) elm.blur()\r\n\t\t\t\t\t\t//focusindex = -10000\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbt.onclick = evt => {\r\n\t\t\t\t\t\tclickSE.play()\r\n\t\t\t\t\t\tvibrate([50])\r\n\t\t\t\t\t\tclose(evt, opt.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tbt.onmousedown = cancelEvent\r\n\t\t\t\t\tcw.append(bt)\r\n\t\t\t\t\tif (!opt.disabled) var index = bts.push(bt) - 1\r\n\t\t\t\t}, this)\r\n\r\n\t\t\t\tfunction close(evt, val) {\r\n\t\t\t\t\tcancelEvent(evt)\r\n\t\t\t\t\tremoved = true\r\n\t\t\t\t\tdefer.resolve(val)\r\n\t\t\t\t\tif (!sys) delete View.windows.choice\r\n\t\t\t\t\telse delete View.windows.choiceBack\r\n\t\t\t\t\tcw.remove()\r\n\t\t\t\t\tif (img) img.remove()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tView.on('up', rehook => focusmove(rehook, -1) )\r\n\t\t\t\tView.on('down', rehook => focusmove(rehook, +1) )\r\n\t\t\t\tView.on('left', rehook => focusmove(rehook, -10) )\r\n\t\t\t\tView.on('right', rehook => focusmove(rehook, +10) )\r\n\t\t\t\tView.on('enter', focusenter)\r\n\r\n\t\t\t\tfunction focusmove(rehook, n) {\r\n\t\t\t\t\tif (removed) return\r\n\t\t\t\t\tvar fi = focusindex\r\n\t\t\t\t\tvar si = fi + n\r\n\t\t\t\t\tvar last = bts.length - 1\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (fi < 0) si = n > 0 ? 0 : last\r\n\t\t\t\t\telse if (si < 0) si = fi == 0 ? last : 0\r\n\t\t\t\t\telse if (si > last) si = fi == last ? 0 : last\r\n\t\t\t\t\tbts[si].focus()\r\n\t\t\t\t\tPromise.delay(100).then(rehook)\r\n\t\t\t\t}\r\n\t\t\t\tfunction focusenter(rehook) {\r\n\t\t\t\t\tif (removed) return\r\n\t\t\t\t\tif (focusindex >= 0) return bts[focusindex].click()\r\n\t\t\t\t\tPromise.delay(100).then(rehook)\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (closeable) {\r\n\t\t\t\t\tvar img = new DOM('img', {\r\n\t\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\t\tright\t\t\t: '5em',\r\n\t\t\t\t\t\ttop\t\t\t\t: '1.5em',\r\n\t\t\t\t\t\twidth\t\t\t: '2.5em',\r\n\t\t\t\t\t\theight\t\t\t: '2.5em',\r\n\t\t\t\t\t\topacity\t\t\t: '0.75',\r\n\t\t\t\t\t\tzIndex\t\t\t: '3000',\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif ($isWebkit) {\r\n\t\t\t\t\t\tUtil.toBlobSysPartsURL('閉じるボタン').then( url => {img.src = url} ).check()\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\timg.src = 'エンジン/画像/閉じるボタン.svg'\r\n\t\t\t\t\t}\r\n\t\t\t\t\timg.onmousedown = evt => {\r\n\t\t\t\t\t\tclose(evt, '閉じる')\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tel_context.append(img)\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tel_context.append(cw)\r\n\r\n\r\n\t\t\t\treturn defer.promise\r\n\r\n\t\t\t},\r\n\r\n\r\n\t\t\tsetBGImage: function (opt) {\r\n\t\t\t\tvar defer = Promise.defer()\r\n\t\t\t\tvar {url, sys} = opt\r\n\t\t\t\tvar fr = View.imageFrame\r\n\t\t\t\tif (url) {\r\n\t\t\t\t\tvar img = new Image\r\n\t\t\t\t\timg.onload = _ => {\r\n\t\t\t\t\t\tfr.setStyles({\r\n\t\t\t\t\t\t\tbackgroundImage: `url(${url})`,\r\n\t\t\t\t\t\t\tbackgroundSize: 'cover',\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tdefer.resolve()\r\n\t\t\t\t\t}\r\n\t\t\t\t\timg.src = url\r\n\t\t\t\t\tif (!sys) Data.current.active.BGImage = opt\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfr.setStyles({\r\n\t\t\t\t\t\tbackgroundImage: 'none',\r\n\t\t\t\t\t\tbackgroundSize: 'cover',\r\n\t\t\t\t\t})\r\n\t\t\t\t\tdefer.resolve()\r\n\t\t\t\t}\r\n\t\t\t\treturn defer.promise\r\n\t\t\t},\r\n\r\n\t\t\tsetFDImages: function (ary) {\r\n\t\t\t\tvar defer = Promise.defer()\r\n\t\t\t\tvar fr = View.imageFrame\r\n\t\t\t\t//var ch = [].slice.call(el.children)\r\n\t\t\t\tPromise.all(ary.map( opt => new Promise( ok => {\r\n\t\t\t\t\tUtil.setDefaults(opt, {\r\n\t\t\t\t\t\tleft\t: null,\r\n\t\t\t\t\t\tright\t: null,\r\n\t\t\t\t\t\ttop\t\t: null,\r\n\t\t\t\t\t\tbottom\t: null,\r\n\t\t\t\t\t})\r\n\t\t\t\t\tvar mar = parseInt(opt.top) || parseInt(opt.bottom) || 0\r\n\t\t\t\t\tvar height = opt.height ? opt.height : `${100-mar}%`\r\n\t\t\t\t\tvar img = new DOM('img', {\r\n\t\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\t\tleft\t\t\t: opt.left,\r\n\t\t\t\t\t\tright\t\t\t: opt.right,\r\n\t\t\t\t\t\ttop\t\t\t\t: opt.top,\r\n\t\t\t\t\t\tbottom\t\t\t: opt.bottom,\r\n\t\t\t\t\t//\tmaxWidth\t\t: '50%',\r\n\t\t\t\t\t\theight\t\t\t: height,\r\n\t\t\t\t\t})\r\n\t\t\t\t\timg.onload = _ => ok(img)\r\n\t\t\t\t\timg.src = opt.url\r\n\t\t\t\t\t\r\n\t\t\t\t}) ) ).then( els => {\r\n\t\t\t\t\tfr.removeChildren()\r\n\t\t\t\t\tels.forEach( el => fr.append(el) )\r\n\t\t\t\t\tdefer.resolve()\r\n\t\t\t\t})\r\n\r\n\t\t\t\tData.current.active.FDImages = ary\r\n\t\t\t\treturn defer.promise\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// エフェクト\r\n\t\t\tprepareFade: function (opts) {\r\n\t\t\t\tif (View.fake) return Promise.reject('２重にエフェクトの準備をしようとした')\r\n\t\t\t\tvar fr = View.imageFrame\r\n\t\t\t\tvar fake = View.fake = fr.cloneNode(true)\r\n\t\t\t\tel_context.append(fake)\r\n\t\t\t\t//fr.style.opacity = 0\r\n\t\t\t\tData.saveDisabled = true\r\n\t\t\t\treturn Promise.resolve()\r\n\t\t\t},\r\n\r\n\t\t\tfade: function ({msec = 1000, visited = false} = {}) {\r\n\t\t\t\t//debugger\r\n\t\t\t\tif (!View.fake) return Promise.reject('このエフェクトには事前準備が必要')\r\n\t\t\t\tvar fr = View.imageFrame, fake = View.fake\r\n\t\t\t\tvar cancelled = false\r\n\t\t\t\tView.on('go').then(_ => cancelled = true)\r\n\t\t\t\tif (visited) setAuto(null, {visited: true})\r\n\t\t\t\treturn setAnimate( (delay, complete, pause) => {\r\n\t\t\t\t\tvar per = delay/msec\r\n\t\t\t\t\tif (per >= 1 || cancelled) {\r\n\t\t\t\t\t\tper = 1\r\n\t\t\t\t\t\tcomplete()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfake.style.opacity = 1 - per\r\n\t\t\t\t\t//fr.style.opacity = per \r\n\t\t\t\t}).then( _ => {\r\n\t\t\t\t\tfake.remove()\r\n\t\t\t\t\tdelete View.fake\r\n\t\t\t\t\tData.saveDisabled = false\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tflash: function ({msec = 300, color = 'white', visited = false} = {}) {\r\n\t\t\t\tvar fake = View.imageFrame.cloneNode(false)\r\n\t\t\t\tfake.style.background = ''\r\n\t\t\t\tfake.style.backgroundColor = color\r\n\t\t\t\tfake.style.opacity = '0'\r\n\t\t\t\tel_context.append(fake)\r\n\t\t\t\tvar cancelled = false\r\n\t\t\t\tView.on('go').then(_ => cancelled = true)\r\n\t\t\t\tif (visited) setAuto(null, {visited: true})\r\n\t\t\t\treturn setAnimate( (delay, complete, pause) => {\r\n\t\t\t\t\tvar per = delay/msec\r\n\t\t\t\t\tif (per >= 1 || cancelled) {\r\n\t\t\t\t\t\tper = 1\r\n\t\t\t\t\t\tcomplete()\r\n\t\t\t\t\t}\r\n\t\t\t\t\tfake.style.opacity = per < 0.5 ? per*2 : 2-per*2 \r\n\t\t\t\t}).then( _ => {\r\n\t\t\t\t\tfake.remove()\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\r\n\t\t\t//会話\r\n\t\t\tnextPage: function (name, opt) {\r\n\t\t\t\tthis.mainMessageWindow.nextPage(name, opt)\r\n\t\t\t},\r\n\r\n\t\t\taddSentence: function (text, opt) {\r\n\t\t\t\treturn this.mainMessageWindow.addSentence(text, opt)\r\n\t\t\t},\r\n\r\n\t\t\tshowMenu: function () {\r\n\t\t\t\tif (Data.phase != 'play' || View.menuIndex > 0) return View.on('Rclick').then(_ => View.showMenu())\r\n\t\t\t\t//LOG('show')\r\n\t\t\t\tView.menuIndex = (View.menuIndex||0)+1\r\n\t\t\t\t//eventBlock()\r\n\t\t\t\teventSysOnly(true)\r\n\t\t\t\tView.on('menu').then( _ => {\r\n\t\t\t\t\tif (this.windows.choiceBack) this.windows.choiceBack.remove()\r\n\t\t\t\t\tView.hideMenu()\r\n\t\t\t\t} ).check()\r\n\t\t\t\tObject.keys(View.windows).forEach( key => {\r\n\t\t\t\t\tvar el = View.windows[key]\r\n\t\t\t\t\tel.hidden = !el.hidden\r\n\t\t\t\t} )\r\n\t\t\t\t\r\n\t\t\t\tvar ary = ['セーブ', 'ロード', 'ウィンドウ消去', 'ログ表示', 'オート', '既読スキップ', 'リセット'].map(name => ({name}))\r\n\t\t\t\tif (Data.saveDisabled) ary[0].disabled = true\r\n\t\t\t\tView.setChoiceWindow(ary, {sys: true, closeable: true}).then( kind => {\r\n\r\n\t\t\t\t\tswitch (kind) {\r\n\t\t\t\t\t\tcase 'セーブ':\r\n\t\t\t\t\t\t\tPlayer.saveSaveData().check().through(View.hideMenu)\r\n\t\t\t\t\t\t\t.then(f => f && View.showNotice('セーブしました。'), err => View.showNotice('セーブに失敗しました。') )\r\n\t\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\t\tcase 'ロード': Game.loadSaveData().then(View.hideMenu) ; break\r\n\r\n\t\t\t\t\t\tcase 'ウィンドウ消去':\r\n\t\t\t\t\t\t\teventSysOnly(false)\r\n\t\t\t\t\t\t\teventBlock() \r\n\t\t\t\t\t\t\tView.on('*', _ => {\r\n\t\t\t\t\t\t\t\tView.hideMenu()\r\n\t\t\t\t\t\t\t\teventAllow()\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\t\tcase 'ログ表示': View.hideMenu(); eventFire('Uwheel') ; break\r\n\r\n\t\t\t\t\t\tcase 'オート': View.hideMenu(); startAuto() ; break\r\n\r\n\t\t\t\t\t\tcase '既読スキップ': View.hideMenu(); startSkip() ; break\r\n\r\n\t\t\t\t\t\tcase 'リセット': View.setConfirmWindow('リセットする').then(f => { if (f) Game.reset() ;else View.hideMenu() }) ; break\r\n\r\n\t\t\t\t\t\tcase '閉じる': View.hideMenu(); break\r\n\r\n\t\t\t\t\t\tdefault: throw 'illegal choice type'\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\r\n\t\t\t},\r\n\r\n\t\t\thideMenu: function () {\r\n\t\t\t\t//LOG('hide')\r\n\t\t\t\tif (!View.menuIndex) return\r\n\t\t\t\t--View.menuIndex\r\n\t\t\t\t//eventAllow()\r\n\t\t\t\teventSysOnly(false)\r\n\t\t\t\tView.on('menu').then(_ => View.showMenu())\r\n\t\t\t\tObject.keys(View.windows).forEach( key => {\r\n\t\t\t\t\tvar el = View.windows[key]\r\n\t\t\t\t\tel.hidden = !el.hidden\r\n\t\t\t\t} )\r\n\t\t\t},\r\n\r\n\t\t\tshowLog: function (text) {\r\n\r\n\t\t\t\tif (Data.phase != 'play' || this.windows.log) return\r\n\t\t\t\teventSysOnly(true)\r\n\r\n\t\t\t\tObject.keys(View.windows).forEach( key => {\r\n\t\t\t\t\tvar el = View.windows[key]\r\n\t\t\t\t\tel.hidden = !el.hidden\r\n\t\t\t\t} )\r\n\r\n\t\t\t\tvar el = new DOM('div', {\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tleft\t\t\t: '1em',\r\n\t\t\t\t\ttop\t\t\t\t: '1em',\r\n\t\t\t\t\twidth\t\t\t: 'calc(100% - 1em * 2)',\r\n\t\t\t\t\theight\t\t\t: 'calc(100% - 1em * 2)',\r\n\t\t\t\t\toverflowX\t\t: 'hidden',\r\n\t\t\t\t\toverflowY\t\t: 'scroll',\r\n\t\t\t\t\tbackground\t\t: 'rgba(50,50,50,0.9)',\r\n\t\t\t\t\tboxShadow\t\t: 'rgba(50,50,50,0.9) 0 0 1em 1em',\r\n\t\t\t\t\tzIndex\t\t\t: '2500',\r\n\t\t\t\t})\r\n\r\n\t\t\t\tvar img = new DOM('img', {\r\n\t\t\t\t\tposition\t\t: 'absolute',\r\n\t\t\t\t\tright\t\t\t: '2em',\r\n\t\t\t\t\ttop\t\t\t\t: '1em',\r\n\t\t\t\t\twidth\t\t\t: '3em',\r\n\t\t\t\t\theight\t\t\t: '3em',\r\n\t\t\t\t\topacity\t\t\t: '0.5',\r\n\t\t\t\t\tzIndex\t\t\t: '3000'\r\n\t\t\t\t})\r\n\t\t\t\tif ($isWebkit) {\r\n\t\t\t\t\tUtil.toBlobSysPartsURL('閉じるボタン').then( url => {img.src = url} ).check()\r\n\t\t\t\t} else {\r\n\t\t\t\t\timg.src = 'エンジン/画像/閉じるボタン.svg'\r\n\t\t\t\t}\r\n\t\t\t\tel_context.append(img)\r\n\r\n\t\t\t\timg.onmousedown = evt => {\r\n\t\t\t\t\tevt.preventDefault()\r\n\t\t\t\t\tevt.stopImmediatePropagation()\r\n\t\t\t\t\timg.remove()\r\n\t\t\t\t\tif (this.windows.log) {\r\n\t\t\t\t\t\tthis.windows.log.remove()\r\n\t\t\t\t\t\tdelete this.windows.log\r\n\t\t\t\t\t}\r\n\t\t\t\t\tObject.keys(View.windows).forEach( key => {\r\n\t\t\t\t\t\tvar el = View.windows[key]\r\n\t\t\t\t\t\tel.hidden = !el.hidden\r\n\t\t\t\t\t} )\r\n\t\t\t\t\teventSysOnly(false)\r\n\t\t\t\t\tView.on('Uwheel').then(_ => View.showLog())\r\n\t\t\t\t}\r\n\r\n\t\t\t\tView.logs.forEach(log => {\r\n\t\t\t\t\tlog.setStyles({\r\n\t\t\t\t\t\tposition\t\t: '',\r\n\t\t\t\t\t\theight\t\t\t: '',\r\n\t\t\t\t\t\tpadding\t\t\t: '',\r\n\t\t\t\t\t\tborderRadius\t: '',\r\n\t\t\t\t\t\twidth\t\t\t: '',\r\n\t\t\t\t\t\tbackground\t\t: '',\r\n\t\t\t\t\t\tboxShadow\t\t: '',\r\n\t\t\t\t\t\tmarginBottom\t: '0.5em',\r\n\r\n\t\t\t\t\t})\r\n\t\t\t\t\tel.append(log)\r\n\t\t\t\t})\r\n\t\t\t\tthis.windows.log = el\r\n\r\n\t\t\t\tel_context.append(el)\r\n\t\t\t\tel.scrollTop = 1<<15-1\r\n\r\n\t\t\t},\r\n\r\n\t\t},\r\n\r\n\t}\r\n\r\n\r\n\tvar {setAuto, startAuto, stopAuto, startSkip} = (_ => { \r\n\r\n\t\tvar enabled = false\r\n\t\tvar delay = 0\r\n\t\tvar wait = true\r\n\r\n\t\treturn {\r\n\t\t\tsetAuto(p, {visited = false} = {}) {\r\n\t\t\t\tif (!enabled) return\r\n\t\t\t\tif (wait && p) p.delay(delay).then(_ => { if (enabled) eventFire('go') }).check()\r\n\t\t\t\telse if (visited) {\r\n\t\t\t\t\teventFire('go')\r\n\t\t\t\t\tif (p) p.delay(delay).then(_ => { if (enabled) eventFire('go') }).check()\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tstartAuto() {\r\n\t\t\t\tenabled = true\r\n\t\t\t\twait = true\r\n\t\t\t\tdelay = 1500\r\n\t\t\t\tView.on('*', stopAuto)\r\n\t\t\t\tsetAuto(Promise.resolve())\r\n\t\t\t},\r\n\t\t\tstopAuto() {\r\n\t\t\t\tenabled = false\r\n\t\t\t},\r\n\t\t\tstartSkip() {\r\n\t\t\t\tenabled = true\r\n\t\t\t\twait = false\r\n\t\t\t\tdelay = 150\r\n\t\t\t\tView.on('*', stopAuto)\r\n\t\t\t\tsetAuto(null, {visited: 1})\r\n\t\t\t},\r\n\t\t}\r\n\t})()\r\n\r\n\r\n\tvar {hookInput, hookClear, eventBlock, eventAllow, eventFire, eventSysOnly} = (_ => {\r\n\r\n\t\tvar keyboardTable = {\r\n\t\t\t 8: 'backspace',\r\n\t\t\t13: 'enter',\r\n\t\t\t32: 'space',\r\n\t\t\t37: 'left',\r\n\t\t\t38: 'up',\r\n\t\t\t39: 'right',\r\n\t\t\t40: 'down',\r\n\t\t}\r\n\r\n\t\tvar hooks = []\r\n\t\tvar sysOnly = false\r\n\t\t//var blocks = new Set\r\n\r\n\t\tdocument.addEventListener('keydown', evt => {\r\n\t\t\tvar type = keyboardTable[evt.keyCode]\r\n\t\t\tif (type) onEvent(type, evt)\r\n\t\t}, true)\r\n\r\n\t\tel_wrapper.addEventListener('mousedown', evt => {\r\n\t\t\tvar type = 'LMR'[evt.button]\r\n\t\t\tif (type) onEvent(type + 'click', evt)\r\n\t\t})\r\n\r\n\t\tvar wheeling = false\r\n\t\tel_wrapper.addEventListener('wheel', evt => {\r\n\t\t\tif (wheeling) return\r\n\t\t\twheeling = true\r\n\t\t\tsetTimeout( _ => { wheeling = false }, 50)\r\n\t\t\tvar type = evt.deltaY < 0 ? 'U' : 'D'\r\n\t\t\tif (type) onEvent(type + 'wheel', evt)\r\n\t\t})\r\n\r\n\t\tel_wrapper.addEventListener('contextmenu', evt => {\r\n\t\t\tonEvent('contextmenu', evt)\r\n\t\t}, true)\r\n\r\n\t\tfunction onEvent(type, evt, sys) {\r\n\t\t\tcancelEvent(evt)\r\n\t\t\tif (sysOnly && !sys) return\r\n\t\t\thooks = hooks.reduce( (ary, hook) => {\r\n\t\t\t\tif (hook.indexOf(type) === -1 || hook.blocked > 0) ary.push(hook)\r\n\t\t\t\telse hook.resolve()\r\n\t\t\t\treturn ary\r\n\t\t\t}, [])\r\n\t\t}\r\n\r\n\t\tfunction toHook(kind) {\r\n\t\t\tswitch (kind) {\r\n\t\t\t\tcase '*':\r\n\t\t\t\t\treturn ['*', 'Lclick', 'Rclick', 'Uwheel', 'Dwheel', 'enter', 'space', 'backspace']\r\n\t\t\t\tcase 'go':\r\n\t\t\t\t\treturn ['go', 'Lclick', 'Dwheel', 'enter', 'space']\r\n\t\t\t\tcase 'menu':\r\n\t\t\t\t\treturn ['menu', 'Rclick', 'backspace']\r\n\t\t\t\tdefault: \r\n\t\t\t\t\treturn [kind]\t\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn {\r\n\t\t\thookInput(kind, resolve) {\r\n\t\t\t\tvar hook = toHook(kind)\r\n\t\t\t\thook.resolve = resolve\r\n\t\t\t\thook.blocked = 0\r\n\t\t\t\thooks.push(hook)\r\n\t\t\t},\r\n\t\t\thookClear() {\r\n\t\t\t\thooks.length = 0\r\n\t\t\t\teventSysOnly(false)\r\n\t\t\t},\r\n\t\t\teventBlock() {\r\n\t\t\t\thooks.forEach( hook => ++hook.blocked )\r\n\t\t\t},\r\n\t\t\teventAllow() {\r\n\t\t\t\thooks.forEach( hook => --hook.blocked )\r\n\t\t\t},\r\n\t\t\teventFire(type, sys = true) {\r\n\t\t\t\tonEvent(type, null, sys)\r\n\t\t\t},\r\n\t\t\teventSysOnly(flag) {\r\n\t\t\t\tsysOnly = flag\r\n\t\t\t}\r\n\t\t}\r\n\t})()\r\n\r\n\r\n\tfunction vibrate(...args) {\r\n\t\tif (typeof navigator.vibrate == 'function') navigator.vibrate(...args)\r\n\t}\r\n\r\n\tvar $full = false\r\n\tvar $ratio = 16 / 9\r\n\tvar $mode = ''\r\n\tvar width = document.body.clientWidth * devicePixelRatio\r\n\tvar $scale = (width / $ratio >= 540 ? 540 : width / $ratio) / devicePixelRatio\r\n\t//document.body.style.width = '100%'\r\n\r\n\tMETHODS.TEST.changeMode('TEST')\r\n\tvar p = adjustScale($scale, $ratio)\r\n\r\n\tp.then( _ => READY.View.ready(null) )\r\n\r\n}).check()","($__placeholder__0 = $__placeholder__1.$__placeholder__2) === void 0 ?\n        $__placeholder__3 : $__placeholder__4","$traceurRuntime.toObject($__placeholder__0)","\r\nREADY('Storage', 'Player').then( ({Util}) => {\r\n\t'use strict'\r\n\r\n\r\n\tvar init = Util.co(function* () {\r\n\r\n\t\tvar soundEnabled = yield Storage.getSetting('soundEnabled', false)\r\n\r\n\t\treturn setup ({soundEnabled})\r\n\t})\r\n\r\n\r\n\tvar setup = config => {\r\n\r\n\t\tvar {soundEnabled} = config\r\n\r\n\t\tvar ctx = null\r\n\t\tvar bufferMap = new Map\r\n\t\t//var {R} = Util.overrides\r\n\r\n\t\tclass GainChanger {\r\n\r\n\t\t\tconstructor(gain) {\r\n\t\t\t\tthis.gain = gain\r\n\t\t\t}\r\n\r\n\t\t\tup(duration = 0.5) {\r\n\t\t\t\tvar t0 = ctx.currentTime, gain = this.gain.gain\r\n\t\t\t\tgain.cancelScheduledValues(t0)\r\n\t\t\t\tgain.setValueAtTime(gain.value, t0)\r\n\t\t\t\tgain.linearRampToValueAtTime(1, t0 + duration)\r\n\t\t\t}\r\n\r\n\t\t\toff() {\r\n\t\t\t\tvar t0 = ctx.currentTime, gain = this.gain.gain\r\n\t\t\t\tgain.cancelScheduledValues(t0)\r\n\t\t\t\tgain.value = 0\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tvar soundAvailability = !!global.AudioContext\r\n\r\n\t\tif (soundAvailability) {\r\n\r\n\t\t\tctx = new AudioContext()\r\n\t\t\t\r\n\t\t\tvar gainRoot   = ctx.createGain(); gainRoot.connect(ctx.destination)\r\n\t\t\tvar compMaster = ctx.createDynamicsCompressor(); compMaster.connect(gainRoot)\r\n\r\n\t\t\tvar gainMaster = ctx.createGain(); gainMaster.connect(compMaster); gainMaster.gain.value = 0.5\r\n\t\t\tvar gainSysSE  = ctx.createGain(); gainSysSE.connect(gainMaster)\r\n\t\t\tvar gainBGM    = ctx.createGain(); gainBGM.connect(gainMaster)\r\n\r\n\t\t\tvar rootVolume = new GainChanger(gainRoot) \r\n\t\t\tdocument.addEventListener('visibilitychange', _ => {\r\n\t\t\t\tif (document.hidden) rootVolume.off() \r\n\t\t\t\telse rootVolume.up()\r\n\t\t\t})\r\n\t\t\tif (document.hidden) rootVolume.off()\r\n\r\n\t\t}\r\n\r\n\t\tfunction canplay() {\r\n\t\t\treturn ctx && soundAvailability && soundEnabled\r\n\t\t}\r\n\r\n\r\n\t\tclass Sound {\r\n\r\n\t\t\tconstructor(kind, name) {\r\n\t\t\t\tif (!kind) throw 'タイプが未指定'\r\n\t\t\t\tif (!name) throw '名前が未指定'\r\n\t\t\t\tif (!soundAvailability) return\r\n\t\t\t\tswitch (kind) {\r\n\t\t\t\t\tcase 'sysSE':\r\n\t\t\t\t\t\tvar url = `エンジン/効果音/${name}.ogg`\r\n\t\t\t\t\t\tvar des = gainSysSE\r\n\t\t\t\t\t\tvar type = 'SE'\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tdefault: throw `想定外のタイプ『${kind}』`\r\n\t\t\t\t}\r\n\t\t\t\tvar gain = ctx.createGain()\r\n\t\t\t\tgain.connect(des)\r\n\t\t\t\tthis.readyState = 0\r\n\t\t\t\tthis.type = type \r\n\t\t\t\tthis.url = url\r\n\t\t\t\tthis.buf = null\r\n\t\t\t\tthis.src = null\r\n\t\t\t\tthis.gain = gain\r\n\t\t\t\tthis.prepare()\r\n\t\t\t}\r\n\r\n\t\t\tload() {\r\n\t\t\t\tvar {url} = this\r\n\t\t\t\tvar buf = bufferMap.get(url)\r\n\t\t\t\tif (buf) return Promise.resolve(buf)\r\n\t\t\t\treturn Util.load(url, 'arraybuffer').then( buf => {\r\n\t\t\t\t\tbufferMap.set(url, buf)\r\n\t\t\t\t\tthis.buf  = buf\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tprepare() {\r\n\t\t\t\tvar {buf} = this\r\n\t\t\t\tif (!buf) return this.load().then( _ => this.prepare() )\r\n\t\t\t\treturn new Promise( (ok, ng) => {\r\n\t\t\t\t\tctx.decodeAudioData(buf.slice(), buf => {\r\n\t\t\t\t\t\tvar src = ctx.createBufferSource()\r\n\t\t\t\t\t\tsrc.buffer = buf\r\n\t\t\t\t\t\tsrc.connect(this.gain)\r\n\t\t\t\t\t\tthis.src = src\r\n\t\t\t\t\t\tok()\r\n\t\t\t\t\t}, ng)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\t\tplay() {\r\n\t\t\t\tif (!canplay()) return Promise.resolve(null)\r\n\t\t\t\tvar {src} = this\r\n\t\t\t\tif (!src) return this.prepare().then( _ => this.play() )\r\n\t\t\t\tsrc.start()\r\n\t\t\t\tthis.src = null\r\n\t\t\t\tthis.prepare()\r\n\t\t\t\treturn new Promise( ok => { src.onended = ok } )\r\n\t\t\t}\r\n\r\n\t\t\tfadeout(duration = 0.5) {\r\n\t\t\t\tif (!canplay()) return\r\n\t\t\t\tvar t0 = ctx.currentTime, gain = this.gain.gain\r\n\t\t\t\tgain.cancelScheduledValues(t0)\r\n\t\t\t\tgain.setValueAtTime(gain.value, t0)\r\n\t\t\t\tgain.linearRampToValueAtTime(0, t0 + duration)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tObject.assign(Sound, {\r\n\t\t\tsoundEnabled, soundAvailability, CTX: ctx, gainRoot, gainMaster,\r\n\t\t})\r\n\r\n\t\tREADY.Sound.ready(Sound)\r\n\r\n\t}\r\n\r\n\r\n\tinit().check()\r\n\r\n}).check()\r\n\r\n","$traceurRuntime.initGeneratorFunction($__placeholder__0)","return $__placeholder__0(\n              $__placeholder__1,\n              $__placeholder__2, this);","$traceurRuntime.createGeneratorInstance","function($ctx) {\n      while (true) $__placeholder__0\n    }","return $__placeholder__0","$ctx.sent","$ctx.returnValue = $__placeholder__0","return $ctx.end()","\r\nREADY().then( ({Util}) => {\r\n\t'use strict'\r\n\r\n\tfunction setPhase(phase) { document.title = '【' +phase+ '】' }\r\n\tfunction setRunPhase(kind) { setPhase(`${kind}中...`) }\r\n\tfunction setErrorPhase(kind) { setPhase(`${kind}エラー`) }\r\n\r\n\r\n\tfunction parseScript(text) {\r\n\t\ttext = text.replace(/\\r\\n/g, '\\n').replace(/\\n+/g, '\\n').replace(/\\n/g, '\\r\\n') + '\\r\\n'\r\n\t\ttext = text.replace(/^\\/\\/.*/gm, '')\r\n\t\ttext = text.replace(/^\\#(.*)/gm, (_, str) => `・マーク\\r\\n\\t${str}`)\r\n\t\t//LOG(text)\r\n\t\t//global.text = text\r\n\t\tfunction parseOne(base, text) {\r\n\t\t\tvar chanks = text.match(/[^\\n]+?\\n(\\t+[\\s\\S]+?\\n)+/g) || []\r\n\t\t\tchanks.forEach(chank => {\r\n\t\t\t\r\n\t\t\t\tvar blocks = chank.replace(/^\\t/gm,'').replace(/\\n$/, '').match(/.+/g)\r\n\t\t\t\t//LOG(blocks)\r\n\t\t\t\tvar act = blocks.shift().trim()\r\n\t\t\t\tvar data = '\\n' +blocks.join('\\n')+ '\\n'\r\n\t\t\t\tvar ary = []\r\n\t\t\t\tif (act[0] !== '・') {\r\n\t\t\t\t\tbase.push(['会話', [[act, blocks]]])\r\n\t\t\t\t\treturn\r\n\t\t\t\t} else act = act.slice(1)\r\n \r\n\t\t\t\tif (data.match(/\\t/)) {\r\n\t\t\t\t\tbase.push([act, ary])\r\n\t\t\t\t\t//LOG(data)\r\n\t\t\t\t\tparseOne(ary, data)\r\n\t\t\t\t} else base.push([act, blocks])\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\tvar base = []\r\n\t\tcacheEmogi(text)\r\n\t\tparseOne(base, text)\r\n\r\n\t\treturn base\r\n\r\n\t}\r\n\r\n\r\n\r\n\tfunction copyObject(obj) {\r\n\t\treturn JSON.parse(JSON.stringify(obj))\r\n\t}\r\n\r\n\r\n\tfunction otherName(name) {\r\n\t\treturn function () { return this[name].apply(this, arguments) }\r\n\t}\r\n\r\n\r\n\r\n\tfunction cacheEmogi(text) {\r\n\t\t;(text.match(/\\\\\\[.+\\]/g) || []).forEach( eff => {\r\n\t\t\tvar name = eff.slice(2, -1)\r\n\t\t\tUtil.toBlobEmogiURL(name)\r\n\t\t})\r\n\t}\r\n\r\n\r\n\r\n\tvar preloadAppend = (_ => {\r\n\r\n\t\tvar buffer = []\r\n\t\tvar max = 2\r\n\t\tvar n = 0\r\n\r\n\t\tfunction next() {\r\n\t\t\twhile (n < max) {\r\n\t\t\t\tvar func = buffer.shift()\r\n\t\t\t\tif (!func) return\r\n\t\t\t\t++n\r\n\t\t\t\tPromise.resolve(func()).through(_ => {\r\n\t\t\t\t\t--n\r\n\t\t\t\t\tnext()\r\n\t\t\t\t}).check()\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction append(func) {\r\n\t\t\tbuffer.push(func)\r\n\t\t\tnext()\r\n\t\t}\r\n\r\n\t\treturn append\r\n\r\n\t})()\r\n\r\n\r\n\r\n\tfunction flattenScript(script) {\r\n\r\n\t\tvar buf = []\r\n\r\n\r\n\t\tfunction flatten(script) {\r\n\r\n\t\t\tvar bk = []\r\n\t\t\tvar q = 0\r\n\r\n\t\t\tscript.forEach(prog => {\r\n\r\n\t\t\t\tbk.forEach( n => { buf[n] = buf.length - (q?1:0) } )\r\n\t\t\t\tbk = []\r\n\t\t\t\tif (q) buf[q] = buf.length \r\n\t\t\t\tq = 0\r\n\r\n\t\t\t\tvar [act, data] = prog\r\n\r\n\r\n\t\t\t\tswitch (act) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tcase '繰返': case '繰返し': case '繰り返し':\r\n\r\n\t\t\t\t\t\tq = buf.length +2\r\n\r\n\t\t\t\t\tcase '選択': case '選択肢':\r\n\t\t\t\t\tcase '分岐':\r\n\r\n\t\t\t\t\t\tvar cp = buf.push(act, null) -1\r\n\r\n\t\t\t\t\t\tif (q) buf.push(-1)\r\n\r\n\t\t\t\t\t\tbuf[cp] = data.map( ([lab, val]) => {\r\n\t\t\t\t\t\t\tif (Array.isArray(val[0])) {\r\n\t\t\t\t\t\t\t\tvar p = buf.length\r\n\t\t\t\t\t\t\t\tbk.push(flatten(val))\r\n\t\t\t\t\t\t\t\tval = p\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn [lab, val]\r\n\t\t\t\t\t\t})\r\n\r\n\t\t\t\t\t\tif (q) {\r\n\t\t\t\t\t\t\tbuf[cp].unshift(q)\r\n\t\t\t\t\t\t\tbuf.push(cp -1)\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tdefault:\r\n\r\n\t\t\t\t\t\tbuf.push(act, data)\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t})\r\n\r\n\t\t\treturn buf.push(-1) -1\r\n\r\n\t\t}\r\n\r\n\t\tflatten(script)\r\n\t\treturn buf\r\n\t}\r\n\r\n\r\n\r\n\tfunction cacheScript(script, sname = script.sname) {\r\n\r\n\t\tif (!Array.isArray(script)) {\r\n\t\t\tLOG('不正なスクリプトのためキャッシュできない')\r\n\t\t\tLOG(script)\r\n\t\t\treturn Promise.reject('不正なスクリプトのためキャッシュできない')\r\n\t\t}\r\n\r\n\t\tif (!sname) LOG('!!!sname')\r\n\r\n\t\tscript = copyObject(script)\t\r\n\r\n\r\n\t\tvar defer = Promise.defer()\r\n\t\tvar caching = 0\r\n\r\n\t\tfunction append(args, toURL = Util.toBlobURL) {\r\n\t\t\t++caching\r\n\t\t\tpreloadAppend( _ => {\r\n\t\t\t\treturn toURL(...args).through( _ => {\r\n\t\t\t\t\tif (--caching <= 0) defer.resolve()\r\n\t\t\t\t}).check()\r\n\t\t\t})\r\n\t\t\t//.then( url => LOG(`キャッシュ：${url} ${toURL.name} ${args}`) ).\r\n\t\t}\r\n\r\n\r\n\t\tfor (var po = 0; po < script.length; po++) {\r\n\t\t\ttry {\r\n\r\n\t\t\t\tvar act = script[po]\r\n\r\n\t\t\t\tif (!act) continue\r\n\t\t\t\tif (typeof act != 'string') continue\r\n\r\n\t\t\t\tvar data = script[++po]\r\n\r\n\t\t\t\tswitch (act) {\r\n\r\n\t\t\t\t\tcase '背景':\r\n\t\t\t\t\t\tvar name = data[0]\r\n\t\t\t\t\t\tappend(['背景', name, 'jpg'])\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\tcase '立絵': case '立ち絵':\r\n\t\t\t\t\t\tdata.forEach( ary => {\r\n\r\n\t\t\t\t\t\t\tif (Util.isNoneType(ary)) return\r\n\t\t\t\t\t\t\tvar [position, names] = ary\r\n\t\t\t\t\t\t\tif (!position) return\r\n\t\t\t\t\t\t\tif(!names) return\r\n\r\n\t\t\t\t\t\t\tvar name = names[0]\r\n\r\n\t\t\t\t\t\t\tappend(['立ち絵', name, 'png'])\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\tcase '繰返': case '繰返し': case '繰り返し':\r\n\t\t\t\t\tcase '選択': case '選択肢':\r\n\t\t\t\t\tcase '分岐':\r\n\t\t\t\t\t\tdata = data.reduce( (base, ary) => {\r\n\t\t\t\t\t\t\tvar val = ary[1]\r\n\t\t\t\t\t\t\tif (val && typeof val[0] == 'string') base.push(val[0])\r\n\t\t\t\t\t\t\treturn base\r\n\t\t\t\t\t\t}, [] )\r\n\r\n\t\t\t\t\tcase 'ジャンプ':\r\n\t\t\t\t\t\tdata.forEach( to => {\r\n\t\t\t\t\t\t\tif (!to) return\r\n\t\t\t\t\t\t\tvar name = to, base = sname\r\n\t\t\t\t\t\t\tvar [name, mark = ''] = name.replace(/＃/g,'#').split('#')\r\n\t\t\t\t\t\t\tif (!name) name = base.replace(/＃/g,'#').split('#')[0]\r\n\t\t\t\t\t\t\tvar subkey = `${Data.scenarioName}/${Util.forceName('シナリオ', name, 'txt')}`\r\n\t\t\t\t\t\t\t//LOG(subkey)\r\n\t\t\t\t\t\t\tif (!Util.cacheHas(subkey)) fetchScriptData(to, base).then( script => cacheScript(script) ).check()\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t} catch (err) {\r\n\t\t\t\tLOG(`キャッシュ中にコマンド『${act}』で『${err}』が起きた`)\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//LOG(caching)\r\n\t\tif (caching == 0) defer.resolve()\r\n\r\n\t\treturn defer.promise\r\n\r\n\r\n\t}\r\n\r\n\r\n\r\n\tfunction runScript(script, sname = script.sname, masterComp) {\r\n\r\n\r\n\t\tif (!sname) LOG('!!!sname')\r\n\t\tsname = sname.split('#')[0]\r\n\r\n\t\tView.changeModeIfNeeded('NOVEL')\r\n\t\tData.phase = 'play'\r\n\t\tdocument.title = `【${Data.scenarioName}】`\r\n\r\n\t\tvar run = Promise.defer()\r\n\t\t//if (!parentComp) parentComp = run.resolve\r\n\t\tif (!masterComp) masterComp = run.resolve\r\n\r\n\t\tvar {mark, hash, params, scenario, active} = script\r\n\t\tif(mark) Data.current.mark = mark\r\n\r\n\t\tvar searching = !!hash\r\n\t\tif (params) Object.keys(params).forEach(name => Util.paramSet(name, params[name]))\r\n\t\t//if (scenario) Player.setScenario(scenario)\r\n\t\t\r\n\t\tscript = copyObject(script)\r\n\t\tvar gsave = Data.current.setting\r\n\t\tvar {visited} = gsave\r\n\t\tif (!visited) gsave.visited = visited = {}\r\n\t\tvar vBA = visited[sname] \r\n\t\tif (!vBA) visited[sname] = vBA = BitArray.create(script.length)\r\n\r\n\t\t//function runSubScript(script) { return runScript(script, sname, parentComp, masterComp) }\r\n\t\tfunction runChildScript(script) { return runScript(script, undefined, masterComp) }\r\n\t\t\r\n\t\tvar actHandlers = {\r\n\t\t\t会話(data, done, failed, {visited}) {\r\n\r\n\t\t\t\tvar isNone = Util.isNoneType(data[0])\r\n\t\t\t\tView.mainMessageWindow.el.style.opacity = isNone ? '0' : ''\r\n\t\t\t\tif (isNone) return done()\r\n\r\n\t\t\t\tsave()\r\n\r\n\t\t\t\tfunction nextPage() {\r\n\r\n\t\t\t\t\tvar ary = data.shift()\r\n\t\t\t\t\tif (!ary) {\r\n\t\t\t\t\t\tautosave(false)\r\n\t\t\t\t\t\treturn done()\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tvar name = ary[0], texts = ary[1]\r\n\t\t\t\t\tif (Util.isNoneType(name)) name = ''\r\n\t\t\t\t\tname = replaceEffect(name)\r\n\t\t\t\t\tView.nextPage(name, {visited}) \r\n\t\t\t\t\t//Data.currentSpeakerName = name\r\n\r\n\t\t\t\t\tfunction nextSentence() {\r\n\t\t\t\t\t\tvar text = texts.shift()\r\n\t\t\t\t\t\tif (!text) return nextPage()\r\n\t\t\t\t\t\ttext = text.replace(/\\\\w\\[(\\d*)\\]/g, (_, num) => {\r\n\t\t\t\t\t\t\treturn '\\u200B'.repeat(+num||1)\r\n\t\t\t\t\t\t})//.replace(/\\\\n/g, '\\n')\r\n\t\t\t\t\t\ttext = replaceEffect(text)\r\n\t\t\t\t\t\t//Data.currentSentence = text\r\n\t\t\t\t\t\tView.addSentence(text, {visited}).on('go', nextSentence, failed)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tnextSentence()\r\n\t\t\t\t}\r\n\r\n\t\t\t\tnextPage()\r\n\t\t\t},\r\n\r\n\t\t\t背景(data, done, failed) {\r\n\t\t\t\tvar name = replaceEffect(data[0])\r\n\t\t\t\tUtil.toBlobURL('背景', name, 'jpg').then( url => View.setBGImage({ name, url }) ).then(done, failed)\r\n\t\t\t},\r\n\r\n\t\t\t立絵: otherName('立ち絵'),\r\n\t\t\t立ち絵(data, done, failed) {\r\n\t\t\t\t//LOG(data)\r\n\t\t\t\tPromise.all(data.reduce((base, ary) => {\r\n\r\n\t\t\t\t\tif (!base) return\r\n\r\n\t\t\t\t\tif (Util.isNoneType(ary)) return base\r\n\r\n\t\t\t\t\tvar [position, names] = ary\r\n\r\n\t\t\t\t\tif (!position) return failed('不正な位置検出')\r\n\t\t\t\t\tif(!names) return failed('不正な画像名検出') \r\n\r\n\t\t\t\t\tposition = replaceEffect(position)\r\n\t\t\t\t\tvar name = replaceEffect(names[0])\r\n\r\n\t\t\t\t\tvar a_type = ['left','right']['左右'.indexOf(position)]\r\n\t\t\t\t\tvar v_type = 'top'\r\n\t\t\t\t\tvar [a_per, v_per] = [0, 0]\r\n\t\t\t\t\tvar height = null\r\n\r\n\t\t\t\t\tif (!a_type) {\r\n\t\t\t\t\t\tvar pos = Util.toHalfWidth(position).match(/[+\\-0-9.]+/g)\r\n\t\t\t\t\t\tif (!pos) return failed('不正な位置検出')\r\n\t\t\t\t\t\tvar [a_pos, v_pos='0', height = null] = pos\r\n\t\t\t\t\t\ta_per = Math.abs(+a_pos)\r\n\t\t\t\t\t\tv_per = Math.abs(+v_pos)\r\n\t\t\t\t\t\ta_type = a_pos.match('-') ? 'right' : 'left'\r\n\t\t\t\t\t\tv_type = v_pos.match('-') ? 'bottom' : 'top'\r\n\t\t\t\t\t\theight = Util.toSize(height)\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tbase.push(Util.toBlobURL('立ち絵', name, 'png').then( url => ({ name, url, height, [a_type]: `${a_per}%`, [v_type]: `${v_per}%` }) ))\r\n\t\t\t\t\treturn base\r\n\t\t\t\t}, [])).then( opt => View.setFDImages(opt) ).then(done, failed)\r\n\t\t\t},\r\n\r\n\t\t\t効果: otherName('エフェクト'),\r\n\t\t\tエフェクト(data, done, failed, {visited}) {\r\n\t\t\t\tdata.forEach( prog => {\r\n\t\t\t\t\tif (prog == 'フェード準備') return View.prepareFade().then(done, failed)\r\n\t\t\t\t\tvar act = prog[0], opt = Util.toHalfWidth(replaceEffect(prog[1][0])).split(/\\s+/)\r\n\t\t\t\t\tvar msec = opt[0].match(/[\\d.]+/)*1000\r\n\t\t\t\t\tswitch (act) {\r\n\t\t\t\t\t\tcase 'フェード':\r\n\t\t\t\t\t\t\treturn View.fade({msec, visited}).then(done, failed)\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tcase 'フラッシュ':\r\n\t\t\t\t\t\t\tvar color = opt[1]\r\n\t\t\t\t\t\t\treturn View.flash({msec, color, visited}).then(done, failed)\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\tdefault: failed('想定外のエフェクトタイプ')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\t選択: otherName('選択肢'),\r\n\t\t\t選択肢(data, done, failed) {\r\n\t\t\t\t//save()\r\n\r\n\t\t\t\tView.setChoiceWindow(data.map(ary => {\r\n\t\t\t\t\treturn { name: replaceEffect(ary[0]), value: ary[1] }\r\n\t\t\t\t})).then( value => {\r\n\t\t\t\t\tif (typeof value[0] == 'string') actHandlers['ジャンプ'](value, done, failed)\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tpo = value\r\n\t\t\t\t\t\tdone()\r\n\t\t\t\t\t}\r\n\t\t\t\t} )\r\n\t\t\t\t\t\r\n\t\t\t},\r\n\r\n\t\t\tジャンプ(data, done, failed) {\r\n\t\t\t\t//autosave(false)\r\n\t\t\t\tvar to = replaceEffect(data[0])\r\n\t\t\t\tfetchScriptData(to, sname).then( script => runChildScript(script) ).then(done, failed)\r\n\t\t\t},\r\n\r\n\t\t\t変数: otherName('パラメータ'),\r\n\t\t\tパラメーター: otherName('パラメータ'),\r\n\t\t\tパラメータ(data, done, failed) {\r\n\t\t\t\t//LOG(data)\r\n\t\t\t\tdata.forEach(str => {\r\n\t\t\t\t\tstr = Util.toHalfWidth(str)\r\n\t\t\t\t\tstr = str.match(/(.+)\\:(.+)/)\r\n\t\t\t\t\tif (!str) return failed('不正なパラメータ指定検出') \r\n\t\t\t\t\tvar name = replaceEffect(str[1])\r\n\t\t\t\t\tvar effect = str[2]\r\n\t\t\t\t//\tif (isNoneType(effect)) effect = '\"\"'\r\n\t\t\t\t\tif (!name) return failed('不正なパラメータ指定検出') \r\n\t\t\t\t\tvar eff = evalEffect(effect, failed)\r\n\t\t\t\t\t//LOG(name, effect, eff)\r\n\t\t\t\t\tUtil.paramSet(name, eff)\r\n\r\n\t\t\t\t})\r\n\t\t\t\tdone()\r\n\t\t\t},\r\n\r\n\t\t\t入力(data, done, failed) {\r\n\t\t\t\t//LOG(data)\r\n\t\t\t\tstr = Util.toHalfWidth(data[0])\r\n\t\t\t\tif (!str) return failed('不正なパラメータ指定検出') \r\n\t\t\t\tvar str = /.+\\:/.test(str) ? str.match(/(.+)\\:(.*)/) : [, str, '\"\"']\r\n\r\n\t\t\t\tvar name = replaceEffect(str[1])\r\n\t\t\t\tvar effect = str[2]\r\n\t\t\t\tvar eff = evalEffect(effect, failed)\r\n\t\t\t\t//LOG(name, effect, eff)\r\n\t\t\t\tvar rv = prompt('', eff) || eff\r\n\t\t\t\tUtil.paramSet(name, rv)\r\n\r\n\t\t\t\tdone()\r\n\t\t\t},\r\n\r\n\t\t\t繰返: otherName('繰り返し'),\r\n\t\t\t繰返し: otherName('繰り返し'),\r\n\t\t\t繰り返し(data, done, failed) {\r\n\t\t\t\t//if (i > 10000) return failed('繰り返し回数が多すぎる(10000回超え)')\r\n\t\t\t\tvar q = data[0]\r\n\t\t\t\tdata = data.slice(1)\r\n \t\t\t\tif (!data.some(([effect, acts]) => {\r\n \t\t\t\t\tif (!effect) return failed('不正なパラメータ指定検出') \r\n\t\t\t\t\tvar flag = !!evalEffect(effect, failed)\r\n\t\t\t\t\tif (flag) po = acts\r\n\t\t\t\t\treturn flag\r\n\t\t\t\t}) ) po = q\r\n\t\t\t\tdone()\r\n\t\t\t},\r\n\r\n\t\t\t分岐(data, done, failed) {\r\n \t\t\t\tdata.some(([effect, acts]) => {\r\n \t\t\t\t\tif (!effect) return failed('不正なパラメータ指定検出') \r\n\t\t\t\t\tvar flag = !!evalEffect(effect, failed)\r\n\t\t\t\t\tif (flag) po = acts\r\n\t\t\t\t\treturn flag\r\n\t\t\t\t})\r\n\t\t\t\tdone()\r\n\t\t\t},\r\n\r\n\t\t\tマーク(data, done, failed) {\r\n\r\n\t\t\t\tData.current.mark = data[0]\r\n\t\t\t\tautosave()\r\n\t\t\t\tdone()\r\n\t\t\t\t\r\n\t\t\t},\r\n\r\n\t\t\tスクリプト(data, done, failed) {\r\n\t\t\t\tvar act = data[0]\r\n\t\t\t\tif (Util.isNoneType(act)) return done()\r\n\t\t\t\tswitch (act) {\r\n\t\t\t\t\t//case '抜ける':\r\n\t\t\t\t\t//case 'ぬける':\r\n\t\t\t\t\t//\trun.resolve()\r\n\t\t\t\t\t//break\r\n\t\t\t\t\tcase '戻る':\r\n\t\t\t\t\tcase 'もどる':\r\n\t\t\t\t\tcase '帰る':\r\n\t\t\t\t\tcase 'かえる':\r\n\t\t\t\t\t\trun.resolve()\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tcase '終わる':\r\n\t\t\t\t\tcase '終る':\r\n\t\t\t\t\tcase 'おわる':\r\n\t\t\t\t\t\tmasterComp()\r\n\t\t\t\t\tbreak\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\tfailed(`不正なスクリプトコマンド『${act}』`)\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tコメント(data, done, failed) {\r\n\t\t\t\tdone()\r\n\t\t\t},\r\n\r\n\t\t}\r\n\r\n\r\n\r\n\t\tfunction save() {\r\n\r\n\t\t\tvar params = {}\r\n\t\t\tvar globalParams = {}\r\n\t\t\tUtil.paramForEach( (value, key) => { params[key] = value })\r\n\t\t\tvar cp = {\r\n\t\t\t\tscript: sname, \r\n\t\t\t\tparams,\r\n\t\t\t\tactive: Data.current.active,\r\n\t\t\t\tpoint: po-2,\r\n\t\t\t\tmark: Data.current.mark\r\n\t\t\t}\r\n\r\n\t\t\tData.current.point = cp\r\n\t\t}\r\n\r\n\r\n\t\tfunction autosave(full) {\r\n\t\t\tvar p = Storage.setGlobalData(Data.current.setting)\r\n\t\t\tif (!full) return p\r\n\t\t\tsave()\r\n\t\t\tUtil.updateDebugWindow()\r\n\r\n\t\t\treturn Promise.all([p,\r\n\t\t\t\tStorage.getSaveDatas(101, 110).then(saves => {\r\n\r\n\t\t\t\t\tsaves.pop()\r\n\t\t\t\t\tsaves.unshift(Data.current.point)\r\n\t\t\t\t\tsaves.forEach( (save, i) => {\r\n\t\t\t\t\t\tif (save) Storage.setSaveData(i, save) \r\n\t\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t])\r\n\t\t}\r\n\r\n\r\n\t\tfunction main_loop() {\r\n\r\n\t\t\tvar act, loop = new Promise( (resolve, reject) => {\r\n\r\n\t\t\t\t//LOG(po)\r\n\r\n\t\t\t\tact = script[po]\r\n\t\t\t\tif (!act) {\r\n\t\t\t\t\treturn searching ? run.reject(`マーク『${hash}』が見つかりません。`) : run.resolve() \r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (!searching && typeof act == 'number') {\r\n\t\t\t\t\tif (searching && (+hash === po)) searching = false\r\n\t\t\t\t\telse po = act\r\n\t\t\t\t\treturn resolve()\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\tif (searching) {\r\n\t\t\t\t\t//LOG('マーク', hash, po)\r\n\t\t\t\t\tif (+hash === po) {\r\n\t\t\t\t\t\tsearching = false\r\n\t\t\t\t\t} else if (act == 'マーク') {\r\n\t\t\t\t\t\tvar data = script[++po]\r\n\t\t\t\t\t\t++po\r\n\t\t\t\t\t\tvar mark = data[0]\r\n\t\t\t\t\t\tif (mark == hash) {\r\n\t\t\t\t\t\t\tsearching = false\r\n\t\t\t\t\t\t\treturn actHandlers['マーク']([mark], resolve, reject)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else ++po\r\n\t\t\t\t\tresolve()\r\n\t\t\t\t} else if (act in actHandlers) {\r\n\t\t\t\t\tvar visited = BitArray.get(vBA, po) === 1\r\n\t\t\t\t\tvar visit = BitArray.set.bind(BitArray, vBA, po)\r\n\t\t\t\t\tvar data = script[++po]\r\n\t\t\t\t\t++po\r\n\t\t\t\t\tactHandlers[act](data, _ => {\r\n\t\t\t\t\t\tvisit()\r\n\t\t\t\t\t\tresolve()\r\n\t\t\t\t\t}, reject, {visited})\r\n\t\t\t\t} else {\r\n\t\t\t\t\tUtil.error('サポートされていないコマンド『' +act+ '』を検出しました。\\n\\nこのコマンドを飛ばして再生が継続されます。')\r\n\t\t\t\t\t++po\r\n\t\t\t\t\tresolve()\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t}).then(main_loop, err => {\r\n\t\t\t\tvar message = err ? `コマンド『${act?act:'(不明)'}』で『${err}』が起こりました。` : `コマンド『${act}』が原因かもしれません。`\r\n\t\t\t\tUtil.error('スクリプトを解析中にエラーが発生しました。\\n\\n' +message+ '\\n\\nこのコマンドを保証せず再生が継続されます。')\r\n\t\t\t\treturn main_loop()\r\n\t\t\t})\r\n\t\t}\r\n\r\n\t\t//cacheScript(script, sname, 1)\r\n\t\tvar po = 0\r\n\r\n\t\tnew Promise( ok => {\r\n\r\n\t\t\tif (active) {\r\n\t\t\t\tvar p = []\r\n\r\n\t\t\t\tvar obj = active.BGImage \r\n\t\t\t\tif (obj && obj.name) {\r\n\t\t\t\t\tp.push( Util.toBlobURL('背景', obj.name, 'jpg').then( url => {obj.url = url; return obj} )\r\n\t\t\t\t\t.then( obj => View.setBGImage(obj) ) )\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar ary = active.FDImages\r\n\t\t\t\tif (ary) {\r\n\t\t\t\t\tp.push( Promise.all(ary.map( obj => obj.name ? \r\n\t\t\t\t\t\tUtil.toBlobURL('立ち絵', obj.name, 'png').then( url => {obj.url = url; return obj} ) : 1 ))\r\n\t\t\t\t\t.then( opts => View.setFDImages(opts) ) )\r\n\t\t\t\t}\r\n\r\n\t\t\t\tPromise.all(p).then(ok).check()\r\n\r\n\t\t\t} else ok()\r\n\r\n\t\t}).then(main_loop)\r\n\r\n\r\n\t\treturn run.promise\r\n\r\n\t}\r\n\r\n\r\n\r\n\tfunction replaceEffect(str) {\r\n\t\treturn str.replace(/\\\\{(.+?)}/g, (_, efect) => evalEffect(efect) )\r\n\t}\r\n\r\n\r\n\tfunction evalEffect(effect, failed) {\r\n\t\teffect = effect.trim()\r\n\t\tif (Util.isNoneType(effect)) return true\r\n\t\teffect = Util.toHalfWidth(effect)\r\n\t\t.replace(/\\\\/g,'\\\\\\\\')\r\n\t\t.replace(/\\=\\=/g, '=').replace(/[^!><=]\\=/g, str => str.replace('=', '==') )\r\n\t\t.replace(/\\&\\&/g, '&').replace(/[^!><&]\\&/g, str => str.replace('&', '&&') )\r\n\t\t.replace(/\\|\\|/g, '|').replace(/[^!><|]\\|/g, str => str.replace('|', '||') )\r\n\t\t.replace(/^ー/, '-').replace(/([\\u1-\\u1000\\s])(ー)/g, '$1-').replace(/(ー)([\\u1-\\u1000\\s])/g, '-$2')\r\n\t\tif (!effect) return failed('不正なパラメータ指定検出') \r\n\t\tif (/\\'/.test(effect)) return failed('危険な記号の検出') \r\n\t\teffect = effect.replace(/[^+\\-*/%><!=?:()&|\\s]+/g, str => {\r\n\t\t\tif (/^[0-9.]+$/.test(str)) return str\r\n\t\t\tif (/^\"[^\"]*\"$/.test(str)) return str\r\n\t\t\treturn `Util.paramGet('${str}')`\r\n\t\t})\r\n\t\t//LOG(effect)\r\n\t\treturn eval(effect)\r\n\t}\r\n\r\n\r\n\r\n\r\n\r\n\tfunction print(message) {\r\n\t\tif (!View.print) View.changeMode('TEST')\r\n\t\tView.print(message)\r\n\t}\r\n\r\n\r\n\tfunction loadSaveData() {\r\n\t\treturn Util.co(function* () {\r\n\r\n\t\t\tvar saves = yield Storage.getSaveDatas(1, 110)\r\n\t\t\tvar opts = saves.map( (save, i) => {\r\n\t\t\t\tif (!save) var mark = '------------'\r\n\t\t\t\telse if (save.systemVersion !== Storage.VERSION) {\r\n\t\t\t\t\tsave = null\r\n\t\t\t\t\tmark = '--old data--'\r\n\t\t\t\t} else mark = save.mark || '(no name)'\r\n\t\t\t\tvar name = i > 100 ? 'A'+(i-100) : i\r\n\t\t\t\treturn {name: `${name}．${mark}`, value: save, disabled: !save }\r\n\t\t\t})\r\n\r\n\t\t\tvar save = yield View.setChoiceWindow(opts, {sys: true, closeable: true})\r\n\t\t\tif (save == '閉じる') return false\r\n\t\t\tvar {params, script, point, active, mark} = save\r\n\t\t\tUtil.paramClear()\r\n\t\t\treturn Player.fetchScriptData(`${script}#${point}`).then( script => {\r\n\t\t\t\tscript.params = params\r\n\t\t\t\tscript.scenario = Data.scenarioName\r\n\t\t\t\tscript.active = active\r\n\t\t\t\tscript.mark = mark\r\n\t\t\t\treturn script\r\n\t\t\t})\r\n\r\n\t\t})()\r\n\t}\r\n\r\n\tfunction saveSaveData() {\r\n\t\treturn Util.co(function* () {\r\n\r\n\t\t\tvar saves = yield Storage.getSaveDatas(1, 100)\r\n\r\n\t\t\tvar opts = saves.map( (save, i) => {\r\n\t\t\t\tif (!save) var mark = '----------'\r\n\t\t\t\telse if (save.systemVersion !== Storage.VERSION) {\r\n\t\t\t\t\tmark = '--old data--'\r\n\t\t\t\t} else mark = save.mark || '(no name)'\r\n\t\t\t\tvar name = i\r\n\t\t\t\treturn {name: `${name}．${mark}`, value: i}\r\n\t\t\t})\r\n\t\t\tvar no = yield View.setChoiceWindow(opts, {sys: true, closeable: true})\r\n\r\n\t\t\tif (no == '閉じる') return false\r\n\r\n\t\t\tvar con = saves[no] ? yield View.setConfirmWindow('上書きする') : true\r\n\t\t\tif (!con) return false\r\n\r\n\t\t\tvar params = {}\r\n\t\t\tUtil.paramForEach( (value, key) => params[key] = value )\r\n\t\t\tvar save = Data.current.point\r\n\t\t\tsave.scenarioVersion = Data.current.scenarioVersion\r\n\t\t\tsave.systemVersion = Storage.VERSION\r\n\t\t\tyield Storage.setSaveData(no, save)\r\n\t\t\tyield Storage.setGlobalData(Data.current.setting)\r\n\t\t\treturn true\r\n\t\t\t\r\n\t\t})()\r\n\t}\r\n\r\n\tfunction deleteSaveData() {\r\n\t\treturn Util.co(function* () {\r\n\r\n\t\t\tvar con = yield View.setConfirmWindow('初期化する')\r\n\t\t\tif (!con) return false\r\n\t\t\tyield Storage.deleteSaveDatas(true)\r\n\t\t\tyield Storage.setGlobalData({scenarioVersion: Data.current.scenarioVersion})\r\n\t\t\treturn true\r\n\r\n\t\t})()\r\n\t}\r\n\r\n\tfunction init() {\r\n\t\tData.phase = 'pause'\r\n\t\tPlayer.setRunPhase('準備')\r\n\t\tUtil.paramClear(true)\r\n\t\tView.clean()\r\n\t}\r\n\r\n\r\n\r\n\tfunction setSetting(scenario, setting) {\r\n\t\treturn Util.co(function* () {\r\n\t\t\tData.dataSaveName = (setting['データ保存名']||[undefined])[0]\r\n\t\t\tData.scenarioName = scenario\r\n\t\t\tData.settingData = setting\r\n\r\n\t\t\tvar gsave = yield Storage.getGlobalData()\r\n\t\t\tif (!gsave) {\r\n\t\t\t\tgsave = {}\r\n\t\t\t\tyield Storage.setGlobalData(gsave)\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tData.current = {\r\n\t\t\t\tsetting: gsave,\r\n\t\t\t\tactive: {},\r\n\t\t\t}\r\n\r\n\t\t\tvar gparams = gsave.params || {}\r\n\t\t\tObject.keys(gparams).forEach( key => { Util.paramSet(key, gparams[key], false) })\r\n\r\n\t\t\tvar v = Data.current.scenarioVersion = Util.toHalfWidth((setting['バージョン']||['0'])[0])\r\n\t\t\tif (Data.current.setting.scenarioVersion != v) return true\r\n\t\t})()\r\n\r\n\t}\r\n\r\n\r\n\tfunction fetchSettingData(url) {\r\n\t\treturn Util.loadText(url).then( text => {\r\n\t\t\tvar setting = parseScript(text)\r\n\t\t\tvar data = {}\r\n\t\t\tsetting.forEach( ary => {\r\n\t\t\t\tdata[ary[0]] = ary[1]\r\n\t\t\t})\r\n\t\t\treturn data\r\n\t\t} )\r\n\t}\r\n\r\n\r\n\tfunction fetchScriptData(name, base) {\r\n\t\tif (!name) return Promise.reject('子スクリプト名が不正')\r\n\t\tvar [name, hash = ''] = name.replace(/＃/g,'#').split('#')\r\n\t\tif (!name) {\r\n\t\t\tif (!base) return Promise.reject('親スクリプト名が必要')\r\n\t\t\tname = base.replace(/＃/g,'#').split('#')[0]\r\n\t\t}\r\n\t\treturn Util.toBlobScriptURL(name).then(Util.loadText).then(parseScript).then(flattenScript).then(script => {\r\n\t\t\t//script.unshift(['マーク',['']])\r\n\t\t\tscript.hash = hash\r\n\t\t\tscript.sname = name\r\n\t\t\treturn script\r\n\t\t})\r\n\t}\r\n\r\n\t\r\n\tREADY.Player.ready({\r\n\t\tsetRunPhase, setErrorPhase, fetchSettingData, fetchScriptData, runScript, print,\r\n\t\tloadSaveData, saveSaveData, deleteSaveData, evalEffect, init, setSetting, cacheScript,\r\n\t})\r\n\r\n}).check()","($__placeholder__0 = $__placeholder__1[$__placeholder__2]) === void 0 ?\n        $__placeholder__3 : $__placeholder__4","$ctx.state = ($__placeholder__0) ? $__placeholder__1 : $__placeholder__2;\n        break","$ctx.maybeThrow()","\r\nREADY('Player', 'View', 'Sound').then( ({Util}) => {\r\n\t'use strict'\r\n\r\n\t//var {R} = Util.overrides\r\n\r\n\tvar message = (_ => {\r\n\t\tvar abort = Util.NOP\r\n\t\treturn text => {\r\n\t\t\tabort()\r\n\t\t\tView.changeModeIfNeeded('NOVEL')\r\n\t\t\tView.nextPage('システム', {sys: true})\r\n\t\t\tvar p = View.addSentence(text, { weight: 10 })\r\n\t\t\tabort = p.abort\r\n\t\t\treturn p\r\n\t\t}\r\n\t})()\r\n\r\n\r\n\r\n\tvar setup = Util.co(function* () {\r\n\r\n\t\tPlayer.init()\r\n\r\n\t\tsetSysBG()\r\n\r\n\t\t//message('作品一覧を読み込んでいます...')\r\n\t\tvar setting = yield Player.fetchSettingData(Data.URL.ContentsSetting)\r\n\r\n\t\tView.on('menu').then(setup)\r\n\r\n\t\tmessage('再生する作品を選んでください')\r\n\t\tvar scenario = yield new Promise( (ok, ng) => {\r\n\r\n\t\t\tvar novels = setting['作品']\r\n\r\n\t\t\tif (!novels || !novels.length) return message('再生できる作品がありません。\\n『データ/作品.txt』を確認してください。')\r\n\t\t\tif (novels.length === 1) return ok(novels[0])\r\n\r\n\t\t\tvar opts = novels.reduce( (opts, name) => {\r\n\t\t\t\topts.push({ name })\r\n\t\t\t\treturn opts\r\n\t\t\t}, [])\r\n\r\n\t\t\tView.setChoiceWindow(opts, {sys: true}).then(ok, ng)\r\n\t\t})\r\n\r\n\r\n\t\t//message('作品情報を読み込んでいます...')\r\n\t\tvar setting = yield Player.fetchSettingData(`データ/${scenario}/設定.txt`)\r\n\r\n\t\tvar reqNew = yield Player.setSetting(scenario, setting)\r\n\r\n\t\tif (reqNew) {\r\n\t\t\tyield message('セーブデータの初期化が必要です。')\r\n\t\t\tyield Player.deleteSaveData().then(...deleteAfter)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tmessage('『'+scenario+'』開始メニュー')\r\n\t\tvar script = yield new Promise( (ok, ng) => {\r\n\r\n\t\t\tvar opts = ['初めから', '続きから', '任意の場所から', '初期化する'].map( name => ({name}) )\r\n\r\n\t\t\treturn View.setChoiceWindow(opts, {sys: true, closeable: true}).then( kind => {\r\n\r\n\t\t\t\t//message('シナリオを読み込んでいます...')\r\n\t\t\t\tvar base = setting['開始シナリオ']\r\n\t\t\t\tif (!base || !(base = base[0])) return ng('開始シナリオが見つかりません。\\n開始シナリオの設定は必須です。')\r\n\r\n\t\t\t\tswitch (kind) {\r\n\t\t\t\t\tcase '初めから': Player.fetchScriptData(base).then(ok, ng) ; break\r\n\r\n\t\t\t\t\tcase '続きから': Player.loadSaveData().then(ok, ng) ; break\r\n\r\n\t\t\t\t\tcase '任意の場所から':\r\n\t\t\t\t\t\tvar name = prompt('『<スクリプト名>』または『<スクリプト名>#<マーク名>』の形式で指定します。\\n開始シナリオから始める場合は『#<マーク名>』の形式も使えます。')\r\n\t\t\t\t\t\tif (!name) return message('作品選択メニューに戻ります。').delay(1000).then(resetup)\r\n\t\t\t\t\t\tPlayer.fetchScriptData(name, base).check().then(ok, err => {\r\n\t\t\t\t\t\t\tmessage('指定されたファイルを読み込めません。').delay(1000).then(resetup)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\tcase '初期化する':\r\n\t\t\t\t\t\tPlayer.deleteSaveData().check().then(...deleteAfter)\r\n\t\t\t\t\tbreak\r\n\r\n\t\t\t\t\tcase '閉じる': resetup() ; break\r\n\r\n\t\t\t\t\tdefault: ng('想定外の機能が呼び出されました。')\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t})\r\n\r\n\t\t})\r\n\r\n\t\tif (!script) return resetup()\r\n\r\n\t\treturn load(script)\r\n\t})\r\n\r\n\r\n\tvar deleteAfter = [\r\n\t\tf => {\r\n\t\t\tif (f) return message('初期化しました').delay(1000).then(resetup)\r\n\t\t\telse return message('作品選択メニューに戻ります。').delay(1000).then(resetup)\r\n\t\t}, \r\n\t\terr => {\r\n\t\t\treturn message('消去中にエラーが発生しました。').delay(1000).then(resetup)\r\n\t\t}\r\n\t]\r\n\r\n\r\n\tvar load = Util.co(function* (script) {\r\n\r\n\t\tmessage('キャッシュ中…')\r\n\t\tyield Player.cacheScript(script)\r\n\r\n\t/*\r\n\t\tyield message('再生準備が完了しました。\\nクリック、タップ、エンターキー、スペースキーで進みます。').on('go').then( _ => {\r\n\t\t\t//Player.setRunPhase('再生')\r\n\t\t\treturn Player.runScript(script, scenario)\r\n\t\t})\r\n\t*/\r\n\r\n\t\tyield message('').then( _ => {\r\n\t\t\t//View.nextPage('')\r\n\t\t\tView.clean()\r\n\t\t\treturn Player.runScript(script)\r\n\t\t})\r\n\r\n\t\tView.clean()\r\n\t\t//Player.cacheClear()\r\n\r\n\t\tPlayer.setRunPhase('準備')\r\n\r\n\t\tyield message('再生が終了しました。\\n作品選択メニューに戻ります。').delay(1000)\r\n\r\n\t\treturn setup().catch(restart)\r\n\r\n\t})\r\n\r\n\r\n\r\n\r\n\tvar restart = Util.co(function* (err) {\r\n\r\n\t\tLOG(err)\r\n\t\tif (typeof err !== 'string') err = '致命的なエラーが発生したため再生を継続できません。' \r\n\t\tView.clean()\r\n\t\tPlayer.setRunPhase('エラー解決')\r\n\r\n\t\tyield message(err + '\\n作品選択メニューに戻ります。').delay(1000)\r\n\t\treturn resetup()\r\n\r\n\t})\r\n\r\n\r\n\tvar resetup = _ => setup().catch(restart)\r\n\r\n\r\n\tvar start = Util.co(function* () {\r\n\r\n\t\tPlayer.setRunPhase('起動')\r\n\r\n\t\tvar setting = yield Player.fetchSettingData(Data.URL.EngineSetting)\r\n\r\n\t\tData.SystemVersion = setting['システムバージョン'][0]\r\n\t\tvar startSE = new Sound('sysSE', '起動')\r\n\r\n\t\tView.changeMode('NOVEL')\r\n\r\n\t\tyield Promise.all([\r\n\t\t\tsetSysBG(false),\r\n\t\t\tPromise.race([\r\n\t\t\t\tPromise.all([\r\n\t\t\t\t\tstartSE.play(),\r\n\t\t\t\t\tView.addSentence('openノベルプレイヤー by Hikaru02\\n\\nシステムバージョン：　' + Data.SystemVersion, { weight: 0 }).delay(3000)\r\n\t\t\t\t]),\r\n\t\t\t\tView.on('go')\r\n\t\t\t]).through( _ => startSE.fadeout() )\r\n\t\t]).check()\r\n\r\n\t\treturn resetup()\r\n\t})\r\n\r\n\r\n\r\n\tfunction setSysBG(view = true) {\r\n\t\tvar p = Util.toBlobURL('画像', '背景', 'png', true)\r\n\t\treturn view ? p.then( url => View.setBGImage({ url, sys: true }) ) : p\t\r\n\t}\r\n\r\n\r\n\tstart().check()\r\n\r\n\tREADY.Game.ready({\r\n\r\n\t\treset() {\r\n\t\t\tresetup()\r\n\t\t},\r\n\r\n\t\tloadSaveData: Util.co(function* () {\r\n\t\t\tvar script = yield Player.loadSaveData()\r\n\t\t\tif (!script) return\r\n\t\t\tvar scenario = Data.scenarioName\r\n\t\t\tvar setting = Data.settingData\r\n\t\t\tPlayer.init()\r\n\t\t\tPlayer.setSetting(scenario, setting)\r\n\t\t\tvar reqNew = yield Player.setSetting(scenario, setting)\r\n\t\t\tif (reqNew) {\r\n\t\t\t\tyield message('セーブデータの初期化が必要です。')\r\n\t\t\t\tyield Player.deleteSaveData().then(...deleteAfter)\r\n\t\t\t\treturn\r\n\t\t\t} \r\n\t\t\tload(script)\r\n\t\t}),\r\n\r\n\t})\r\n\r\n}).check()\r\n\r\n\r\n\r\n\r\n/* TODO\r\n\t・Worker分離\r\n\t・エフェクト\r\n\t・画像面のCanvas化\r\n\t・選択肢ウィンドウ調整\r\n\t・音声\r\n\r\n*/"]}